<!doctype html><html lang=en data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025) | Buana Coding</title><meta name=description content="Learn Go's built-in structured logger slog: setup, JSON/Text handlers, levels, contextual attributes, custom handlers, HTTP middleware, testing, and production patterns for observability."><meta name=keywords content="go slog,log/slog,structured logging go,go logging best practices,json logging,slog handler,slog examples,zap vs slog,logrus vs slog,go observability"><link rel=canonical href=https://www.buanacoding.com/2025/09/complete-guide-slog-go-structured-logging-2025.html><link rel=alternate hreflang=en href=https://www.buanacoding.com/2025/09/complete-guide-slog-go-structured-logging-2025.html><meta property="og:type" content="article"><meta property="og:title" content="The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025) | Buana Coding"><meta property="og:description" content="Learn Go's built-in structured logger slog: setup, JSON/Text handlers, levels, contextual attributes, custom handlers, HTTP middleware, testing, and production patterns for observability."><meta property="og:url" content="https://www.buanacoding.com/2025/09/complete-guide-slog-go-structured-logging-2025.html"><meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025) | Buana Coding"><meta name=twitter:description content="Learn Go's built-in structured logger slog: setup, JSON/Text handlers, levels, contextual attributes, custom handlers, HTTP middleware, testing, and production patterns for observability."><meta name=twitter:image content="https://www.buanacoding.com/images/og-image.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Complete Guide to slog (Go 1.21\u002b): Modern Structured Logging in Go (2025) | Buana Coding","description":"Learn Go\u0027s built-in structured logger slog: setup, JSON\/Text handlers, levels, contextual attributes, custom handlers, HTTP middleware, testing, and production patterns for observability.","inLanguage":"en","datePublished":"2025-09-01T08:00:00\u002b07:00","dateModified":"2025-09-01T08:00:00\u002b07:00","author":{"@type":"Person","name":"Wiku Karno"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.buanacoding.com\/2025\/09\/complete-guide-slog-go-structured-logging-2025.html"},"image":"https:\/\/www.buanacoding.com\/images\/og-image.jpg","publisher":{"@type":"Organization","name":"Buana Coding"}}</script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel=stylesheet><link rel=stylesheet href="/style.css?v=1756702092"><link rel=stylesheet href="/css/overrides.css?v=1756702092"><link rel=stylesheet href="/css/syntax.css?v=1756702092"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0EN9J73FXF")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3149036684216973" crossorigin=anonymous></script></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"><header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow"><div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-2xl font-extrabold tracking-wide"><a href=/ class=hover:opacity-90>BUANACODING</a></h1><nav class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"><a href=/tags/general class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="hidden md:flex items-center"><div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium"><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html data-lang=en data-has-trans=true class="js-lang-link px-2 py-1 bg-white/20 text-white">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">ID</a></div></div><button id=openSearchModal class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
</button>
<button id=theme-toggle class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer" aria-label="Toggle Dark Mode">
<i id=icon-sun data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon data-feather=moon class="w-5 h-5"></i></button></nav><button id=menu-toggle class="md:hidden text-2xl focus:outline-none">
â˜°</button></div><div id=mobile-menu class="hidden md:hidden px-4 pb-4 space-y-2"><a href=/tags/general class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="mt-8 space-y-6"><button id=openSearchModalMobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
<span class="text-sm font-medium">Search</span></button><div class="flex items-center justify-between py-2"><div class="flex items-center gap-4"><i data-feather=globe class="w-5 h-5 text-white/80"></i>
<span class="text-sm font-medium text-white">Language</span></div><div class="flex text-xs"><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html data-lang=en data-has-trans=true class="js-lang-link px-3 py-1.5 text-white font-medium">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-3 py-1.5 text-white/60 hover:text-white">ID</a></div></div><button id=theme-toggle-mobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label="Toggle Dark Mode">
<i id=icon-sun-mobile data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon-mobile data-feather=moon class="w-5 h-5"></i>
<span class="text-sm font-medium">Theme</span></button></div></div></header><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2"><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div id=searchModal class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"><div class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"><button id=closeSearchModal class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110">
<i data-feather=x class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"></i>
</button>
<input type=text id=searchBox placeholder="Search articles..." class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"><div id=searchAdBanner class="mt-4 mb-8 hidden"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class="adsbygoogle search-results-ad" style=display:block;min-height:100px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><style>#searchAdBanner{transition:opacity .3s ease-in-out,transform .3s ease-in-out}#searchAdBanner.show{display:block !important;opacity:1;transform:translateY(0)}#searchAdBanner.hide{opacity:0;transform:translateY(-10px)}.search-results-ad{max-height:100px;overflow:hidden}</style><ul id=results class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"></ul></div></div><main class="flex-1 w-full"><div class="max-w-7xl mx-auto py-8 px-4"><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8"><article class="prose prose-blue dark:prose-invert lg:col-span-2"><nav class="text-sm text-gray-600 dark:text-gray-300 mb-4"><a href=/ class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">Home</a>
<span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
<a href=/tags/go class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">#Go</a></nav><h1>The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025)</h1><div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700"><span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
<a href="https://twitter.com/intent/tweet?text=The+Complete+Guide+to+slog+%28Go+1.21%2B%29%3A+Modern+Structured+Logging+in+Go+%282025%29&url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fcomplete-guide-slog-go-structured-logging-2025.html&via=buanacoding" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Share on Twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fcomplete-guide-slog-go-structured-logging-2025.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on Facebook"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fcomplete-guide-slog-go-structured-logging-2025.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on LinkedIn"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://wa.me/?text=The+Complete+Guide+to+slog+%28Go+1.21%2B%29%3A+Modern+Structured+Logging+in+Go+%282025%29%20https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fcomplete-guide-slog-go-structured-logging-2025.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200" title="Share on WhatsApp"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.484 3.488"/></svg>
</a><button onclick='copyLinkHeader("https://www.buanacoding.com/2025/09/complete-guide-slog-go-structured-logging-2025.html")' class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Copy Link">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</button>
<span id=copy-header-success class="hidden text-xs text-green-600 dark:text-green-400 font-medium">Copied!</span></div><script>function copyLinkHeader(e){navigator.clipboard.writeText(e).then(function(){showHeaderSuccess()}).catch(function(){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),showHeaderSuccess()})}function showHeaderSuccess(){const e=document.getElementById("copy-header-success");e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},2e3)}</script><p>Go 1.21 introduced <code>log/slog</code>, a standard structured logging API that finally brings firstâ€‘class JSON and attributeâ€‘based logging to the standard library. If youâ€™ve used <code>zap</code> or <code>logrus</code>, the core ideas will feel familiarâ€”just simpler and standardized.</p><p>This guide takes you from zero to production-ready logging with <code>slog</code>. We&rsquo;ll start with basic setup, then gradually build up to advanced patterns like HTTP middleware, security, testing, and observability integration. Each section includes working examples you can run immediately.</p><h3 id=why-structured-logging-matters>Why structured logging matters</h3><hr><p>Plain text logs are easy to read but hard to search and analyze. Structured logs emit keyâ€“value pairs (JSON), which makes it trivial to filter by <code>traceID</code>, aggregate by <code>user_id</code>, or alert on <code>level=ERROR</code>. For API work, check out how we build routes in Go here: <a href=/2025/05/how-to-build-rest-api-in-go-using-net-http.html>How to Build a REST API in Go using net/http
</a>. Pairing a solid logging strategy with a clean project structure helps in the long run: <a href=/2025/05/structuring-go-projects-clean-architecture.html>Structuring Go Projects: Clean Project Structure and Best Practices
</a>.</p><div class="my-8 flex justify-center"><div class="w-full max-w-2xl"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-3149036684216973 data-ad-slot=2492895769></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><h3 id=quick-start-text-vs-json>Quick start: Text vs JSON</h3><hr><p><code>slog</code> writes through a Handler. Use a colorful text output locally and JSON in production.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Development: humanâ€‘friendly text</span>
</span></span><span class=line><span class=cl>    <span class=nx>textHandler</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewTextHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Production: machineâ€‘friendly JSON</span>
</span></span><span class=line><span class=cl>    <span class=nx>jsonHandler</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Choose based on env</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>h</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Handler</span> <span class=p>=</span> <span class=nx>textHandler</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;ENV&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&#34;prod&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>h</span> <span class=p>=</span> <span class=nx>jsonHandler</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>h</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>SetDefault</span><span class=p>(</span><span class=nx>logger</span><span class=p>)</span> <span class=c1>// optional: use slog.Default()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;server starting&#34;</span><span class=p>,</span> <span class=s>&#34;addr&#34;</span><span class=p>,</span> <span class=s>&#34;:8080&#34;</span><span class=p>,</span> <span class=s>&#34;version&#34;</span><span class=p>,</span> <span class=s>&#34;1.0.0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Output examples:</strong></p><p>Development (text format):</p><pre tabindex=0><code>time=2025-09-01T10:30:15.123+07:00 level=INFO msg=&#34;server starting&#34; addr=:8080 version=1.0.0
</code></pre><p>Production (JSON format):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;time&#34;</span><span class=p>:</span><span class=s2>&#34;2025-09-01T10:30:15.123456+07:00&#34;</span><span class=p>,</span><span class=nt>&#34;level&#34;</span><span class=p>:</span><span class=s2>&#34;INFO&#34;</span><span class=p>,</span><span class=nt>&#34;msg&#34;</span><span class=p>:</span><span class=s2>&#34;server starting&#34;</span><span class=p>,</span><span class=nt>&#34;addr&#34;</span><span class=p>:</span><span class=s2>&#34;:8080&#34;</span><span class=p>,</span><span class=nt>&#34;version&#34;</span><span class=p>:</span><span class=s2>&#34;1.0.0&#34;</span><span class=p>}</span>
</span></span></code></pre></div><h3 id=understanding-slog-core-concepts>Understanding slog core concepts</h3><hr><p>Before diving deeper, let&rsquo;s understand slog&rsquo;s key building blocks:</p><ul><li><strong>Logger</strong>: The main logging interface</li><li><strong>Handler</strong>: Controls output format (JSON/Text) and destination</li><li><strong>Attributes</strong>: Key-value pairs that add context (<code>"user_id", 42</code>)</li><li><strong>Groups</strong>: Nested attributes under a common key</li></ul><h3 id=adding-context-with-attributes>Adding context with attributes</h3><p>Attributes are nameâ€“value pairs that add context to your logs. You can add them per-call or create scoped loggers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Method 1: Add attributes per call</span>
</span></span><span class=line><span class=cl><span class=nx>slog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;user action&#34;</span><span class=p>,</span> <span class=s>&#34;user_id&#34;</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=s>&#34;action&#34;</span><span class=p>,</span> <span class=s>&#34;login&#34;</span><span class=p>,</span> <span class=s>&#34;ip&#34;</span><span class=p>,</span> <span class=s>&#34;203.0.113.10&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Method 2: Create scoped logger with permanent attributes</span>
</span></span><span class=line><span class=cl><span class=nx>userLog</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>Default</span><span class=p>().</span><span class=nf>With</span><span class=p>(</span><span class=s>&#34;user_id&#34;</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=s>&#34;session&#34;</span><span class=p>,</span> <span class=s>&#34;abc123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>userLog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;logged in&#34;</span><span class=p>,</span> <span class=s>&#34;ip&#34;</span><span class=p>,</span> <span class=s>&#34;203.0.113.10&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>userLog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;viewed profile&#34;</span><span class=p>)</span>  <span class=c1>// user_id and session automatically included</span>
</span></span></code></pre></div><p><strong>Output:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;time&#34;</span><span class=p>:</span><span class=s2>&#34;2025-09-01T10:30:15+07:00&#34;</span><span class=p>,</span><span class=nt>&#34;level&#34;</span><span class=p>:</span><span class=s2>&#34;INFO&#34;</span><span class=p>,</span><span class=nt>&#34;msg&#34;</span><span class=p>:</span><span class=s2>&#34;logged in&#34;</span><span class=p>,</span><span class=nt>&#34;user_id&#34;</span><span class=p>:</span><span class=mi>42</span><span class=p>,</span><span class=nt>&#34;session&#34;</span><span class=p>:</span><span class=s2>&#34;abc123&#34;</span><span class=p>,</span><span class=nt>&#34;ip&#34;</span><span class=p>:</span><span class=s2>&#34;203.0.113.10&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;time&#34;</span><span class=p>:</span><span class=s2>&#34;2025-09-01T10:30:16+07:00&#34;</span><span class=p>,</span><span class=nt>&#34;level&#34;</span><span class=p>:</span><span class=s2>&#34;INFO&#34;</span><span class=p>,</span><span class=nt>&#34;msg&#34;</span><span class=p>:</span><span class=s2>&#34;viewed profile&#34;</span><span class=p>,</span><span class=nt>&#34;user_id&#34;</span><span class=p>:</span><span class=mi>42</span><span class=p>,</span><span class=nt>&#34;session&#34;</span><span class=p>:</span><span class=s2>&#34;abc123&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>###</span> <span class=err>Organizing</span> <span class=err>logs</span> <span class=err>with</span> <span class=err>groups</span>
</span></span><span class=line><span class=cl><span class=err>Use</span> <span class=err>`WithGroup`</span> <span class=err>to</span> <span class=err>nest</span> <span class=err>attributes</span> <span class=err>under</span> <span class=err>a</span> <span class=err>key.</span> <span class=err>This</span> <span class=err>keeps</span> <span class=err>related</span> <span class=err>fields</span> <span class=err>organized.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>```go</span>
</span></span><span class=line><span class=cl><span class=err>l</span> <span class=err>:=</span> <span class=err>slog.Default().WithGroup(</span><span class=s2>&#34;http&#34;</span><span class=err>).With(</span><span class=s2>&#34;method&#34;</span><span class=err>,</span> <span class=s2>&#34;GET&#34;</span><span class=err>,</span> <span class=s2>&#34;route&#34;</span><span class=err>,</span> <span class=s2>&#34;/users/:id&#34;</span><span class=err>)</span>
</span></span><span class=line><span class=cl><span class=err>l.Info(</span><span class=s2>&#34;request completed&#34;</span><span class=err>,</span> <span class=s2>&#34;status&#34;</span><span class=err>,</span> <span class=mi>200</span><span class=err>,</span> <span class=s2>&#34;latency_ms&#34;</span><span class=err>,</span> <span class=mi>34</span><span class=err>)</span>
</span></span><span class=line><span class=cl><span class=c1>// JSON example: {&#34;http&#34;:{&#34;method&#34;:&#34;GET&#34;,&#34;route&#34;:&#34;/users/:id&#34;},&#34;status&#34;:200,&#34;latency_ms&#34;:34}
</span></span></span></code></pre></div><h3 id=levels-and-filtering>Levels and filtering</h3><p><code>slog</code> supports <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>. Configure in <code>HandlerOptions</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>opts</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelDebug</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>handler</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>logger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>logger</span><span class=p>.</span><span class=nf>Debug</span><span class=p>(</span><span class=s>&#34;cache miss&#34;</span><span class=p>,</span> <span class=s>&#34;key&#34;</span><span class=p>,</span> <span class=s>&#34;user:42&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>Dynamic levels (e.g., from env var) are common. Ensure noisy debug logs stay off in production.</p><hr><h2 id=production-ready-patterns>Production-Ready Patterns</h2><p>Now that you understand the basics, let&rsquo;s explore production patterns including security, middleware, and performance.</p><h2 id=handler-configuration-for-production>Handler configuration for production</h2><p><code>HandlerOptions</code> includes useful knobs:</p><ul><li><code>AddSource</code>: attach source file/line (useful, slight overhead)</li><li><code>ReplaceAttr</code>: transform or redact attributes before emit</li></ul><h2 id=redact-sensitive-data>Redact sensitive data</h2><p>Never log secrets or PII. Use <code>ReplaceAttr</code> to sanitize by key.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>redacting</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>ReplaceAttr</span><span class=p>:</span> <span class=kd>func</span><span class=p>(</span><span class=nx>groups</span> <span class=p>[]</span><span class=kt>string</span><span class=p>,</span> <span class=nx>a</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span><span class=p>)</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redact common sensitive keys</span>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>a</span><span class=p>.</span><span class=nx>Key</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;password&#34;</span><span class=p>,</span> <span class=s>&#34;token&#34;</span><span class=p>,</span> <span class=s>&#34;authorization&#34;</span><span class=p>,</span> <span class=s>&#34;api_key&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>String</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>Key</span><span class=p>,</span> <span class=s>&#34;REDACTED&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>logger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>redacting</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;signup&#34;</span><span class=p>,</span> <span class=s>&#34;email&#34;</span><span class=p>,</span> <span class=s>&#34;user@example.com&#34;</span><span class=p>,</span> <span class=s>&#34;password&#34;</span><span class=p>,</span> <span class=s>&#34;secret&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=http-middleware-with-request-ids>HTTP middleware with request IDs</h2><p>For APIs, enrich logs with <code>request_id</code>, method, path, and latency. A minimal net/http middleware:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>middleware</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;math/rand&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ctxKey</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=nx>RequestIDKey</span> <span class=nx>ctxKey</span> <span class=p>=</span> <span class=s>&#34;request_id&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>RequestLogger</span><span class=p>(</span><span class=nx>next</span> <span class=nx>http</span><span class=p>.</span><span class=nx>Handler</span><span class=p>)</span> <span class=nx>http</span><span class=p>.</span><span class=nx>Handler</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>http</span><span class=p>.</span><span class=nf>HandlerFunc</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nx>rid</span> <span class=o>:=</span> <span class=nf>newRID</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>WithValue</span><span class=p>(</span><span class=nx>r</span><span class=p>.</span><span class=nf>Context</span><span class=p>(),</span> <span class=nx>RequestIDKey</span><span class=p>,</span> <span class=nx>rid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>l</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>Default</span><span class=p>().</span><span class=nf>With</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;request_id&#34;</span><span class=p>,</span> <span class=nx>rid</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;method&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>Method</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;path&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>URL</span><span class=p>.</span><span class=nx>Path</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>l</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;request started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>rw</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>statusRecorder</span><span class=p>{</span><span class=nx>ResponseWriter</span><span class=p>:</span> <span class=nx>w</span><span class=p>,</span> <span class=nx>status</span><span class=p>:</span> <span class=mi>200</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>next</span><span class=p>.</span><span class=nf>ServeHTTP</span><span class=p>(</span><span class=nx>rw</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nf>WithContext</span><span class=p>(</span><span class=nx>ctx</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=nx>l</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;request completed&#34;</span><span class=p>,</span> <span class=s>&#34;status&#34;</span><span class=p>,</span> <span class=nx>rw</span><span class=p>.</span><span class=nx>status</span><span class=p>,</span> <span class=s>&#34;latency_ms&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Since</span><span class=p>(</span><span class=nx>start</span><span class=p>).</span><span class=nf>Milliseconds</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>statusRecorder</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span>
</span></span><span class=line><span class=cl>    <span class=nx>status</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>statusRecorder</span><span class=p>)</span> <span class=nf>WriteHeader</span><span class=p>(</span><span class=nx>code</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>w</span><span class=p>.</span><span class=nx>status</span> <span class=p>=</span> <span class=nx>code</span>
</span></span><span class=line><span class=cl>    <span class=nx>w</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>.</span><span class=nf>WriteHeader</span><span class=p>(</span><span class=nx>code</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newRID</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=nx>letters</span> <span class=p>=</span> <span class=s>&#34;abcdefghijklmnopqrstuvwxyz0123456789&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>b</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>b</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=nx>letters</span><span class=p>[</span><span class=nx>rand</span><span class=p>.</span><span class=nf>Intn</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>letters</span><span class=p>))]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Hook this into your server router. If youâ€™re building your own HTTP server, our stepâ€‘byâ€‘step REST tutorial may help: <a href=/2025/05/how-to-build-rest-api-in-go-using-net-http.html>How to Build a REST API in Go using net/http
</a>.</p><h2 id=library-apis-pass-loggers-or-context>Library APIs: pass loggers or context?</h2><p>Two common approaches:</p><ol><li>Pass a <code>*slog.Logger</code> to constructors and keep it on the type.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Store</span> <span class=kd>struct</span> <span class=p>{</span> <span class=nx>log</span> <span class=o>*</span><span class=nx>slog</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewStore</span><span class=p>(</span><span class=nx>log</span> <span class=o>*</span><span class=nx>slog</span><span class=p>.</span><span class=nx>Logger</span><span class=p>)</span> <span class=o>*</span><span class=nx>Store</span> <span class=p>{</span> <span class=k>return</span> <span class=o>&amp;</span><span class=nx>Store</span><span class=p>{</span><span class=nx>log</span><span class=p>:</span> <span class=nx>log</span><span class=p>}</span> <span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>Derive a logger from <code>context.Context</code> at call sites (attach fields per request). You can wrap this yourself by keeping a logger in context and retrieving it in functions. Choose one convention and stick to it to keep call sites clean.</li></ol><p>For clean separation of layers and testability, see our guide: <a href=/2025/05/structuring-go-projects-clean-architecture.html>Structuring Go Projects: Clean Project Structure and Best Practices
</a>.</p><h2 id=emitting-errors-with-details>Emitting errors with details</h2><p>Log actionable error information: message, error type, and a few highâ€‘signal attributes (IDs, sizes, counts). Avoid dumping full payloads.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>svc</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>job</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;process job failed&#34;</span><span class=p>,</span> <span class=s>&#34;job_id&#34;</span><span class=p>,</span> <span class=nx>job</span><span class=p>.</span><span class=nx>ID</span><span class=p>,</span> <span class=s>&#34;err&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=working-with-json-payloads>Working with JSON payloads</h2><p>Keep payload logging minimal and scrubbed. For structured data handling basics in Go, revisit: <a href=/2025/04/working-with-json-in-go-encode-decode.html>Working with JSON in Go: Encode, Decode, and Tag Structs
</a>.</p><h2 id=environment-presets>Environment presets</h2><p>Create a small helper that picks sensible defaults based on <code>ENV</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>logx</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>New</span><span class=p>()</span> <span class=o>*</span><span class=nx>slog</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>env</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;ENV&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>opts</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>h</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Handler</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>env</span> <span class=o>==</span> <span class=s>&#34;prod&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>h</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>opts</span><span class=p>.</span><span class=nx>AddSource</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=nx>h</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewTextHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>h</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=rotation-and-shipping>Rotation and shipping</h2><p><code>slog</code> doesnâ€™t rotate filesâ€”it writes to an <code>io.Writer</code>. In containers, write to stdout/stderr and let the platform collect (Docker, systemd, Kubernetes). If you must write files, use external rotation (logrotate) or a service.</p><h2 id=observability-integrations>Observability integrations</h2><p>Structured logs complement metrics and traces. If youâ€™re adding tracing next, consider OpenTelemetry for Go; link request IDs between logs and traces for faster incident response.</p><h2 id=testing-logs>Testing logs</h2><p>You can capture output with a buffer for assertions. For broader testing patterns, see: <a href=/2025/04/testing-in-go-writing-unit-tests-with.html>Testing in Go: Writing Unit Tests with the Testing Package
</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>mypkg</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bytes&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;testing&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestLogs</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>buf</span> <span class=nx>bytes</span><span class=p>.</span><span class=nx>Buffer</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>buf</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelDebug</span><span class=p>}))</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;hello&#34;</span><span class=p>,</span> <span class=s>&#34;key&#34;</span><span class=p>,</span> <span class=s>&#34;value&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>out</span> <span class=o>:=</span> <span class=nx>buf</span><span class=p>.</span><span class=nf>String</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>want</span> <span class=o>:=</span> <span class=s>&#34;\&#34;hello\&#34;&#34;</span><span class=p>;</span> <span class=p>!</span><span class=nx>bytes</span><span class=p>.</span><span class=nf>Contains</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>out</span><span class=p>),</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>want</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>t</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;missing message: %s&#34;</span><span class=p>,</span> <span class=nx>out</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=performance-benchmarking>Performance benchmarking</h2><p><code>slog</code> is designed to be fast with minimal allocations. Here&rsquo;s how it compares to popular logging libraries.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>logging_test</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;io&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;testing&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.uber.org/zap&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/sirupsen/logrus&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>BenchmarkSlog</span><span class=p>(</span><span class=nx>b</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>B</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>io</span><span class=p>.</span><span class=nx>Discard</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>}))</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>ResetTimer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>RunParallel</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>pb</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>PB</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>pb</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;benchmark message&#34;</span><span class=p>,</span> <span class=s>&#34;user_id&#34;</span><span class=p>,</span> <span class=mi>12345</span><span class=p>,</span> <span class=s>&#34;action&#34;</span><span class=p>,</span> <span class=s>&#34;login&#34;</span><span class=p>,</span> <span class=s>&#34;ip&#34;</span><span class=p>,</span> <span class=s>&#34;192.168.1.1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>BenchmarkZap</span><span class=p>(</span><span class=nx>b</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>B</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>zap</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>zap</span><span class=p>.</span><span class=nf>NewCore</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>zap</span><span class=p>.</span><span class=nf>NewJSONEncoder</span><span class=p>(</span><span class=nx>zap</span><span class=p>.</span><span class=nf>NewProductionEncoderConfig</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=nx>zap</span><span class=p>.</span><span class=nf>AddSync</span><span class=p>(</span><span class=nx>io</span><span class=p>.</span><span class=nx>Discard</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>zap</span><span class=p>.</span><span class=nx>InfoLevel</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>ResetTimer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>RunParallel</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>pb</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>PB</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>pb</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;benchmark message&#34;</span><span class=p>,</span> <span class=nx>zap</span><span class=p>.</span><span class=nf>Int</span><span class=p>(</span><span class=s>&#34;user_id&#34;</span><span class=p>,</span> <span class=mi>12345</span><span class=p>),</span> <span class=nx>zap</span><span class=p>.</span><span class=nf>String</span><span class=p>(</span><span class=s>&#34;action&#34;</span><span class=p>,</span> <span class=s>&#34;login&#34;</span><span class=p>),</span> <span class=nx>zap</span><span class=p>.</span><span class=nf>String</span><span class=p>(</span><span class=s>&#34;ip&#34;</span><span class=p>,</span> <span class=s>&#34;192.168.1.1&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>BenchmarkLogrus</span><span class=p>(</span><span class=nx>b</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>B</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>logrus</span><span class=p>.</span><span class=nf>New</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetOutput</span><span class=p>(</span><span class=nx>io</span><span class=p>.</span><span class=nx>Discard</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetFormatter</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>logrus</span><span class=p>.</span><span class=nx>JSONFormatter</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>ResetTimer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>.</span><span class=nf>RunParallel</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>pb</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>PB</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>pb</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>logger</span><span class=p>.</span><span class=nf>WithFields</span><span class=p>(</span><span class=nx>logrus</span><span class=p>.</span><span class=nx>Fields</span><span class=p>{</span><span class=s>&#34;user_id&#34;</span><span class=p>:</span> <span class=mi>12345</span><span class=p>,</span> <span class=s>&#34;action&#34;</span><span class=p>:</span> <span class=s>&#34;login&#34;</span><span class=p>,</span> <span class=s>&#34;ip&#34;</span><span class=p>:</span> <span class=s>&#34;192.168.1.1&#34;</span><span class=p>}).</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;benchmark message&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Typical results</strong> (your mileage may vary):</p><pre tabindex=0><code>BenchmarkSlog-8     2000000    650 ns/op    48 B/op    1 allocs/op
BenchmarkZap-8      3000000    420 ns/op    32 B/op    1 allocs/op  
BenchmarkLogrus-8    500000   3200 ns/op   280 B/op   10 allocs/op
</code></pre><p><code>slog</code> offers excellent performance while maintaining simplicity. Zap is still fastest for high-throughput scenarios, but <code>slog</code>&rsquo;s standard library status and ease of use make it ideal for most applications.</p><hr><h2 id=advanced-observability-integration>Advanced: Observability Integration</h2><p>The following sections cover enterprise-grade logging patterns. If you&rsquo;re just getting started, you can skip to the &ldquo;Migration notes&rdquo; section and return here when you need production observability.</p><h2 id=elk-stack-and-grafana-integration>ELK Stack and Grafana integration</h2><p>Production logging shines when paired with log aggregation. Here&rsquo;s how to set up <code>slog</code> with popular observability stacks.</p><h3 id=elasticsearch--logstash--kibana-elk>Elasticsearch + Logstash + Kibana (ELK)</h3><p><strong>Docker Compose setup</strong> (<code>docker-compose.yml</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>elasticsearch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.elastic.co/elasticsearch/elasticsearch:8.11.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>discovery.type=single-node</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>xpack.security.enabled=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;9200:9200&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logstash</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.elastic.co/logstash/logstash:8.11.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./logstash.conf:/usr/share/logstash/pipeline/logstash.conf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;5044:5044&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kibana</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.elastic.co/kibana/kibana:8.11.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ELASTICSEARCH_HOSTS=http://elasticsearch:9200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;5601:5601&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ENV=prod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>LOG_OUTPUT=json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>logstash</span><span class=w>
</span></span></span></code></pre></div><p><strong>Logstash configuration</strong> (<code>logstash.conf</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>input</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>beats</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>port</span> <span class=o>=&gt;</span> <span class=mi>5044</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1># Or direct TCP input for simple setups</span>
</span></span><span class=line><span class=cl>  <span class=n>tcp</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>port</span> <span class=o>=&gt;</span> <span class=mi>5000</span>
</span></span><span class=line><span class=cl>    <span class=n>codec</span> <span class=o>=&gt;</span> <span class=n>json_lines</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span><span class=n>fields</span><span class=o>][</span><span class=n>service</span><span class=o>]</span> <span class=o>==</span> <span class=s2>&#34;go-api&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># Parse slog JSON output</span>
</span></span><span class=line><span class=cl>    <span class=n>json</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>source</span> <span class=o>=&gt;</span> <span class=s2>&#34;message&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Convert slog timestamp</span>
</span></span><span class=line><span class=cl>    <span class=n>date</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>match</span> <span class=o>=&gt;</span> <span class=o>[</span> <span class=s2>&#34;time&#34;</span><span class=p>,</span> <span class=s2>&#34;ISO8601&#34;</span> <span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Extract request_id for correlation</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span><span class=n>request_id</span><span class=o>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>mutate</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>add_tag</span> <span class=o>=&gt;</span> <span class=o>[</span> <span class=s2>&#34;has_request_id&#34;</span> <span class=o>]</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Create structured fields</span>
</span></span><span class=line><span class=cl>    <span class=n>mutate</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>add_field</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=s2>&#34;service&#34;</span> <span class=o>=&gt;</span> <span class=s2>&#34;go-api&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=n>add_field</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=s2>&#34;log_level&#34;</span> <span class=o>=&gt;</span> <span class=s2>&#34;%{level}&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>output</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>elasticsearch</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>hosts</span> <span class=o>=&gt;</span> <span class=o>[</span><span class=s2>&#34;elasticsearch:9200&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=n>index</span> <span class=o>=&gt;</span> <span class=s2>&#34;go-logs-%{+YYYY.MM.dd}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Go application with structured logging</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;net&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Configure slog for ELK</span>
</span></span><span class=line><span class=cl>    <span class=nx>opts</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ReplaceAttr</span><span class=p>:</span> <span class=kd>func</span><span class=p>(</span><span class=nx>groups</span> <span class=p>[]</span><span class=kt>string</span><span class=p>,</span> <span class=nx>a</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span><span class=p>)</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Ensure timestamp is in ISO8601 format for Logstash</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>a</span><span class=p>.</span><span class=nx>Key</span> <span class=o>==</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>TimeKey</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>String</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nx>TimeKey</span><span class=p>,</span> <span class=nx>a</span><span class=p>.</span><span class=nx>Value</span><span class=p>.</span><span class=nf>Time</span><span class=p>().</span><span class=nf>Format</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>RFC3339</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>handler</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Handler</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;LOG_OUTPUT&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&#34;logstash&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Send directly to Logstash TCP input</span>
</span></span><span class=line><span class=cl>        <span class=nx>conn</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>net</span><span class=p>.</span><span class=nf>Dial</span><span class=p>(</span><span class=s>&#34;tcp&#34;</span><span class=p>,</span> <span class=s>&#34;logstash:5000&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nb>panic</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>handler</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>conn</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>handler</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>SetDefault</span><span class=p>(</span><span class=nx>logger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Add service metadata</span>
</span></span><span class=line><span class=cl>    <span class=nx>baseLogger</span> <span class=o>:=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>Default</span><span class=p>().</span><span class=nf>With</span><span class=p>(</span><span class=s>&#34;service&#34;</span><span class=p>,</span> <span class=s>&#34;go-api&#34;</span><span class=p>,</span> <span class=s>&#34;version&#34;</span><span class=p>,</span> <span class=s>&#34;1.0.0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>baseLogger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;application started&#34;</span><span class=p>,</span> <span class=s>&#34;port&#34;</span><span class=p>,</span> <span class=mi>8080</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Example business logic logging</span>
</span></span><span class=line><span class=cl>    <span class=nx>requestLogger</span> <span class=o>:=</span> <span class=nx>baseLogger</span><span class=p>.</span><span class=nf>With</span><span class=p>(</span><span class=s>&#34;request_id&#34;</span><span class=p>,</span> <span class=s>&#34;req-123&#34;</span><span class=p>,</span> <span class=s>&#34;user_id&#34;</span><span class=p>,</span> <span class=mi>456</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>requestLogger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;processing order&#34;</span><span class=p>,</span> <span class=s>&#34;order_id&#34;</span><span class=p>,</span> <span class=s>&#34;ord-789&#34;</span><span class=p>,</span> <span class=s>&#34;amount&#34;</span><span class=p>,</span> <span class=mf>99.99</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>requestLogger</span><span class=p>.</span><span class=nf>Warn</span><span class=p>(</span><span class=s>&#34;inventory low&#34;</span><span class=p>,</span> <span class=s>&#34;product_id&#34;</span><span class=p>,</span> <span class=s>&#34;prod-123&#34;</span><span class=p>,</span> <span class=s>&#34;remaining&#34;</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=grafana--loki-setup>Grafana + Loki setup</h3><p><strong>Docker Compose for Grafana stack</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>loki</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>grafana/loki:2.9.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3100:3100&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span>-<span class=l>config.file=/etc/loki/local-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>promtail</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>grafana/promtail:2.9.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/var/log:/var/log:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./promtail-config.yml:/etc/promtail/config.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span>-<span class=l>config.file=/etc/promtail/config.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>grafana</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>grafana/grafana:10.2.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3000:3000&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GF_SECURITY_ADMIN_PASSWORD=admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>grafana-storage:/var/lib/grafana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>grafana-storage</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></div><p><strong>Promtail configuration</strong> (<code>promtail-config.yml</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>server</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http_listen_port</span><span class=p>:</span><span class=w> </span><span class=m>9080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>grpc_listen_port</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>positions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>filename</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/positions.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>clients</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://loki:3100/loki/api/v1/push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>go-app-logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>job</span><span class=p>:</span><span class=w> </span><span class=l>go-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>__path__</span><span class=p>:</span><span class=w> </span><span class=l>/var/log/go-app/*.log</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pipeline_stages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>json</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>expressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>time</span><span class=p>:</span><span class=w> </span><span class=l>time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>msg</span><span class=p>:</span><span class=w> </span><span class=l>msg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>request_id</span><span class=p>:</span><span class=w> </span><span class=l>request_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>user_id</span><span class=p>:</span><span class=w> </span><span class=l>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>level</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>request_id</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>timestamp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class=l>time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>format</span><span class=p>:</span><span class=w> </span><span class=l>RFC3339</span><span class=w>
</span></span></span></code></pre></div><p><strong>Go app configured for Loki</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setupLogger</span><span class=p>()</span> <span class=o>*</span><span class=nx>slog</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>opts</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ReplaceAttr</span><span class=p>:</span> <span class=kd>func</span><span class=p>(</span><span class=nx>groups</span> <span class=p>[]</span><span class=kt>string</span><span class=p>,</span> <span class=nx>a</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span><span class=p>)</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Attr</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Add environment and service labels</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Write to file for Promtail to collect</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>logFile</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;LOG_FILE&#34;</span><span class=p>);</span> <span class=nx>logFile</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>OpenFile</span><span class=p>(</span><span class=nx>logFile</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>O_CREATE</span><span class=p>|</span><span class=nx>os</span><span class=p>.</span><span class=nx>O_WRONLY</span><span class=p>|</span><span class=nx>os</span><span class=p>.</span><span class=nx>O_APPEND</span><span class=p>,</span> <span class=mo>0644</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>file</span><span class=p>,</span> <span class=nx>opts</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nf>setupLogger</span><span class=p>().</span><span class=nf>With</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;service&#34;</span><span class=p>,</span> <span class=s>&#34;go-api&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;version&#34;</span><span class=p>,</span> <span class=s>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;environment&#34;</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;ENV&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>SetDefault</span><span class=p>(</span><span class=nx>logger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;service started&#34;</span><span class=p>,</span> <span class=s>&#34;config&#34;</span><span class=p>,</span> <span class=s>&#34;loaded&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Example with trace correlation</span>
</span></span><span class=line><span class=cl>    <span class=nx>traceLogger</span> <span class=o>:=</span> <span class=nx>logger</span><span class=p>.</span><span class=nf>With</span><span class=p>(</span><span class=s>&#34;trace_id&#34;</span><span class=p>,</span> <span class=s>&#34;trace-abc123&#34;</span><span class=p>,</span> <span class=s>&#34;span_id&#34;</span><span class=p>,</span> <span class=s>&#34;span-456&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>traceLogger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;database query&#34;</span><span class=p>,</span> <span class=s>&#34;table&#34;</span><span class=p>,</span> <span class=s>&#34;users&#34;</span><span class=p>,</span> <span class=s>&#34;duration_ms&#34;</span><span class=p>,</span> <span class=mi>45</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>traceLogger</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;connection failed&#34;</span><span class=p>,</span> <span class=s>&#34;error&#34;</span><span class=p>,</span> <span class=s>&#34;timeout&#34;</span><span class=p>,</span> <span class=s>&#34;retry_count&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=grafana-dashboard-queries>Grafana Dashboard queries</h3><p><strong>LogQL queries for common patterns</strong>:</p><pre tabindex=0><code class=language-logql data-lang=logql># All errors in the last hour
{service=&#34;go-api&#34;} |= &#34;ERROR&#34; | json

# Request latency by endpoint  
{service=&#34;go-api&#34;} | json | __error__ = &#34;&#34; | unwrap duration_ms | rate(5m)

# Error rate by request_id
rate(({service=&#34;go-api&#34;} |= &#34;ERROR&#34; | json)[5m])

# Top users by request volume
topk(10, count by (user_id) (rate({service=&#34;go-api&#34;} | json | __error__ = &#34;&#34; [5m])))
</code></pre><p><strong>Key benefits of structured logging with observability</strong>:</p><ul><li><strong>Correlation</strong>: Link logs, metrics, and traces with <code>request_id</code></li><li><strong>Alerting</strong>: Set up alerts on error rates or specific patterns</li><li><strong>Debugging</strong>: Filter by user, endpoint, or time range instantly</li><li><strong>Analytics</strong>: Aggregate business metrics from log data</li></ul><p>Production tip: Always include consistent field names (<code>request_id</code>, <code>user_id</code>, <code>trace_id</code>) across your microservices for easier correlation in your observability stack.</p><h2 id=migration-notes-zaplogrus--slog>Migration notes (zap/logrus â†’ slog)</h2><ul><li>Message + fields map directly to <code>slog.Info("msg", "key", val, ...)</code>.</li><li>Replace global usage with dependency injection or a single <code>slog.SetDefault</code> during bootstrap.</li><li>If you relied on sampling or custom encoders, keep using your old logger behind an adapter until equivalent features are available or needed.</li></ul><h2 id=common-pitfalls-and-tips>Common pitfalls and tips</h2><ul><li>Be consistent with key names (<code>request_id</code>, not <code>requestId</code>).</li><li>Avoid logging entire structs or raw bodies in production.</li><li>Use <code>WithGroup</code> for domains like <code>http</code>, <code>db</code>, <code>queue</code>.</li><li>Keep error logs actionable; include IDs, not entire payloads.</li><li>Prefer stdout in containers; let your platform ship logs.</li></ul><h2 id=putting-it-together-mini-example>Putting it together (mini example)</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log/slog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>env</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;ENV&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>opts</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>slog</span><span class=p>.</span><span class=nx>HandlerOptions</span><span class=p>{</span><span class=nx>Level</span><span class=p>:</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>LevelInfo</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>env</span> <span class=o>!=</span> <span class=s>&#34;prod&#34;</span> <span class=p>{</span> <span class=nx>opts</span><span class=p>.</span><span class=nx>AddSource</span> <span class=p>=</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>h</span> <span class=nx>slog</span><span class=p>.</span><span class=nx>Handler</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>env</span> <span class=o>==</span> <span class=s>&#34;prod&#34;</span> <span class=p>{</span> <span class=nx>h</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewJSONHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span> <span class=p>}</span> <span class=k>else</span> <span class=p>{</span> <span class=nx>h</span> <span class=p>=</span> <span class=nx>slog</span><span class=p>.</span><span class=nf>NewTextHandler</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>SetDefault</span><span class=p>(</span><span class=nx>slog</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>h</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>mux</span> <span class=o>:=</span> <span class=nx>http</span><span class=p>.</span><span class=nf>NewServeMux</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>mux</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;/healthz&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>slog</span><span class=p>.</span><span class=nf>Default</span><span class=p>().</span><span class=nf>WithGroup</span><span class=p>(</span><span class=s>&#34;http&#34;</span><span class=p>).</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;health check&#34;</span><span class=p>,</span> <span class=s>&#34;status&#34;</span><span class=p>,</span> <span class=s>&#34;ok&#34;</span><span class=p>,</span> <span class=s>&#34;time&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Format</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>RFC3339</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=nx>w</span><span class=p>.</span><span class=nf>WriteHeader</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusOK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>_</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>w</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=s>&#34;ok&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>addr</span> <span class=o>:=</span> <span class=s>&#34;:8080&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>slog</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;server listening&#34;</span><span class=p>,</span> <span class=s>&#34;addr&#34;</span><span class=p>,</span> <span class=nx>addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span> <span class=p>=</span> <span class=nx>http</span><span class=p>.</span><span class=nf>ListenAndServe</span><span class=p>(</span><span class=nx>addr</span><span class=p>,</span> <span class=nx>mux</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=where-to-go-next>Where to go next</h2><ul><li>Build a small REST API and add the middleware above: <a href=/2025/05/how-to-build-rest-api-in-go-using-net-http.html>How to Build a REST API in Go using net/http</a></li><li>Learn how to pass cancellation and deadlines with <code>context</code>: <a href=/2025/04/using-context-in-go-cancellation.html>Using Context in Go: Cancellation, Timeout, and Deadlines Explained</a></li><li>Organize your project for growth: <a href=/2025/05/structuring-go-projects-clean-architecture.html>Structuring Go Projects: Clean Project Structure and Best Practices</a></li><li>Review JSON handling patterns in Go: <a href=/2025/04/working-with-json-in-go-encode-decode.html>Working with JSON in Go: Encode, Decode, and Tag Structs</a></li><li>Add automated tests, including log checks: <a href=/2025/04/testing-in-go-writing-unit-tests-with.html>Testing in Go: Writing Unit Tests with the Testing Package</a></li></ul><p>With <code>slog</code>, you get a batteriesâ€‘included, standard way to emit clean, consistent logs. Start with text locally, JSON in production, add just enough context, and keep sensitive data out. Your future selfâ€”and your onâ€‘call teammatesâ€”will thank you.</p></p><div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded"><h2 class="text-lg font-semibold mb-2">ðŸ“Œ Read Also</h2><ul class="list-disc list-outside ml-5"><li><a href=/2025/05/connecting-postgresql-in-go-using-sqlx.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Connecting to PostgreSQL in Go using sqlx</a></li><li><a href=/2025/05/structuring-go-projects-clean-architecture.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Structuring Go Projects: Clean Project Structure and Best Practices</a></li><li><a href=/2025/05/how-to-build-rest-api-in-go-using-net-http.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Build a REST API in Go using net/http</a></li></ul></div><div class="hidden lg:block"><div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><div class="block lg:hidden my-8 px-2 mb-10"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:50px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="lg:hidden mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><div class="grid gap-3"><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025)</h4><p class="text-xs text-gray-500 dark:text-gray-400">01 Sep 2025</p></a><a href=/2025/08/10-best-ai-coding-assistants-every-developer-should-try-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">10 Best AI Coding Assistants Every Developer Should Try in 2025</h4><p class="text-xs text-gray-500 dark:text-gray-400">31 Aug 2025</p></a><a href=/2025/08/essential-linux-commands-every-developer-must-know-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Essential Linux Commands Every Developer Must Know in 2025</h4><p class="text-xs text-gray-500 dark:text-gray-400">31 Aug 2025</p></a><a href=/2025/08/grpc-in-go-complete-guide-basics-production.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">gRPC in Go: Complete Guide from Basics to Production Ready Services</h4><p class="text-xs text-gray-500 dark:text-gray-400">28 Aug 2025</p></a><a href=/2025/08/10-essential-vscode-extensions-developers-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">10 Essential VS Code Extensions Every Developer Must Have in 2025</h4><p class="text-xs text-gray-500 dark:text-gray-400">26 Aug 2025</p></a></div></div></article><aside class="space-y-10 hidden lg:block"><div><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><ul class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"><li><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html class="hover:text-[#0f7ea9] transition">The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025)</a></li><li><a href=/2025/08/10-best-ai-coding-assistants-every-developer-should-try-2025.html class="hover:text-[#0f7ea9] transition">10 Best AI Coding Assistants Every Developer Should Try in 2025</a></li><li><a href=/2025/08/essential-linux-commands-every-developer-must-know-2025.html class="hover:text-[#0f7ea9] transition">Essential Linux Commands Every Developer Must Know in 2025</a></li><li><a href=/2025/08/grpc-in-go-complete-guide-basics-production.html class="hover:text-[#0f7ea9] transition">gRPC in Go: Complete Guide from Basics to Production Ready Services</a></li><li><a href=/2025/08/10-essential-vscode-extensions-developers-2025.html class="hover:text-[#0f7ea9] transition">10 Essential VS Code Extensions Every Developer Must Have in 2025</a></li></ul></div><div class=mt-8><div class="hidden lg:block"><div id=stickySidebarAd class="sticky top-8 transition-all duration-300"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="mx-auto w-[300px] min-h-[250px] overflow-hidden sticky-ad-container"><button id=closeStickyAd class="absolute top-2 right-2 w-6 h-6 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-600 text-xs transition-colors z-10 hidden">
Ã—
</button>
<ins class="adsbygoogle sticky-ad-unit" style=display:block;background-color:inherit;min-height:250px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><style>.sticky-ad-container{position:relative}.sticky-ad-container:hover #closeStickyAd{display:block}#stickySidebarAd{will-change:transform}@media(min-width:1024px){#stickySidebarAd{max-height:calc(100vh - 120px)}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("stickySidebarAd"),t=document.getElementById("closeStickyAd");if(t&&t.addEventListener("click",function(){e&&(e.style.display="none",localStorage.setItem("stickySidebarHidden","true"))}),localStorage.getItem("stickySidebarHidden")==="true"&&e&&(e.style.display="none"),e&&window.IntersectionObserver){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});t.observe(e)}})</script></div></aside></div><section id=comments class=mt-12><script src=https://giscus.app/client.js data-repo=wikukarno/buanacoding data-repo-id=R_kgD0Oj4jAw data-category=General data-category-id=DIC_kwD0Oj4jA84Cr_fx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></main><div class=py-6><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300"><div class="text-center space-x-4 text-sm font-medium"><a href=/about class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
<span>-</span>
<a href=/contact class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
<span>-</span>
<a href=/privacy-policy class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
<span>-</span>
<a href=/disclaimer class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a></div></div><footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">&copy; 2025 buanacoding.com</footer><button id=scrollToTop class="fixed bottom-6 right-6 lg:bottom-6 lg:right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300 z-50" aria-label="Scroll to top">
<svg fill="none" class="w-4 h-4" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg></button><style>body.floating-ad-active #scrollToTop{bottom:100px !important}@media(min-width:1024px){body.floating-ad-active #scrollToTop{bottom:1.5rem !important}}</style><div id=floatingMobileAd class="lg:hidden fixed bottom-0 left-0 right-0 z-40 transform transition-transform duration-300 translate-y-0"><div class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-lg"><div class="flex items-center justify-between px-2 py-1 max-w-sm mx-auto"><button id=closeFloatingMobile class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors flex-shrink-0">
<span class="text-lg leading-none">Ã—</span></button><div class="flex-1 mx-2 min-h-[50px] flex items-center justify-center"><ins class="adsbygoogle floating-mobile-ad" style=display:block;background-color:inherit;width:100%;max-width:320px;height:50px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=false></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="w-8 flex-shrink-0"></div></div><div class="text-center pb-1"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide">Ad</span></div></div></div><style>#floatingMobileAd{z-index:40;transition:transform .3s ease-in-out,opacity .3s ease-in-out}#floatingMobileAd.hidden-mobile-ad{transform:translateY(100%);opacity:0}body.floating-ad-active{padding-bottom:70px}.floating-mobile-ad{pointer-events:auto}@media(min-width:1024px){#floatingMobileAd{display:none !important}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("floatingMobileAd"),s=document.getElementById("closeFloatingMobile"),t=document.body;e&&window.innerWidth<1024&&t.classList.add("floating-ad-active"),s&&s.addEventListener("click",function(){e&&(e.classList.add("hidden-mobile-ad"),t.classList.remove("floating-ad-active"),localStorage.setItem("floatingMobileHidden","true"),setTimeout(()=>{e.style.display="none"},300))}),localStorage.getItem("floatingMobileHidden")==="true"&&e&&(e.style.display="none",t.classList.remove("floating-ad-active"));let n=0,o;e&&localStorage.getItem("floatingMobileHidden")!=="true"&&window.addEventListener("scroll",function(){clearTimeout(o),o=setTimeout(()=>{const t=window.pageYOffset||document.documentElement.scrollTop;t>n&&t>100?e.style.transform="translateY(100%)":t<n&&(e.style.transform="translateY(0)"),n=t<=0?0:t},50)}),window.addEventListener("resize",function(){window.innerWidth>=1024?t.classList.remove("floating-ad-active"):e&&localStorage.getItem("floatingMobileHidden")!=="true"&&t.classList.add("floating-ad-active")})})</script><div id=google_translate_element style=display:none></div><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.4.6></script><script>feather.replace();const btn=document.getElementById("scrollToTop"),html=document.documentElement,toggleBtn=document.getElementById("theme-toggle"),toggleBtnMobile=document.getElementById("theme-toggle-mobile"),iconSun=document.getElementById("icon-sun"),iconMoon=document.getElementById("icon-moon"),iconSunMobile=document.getElementById("icon-sun-mobile"),iconMoonMobile=document.getElementById("icon-moon-mobile");document.getElementById("menu-toggle")?.addEventListener("click",()=>{document.getElementById("mobile-menu")?.classList.toggle("hidden")}),btn.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>300?btn.style.display="flex":btn.style.display="none"}),btn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});function updateIcons(e){iconSun.classList.toggle("hidden",!e),iconMoon.classList.toggle("hidden",e),iconSunMobile.classList.toggle("hidden",!e),iconMoonMobile.classList.toggle("hidden",e)}function setDarkMode(e){html.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light"),updateIcons(e)}const userPref=localStorage.getItem("theme"),systemPref=window.matchMedia("(prefers-color-scheme: dark)").matches,isDark=userPref==="dark"||!userPref&&systemPref;setDarkMode(isDark),toggleBtn?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),toggleBtnMobile?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),document.querySelectorAll("pre").forEach(e=>{const t=document.createElement("button");t.innerHTML=`
      <span>Copy</span>
    `,t.className=`
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();const n=document.createElement("div");n.className="relative",e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),t.addEventListener("click",()=>{const n=e.innerText;navigator.clipboard.writeText(n).then(()=>{t.querySelector("span").innerText="Copied!",setTimeout(()=>{t.querySelector("span").innerText="Copy"},2e3)})})});const openBtn=document.getElementById("openSearchModal"),closeBtn=document.getElementById("closeSearchModal"),modal=document.getElementById("searchModal");openBtn.addEventListener("click",()=>{console.log("Search modal opened"),modal.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtn.addEventListener("click",()=>{modal.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modal.classList.add("hidden")}),fetch("/index.json").then(e=>e.json()).then(e=>{const n=new Fuse(e,{keys:["title","content"],threshold:.3}),s=document.getElementById("searchBox"),t=document.getElementById("results");s.addEventListener("input",function(e){const o=e.target.value.trim(),s=document.getElementById("searchAdBanner");if(o.length<2){t.innerHTML="",s&&(s.classList.remove("show"),s.classList.add("hide"),setTimeout(()=>s.style.display="none",300));return}s&&(s.style.display="block",s.classList.remove("hide"),s.classList.add("show"));const i=n.search(o);if(i.length===0)t.innerHTML=`
            <li class='px-4 py-3 text-center text-gray-500 dark:text-gray-400'>
              <div class="mb-2">ðŸ“„ No results found for "${o}"</div>
              <div class="text-xs">Try different keywords or browse categories below</div>
            </li>
          `;else{let e="";i.forEach((t,n)=>{e+=`
              <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                <a href="${t.item.href}" class="block font-semibold text-gray-900 dark:text-white no-underline">${t.item.title}</a>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.item.content.substring(0,100)}...</p>
              </li>
            `,(n+1)%3===0&&n<i.length-1&&(e+=`
                <li class="px-4 py-2 bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                  <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">ðŸ“š More related articles</div>
                </li>
              `)}),t.innerHTML=e}})});const openBtnMobile=document.getElementById("openSearchModalMobile"),closeBtnMobile=document.getElementById("closeSearchModal"),modalMobile=document.getElementById("searchModal");openBtnMobile.addEventListener("click",()=>{console.log("Search modal opened (mobile)"),modalMobile.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtnMobile.addEventListener("click",()=>{modalMobile.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modalMobile.classList.add("hidden")}),function(){function t(e,t){if(window.google&&window.google.translate&&window.google.translate.TranslateElement){e&&e();return}if(window.__gtReadyCallbacks=window.__gtReadyCallbacks||[],e&&window.__gtReadyCallbacks.push(e),window.__gtLoading)return;window.__gtLoading=!0,window.initGoogleTranslate=function(){try{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"id",autoDisplay:!1},"google_translate_element")}catch{}(window.__gtReadyCallbacks||[]).forEach(function(e){try{e()}catch{}}),window.__gtReadyCallbacks=[]};var s,n=document.createElement("script");n.src="https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate",n.defer=!0,s=!1,n.onerror=function(){s=!0,t&&t()},setTimeout(function(){(!window.google||!window.google.translate)&&(s=!0,t&&t())},4e3),document.head.appendChild(n)}function n(e,t){document.cookie=e+"="+t+"; path=/; expires="+new Date(Date.now()+365*24*3600*1e3).toUTCString()}function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}function s(){if(document.getElementById("translate-fallback"))return;var e=document.createElement("div");e.id="translate-fallback",e.style.cssText="position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;",e.innerHTML='<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span><button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button><button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>',document.body.appendChild(e),document.getElementById("btnCloseTf").onclick=function(){e.remove()},document.getElementById("btnTryId").onclick=function(){var t=new URL(location.href),e=location.pathname;e.startsWith("/id/")||(t.pathname="/id"+(e.startsWith("/")?e:"/"+e)),fetch(t,{method:"HEAD"}).then(function(e){e.ok?location.href=t:location.href="/id/"}).catch(function(){location.href="/id/"})}}function o(e){t(function(){var t=document.querySelector(".goog-te-combo");t?(t.value=e,t.dispatchEvent(new Event("change"))):(n("googtrans","/en/"+e),location.reload())},s)}function i(){e("googtrans"),e("GOOGTRANS")}document.querySelectorAll(".js-lang-link").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-lang"),s=e.getAttribute("data-has-trans")==="true";if(n==="en"){i();return}s||(t.preventDefault(),o(n))})})}()</script></body></html>