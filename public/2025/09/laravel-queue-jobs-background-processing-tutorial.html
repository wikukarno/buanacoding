<!doctype html><html lang=en data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Easy Background Processing Tutorial | Buana Coding</title><meta name=description content="Laravel queue jobs tutorial for background processing. Complete guide to queue concepts and worker setup made simple."><meta name=keywords content="coding,programming,web development,app development,tutorial,developer tips"><link rel=canonical href=https://www.buanacoding.com/2025/09/laravel-queue-jobs-background-processing-tutorial.html><link rel=alternate hreflang=en href=https://www.buanacoding.com/2025/09/laravel-queue-jobs-background-processing-tutorial.html><meta property="og:type" content="article"><meta property="og:title" content="Easy Background Processing Tutorial | Buana Coding"><meta property="og:description" content="Laravel queue jobs tutorial for background processing. Complete guide to queue concepts and worker setup made simple."><meta property="og:url" content="https://www.buanacoding.com/2025/09/laravel-queue-jobs-background-processing-tutorial.html"><meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Easy Background Processing Tutorial | Buana Coding"><meta name=twitter:description content="Laravel queue jobs tutorial for background processing. Complete guide to queue concepts and worker setup made simple."><meta name=twitter:image content="https://www.buanacoding.com/images/og-image.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Easy Background Processing Tutorial | Buana Coding","description":"Laravel queue jobs tutorial for background processing. Complete guide to queue concepts and worker setup made simple.","inLanguage":"en","datePublished":"2025-09-24T10:00:00\u002b07:00","dateModified":"2025-09-24T10:00:00\u002b07:00","author":{"@type":"Person","name":"Wiku Karno"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.buanacoding.com\/2025\/09\/laravel-queue-jobs-background-processing-tutorial.html"},"image":"https:\/\/www.buanacoding.com\/images\/og-image.jpg","publisher":{"@type":"Organization","name":"Buana Coding"}}</script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel=stylesheet><link rel=stylesheet href="/style.css?v=1761405196"><link rel=stylesheet href="/css/overrides.css?v=1761405196"><link rel=stylesheet href="/css/syntax.css?v=1761405196"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0EN9J73FXF")</script><script async src="https://fundingchoicesmessages.google.com/i/pub-3149036684216973?ers=1"></script><script>(function(){function e(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(e,0)}e()})()</script><script>(function(){"use strict";function at(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}Z=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)};function Ge(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t,n=0;n<e.length;++n)if(t=e[n],t&&t.Math==Math)return t;throw Error("Cannot find global object")}Pe=Ge(this);function c(e,t){if(t)a:{var n,o,s=Pe;e=e.split(".");for(n=0;n<e.length-1;n++){if(o=e[n],!(o in s))break a;s=s[o]}e=e[e.length-1],n=s[e],t=t(n),t!=n&&t!=null&&Z(s,e,{configurable:!0,writable:!0,value:t})}}function G(e){return e.raw=e}function b(e){var t=typeof Symbol!="undefined"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:at(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function Xe(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}if(Se=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},typeof Object.setPrototypeOf=="function")R=Object.setPrototypeOf;else{a:{we={a:!0},V={};try{V.__proto__=we,P=V.a;break a}catch{}P=!1}R=P?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}W=R;function K(e,t){if(e.prototype=Se(t.prototype),e.prototype.constructor=e,W)W(e,t);else for(n in t)if(n!="prototype")if(Object.defineProperties){var n,s=Object.getOwnPropertyDescriptor(t,n);s&&Object.defineProperty(e,n,s)}else e[n]=t[n];e.A=t.prototype}function Q(){for(var t=Number(this),n=[],e=t;e<arguments.length;e++)n[e-t]=arguments[e];return n}c("Object.is",function(e){return e||function(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}}),c("Array.prototype.includes",function(e){return e||function(e,t){var s,o,n=this;n instanceof String&&(n=String(n)),s=n.length,t=t||0;for(t<0&&(t=Math.max(t+s,0));t<s;t++)if(o=n[t],o===e||Object.is(o,e))return!0;return!1}}),c("String.prototype.includes",function(e){return e||function(e,t){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,t||0)!==-1}}),c("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),c("Number.isFinite",function(e){return e||function(e){return typeof e=="number"&&!isNaN(e)&&e!==1/0&&e!==-(1/0)}}),c("Number.isInteger",function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}}),c("Number.isSafeInteger",function(e){return e||function(e){return Number.isInteger(e)&&(e<0?-e:e)<=Number.MAX_SAFE_INTEGER}}),c("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-(1/0)||e===0)return e;var t=Math.floor(e<0?-e:e);return e<0?-t:t}}),e=this||self;function _(t,n){a:{for(var s=["CLOSURE_FLAGS"],o=e,i=0;i<s.length;i++)if(o=o[s[i]],o==null){s=null;break a}s=o}return t=s&&s[t],t??n}function q(e){return e}function ct(t){e.setTimeout(function(){throw t},0)}var ae=_(610401301,!1),ot=_(188588736,!0),et=_(645172343,_(1,!0)),Oe=e.navigator,O=Oe?Oe.userAgentData||null:null;function L(e){return!!ae&&!!O&&O.brands.some(function(t){return(t=t.brand)&&t.indexOf(e)!=-1})}function s(t){var n;a:{if((n=e.navigator)&&(n=n.userAgent))break a;n=""}return n.indexOf(t)!=-1}function r(){return!!ae&&!!O&&O.brands.length>0}function F(){return r()?L("Chromium"):(s("Chrome")||s("CriOS"))&&!(r()?0:s("Edge"))||s("Silk")}be=!r()&&(s("Trident")||s("MSIE")),!s("Android")||F(),F(),s("Safari")&&(F()||(r()?0:s("Coast"))||(r()?0:s("Opera"))||(r()?0:s("Edge"))||(r()?L("Microsoft Edge"):s("Edg/"))||r()&&L("Opera")),M={},v=null,T=typeof Uint8Array!="undefined",He=!be&&typeof btoa=="function";function N(){return typeof BigInt=="function"}g=typeof Symbol=="function"&&typeof Symbol()=="symbol";function xe(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Z,Pe,Se,t,R,P,we,e,n,O,V,W,be,v,M,T,He,Te,m,g,X,oe,C,E,Ae,j,Fe,le,re,ie,x=xe(),H=xe("2ex"),ye=g?function(e,t){e[x]|=t}:function(e,t){e.g!==0[0]?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})},h=g?function(e){return e[x]|0}:function(e){return e.g|0},d=g?function(e){return e[x]}:function(e){return e.g},l=g?function(e,t){e[x]=t}:function(e,t){e.g!==0[0]?e.g=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function it(e,t){l(t,(e|0)&-14591)}function U(e,t){l(t,(e|34)&-14557)}m={},X={};function Ie(e){return!(!e||typeof e!="object"||e.g!==X)}function S(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function y(e,t,n){if(!Array.isArray(e)||e.length)return!1;var s=h(e);return!!(s&1)||!!(t&&(Array.isArray(t)?t.includes(n):t.has(n)))&&(l(e,s|1),!0)}t=0,n=0;function J(e){var s=e>>>0;t=s,n=(e-s)/4294967296>>>0}function ee(e){if(e<0){J(-e);var s=b(A(t,n));e=s.next().value,s=s.next().value,t=e>>>0,n=s>>>0}else J(e)}function te(e,t){if(t>>>=0,e>>>=0,t<=2097151)var n=""+(4294967296*t+e);else N()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(n=(e>>>24|t<<8)&16777215,t=t>>16&65535,e=(e&16777215)+n*6777216+t*6710656,n+=t*8147497,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+ne(n)+ne(e));return n}function ne(e){return e=String(e),"0000000".slice(e.length)+e}function A(e,t){return t=~t,e?e=~e+1:t+=1,[e,t]}oe=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function $(e,t){return E=t,e=new e(t),E=0[0],e}function k(e,t,n){if(e==null&&(e=E),E=0[0],e==null){var o,i,s=96;n?(e=[n],s|=512):e=[],t&&(s=s&-16760833|(t&1023)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(s=h(e),s&2048)throw Error("farr");if(s&64)return e;if(s|=64,n&&(s|=512,n!==e[0]))throw Error("mid");a:{if(n=e,o=n.length,o&&(i=o-1,S(n[i]))){if(s|=256,t=i-(+!!(s&512)-1),t>=1024)throw Error("pvtlmt");s=s&-16760833|(t&1023)<<14;break a}if(t){if(t=Math.max(t,o-(+!!(s&512)-1)),t>1024)throw Error("spvt");s=s&-16760833|(t&1023)<<14}}}return l(e,s),e}function st(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(y(e,0[0],0))return}else if(T&&e!=null&&e instanceof Uint8Array){if(He){for(var n,o,i,a,c,l,t="",s=0,r=e.length-10240;s<r;)t+=String.fromCharCode.apply(null,e.subarray(s,s+=10240));t+=String.fromCharCode.apply(null,s?e.subarray(s):e),e=btoa(t)}else{if(t===0[0]&&(t=0),!v){v={},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"];for(a=0;a<5;a++){n=s.concat(r[a].split("")),M[a]=n;for(o=0;o<n.length;o++)i=n[o],v[i]===0[0]&&(v[i]=o)}}t=M[t],s=Array(Math.floor(e.length/3)),r=t[64]||"";for(a=n=0;n<e.length-2;n+=3)c=e[n],l=e[n+1],i=e[n+2],o=t[c>>2],c=t[(c&3)<<4|l>>4],l=t[(l&15)<<2|i>>6],i=t[i&63],s[a++]=o+c+l+i;switch(o=0,i=r,e.length-n){case 2:o=e[n+1],i=t[(o&15)<<2]||r;case 1:e=e[n],s[a]=t[e>>2]+t[(e&3)<<4|o>>4]+i+r}e=s.join("")}return e}}return e}function nt(e,t,n){e=Array.prototype.slice.call(e);var i,o=e.length,s=t&256?e[o-1]:0[0];o+=s?-1:0;for(t=t&512?1:0;t<o;t++)e[t]=n(e[t]);if(s){t=e[t]={};for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=n(s[i]))}return e}function de(e,t,n,s,o){if(e!=null){if(Array.isArray(e))e=y(e,0[0],0)?0[0]:o&&h(e)&2?e:B(e,t,n,s!==0[0],o);else if(S(e)){var i,a={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=de(e[i],t,n,s,o));e=a}else e=t(e,s);return e}}function B(e,t,n,s,o){var i,a=s||n?h(e):0;s=s?!!(a&32):0[0],e=Array.prototype.slice.call(e);for(i=0;i<e.length;i++)e[i]=de(e[i],t,n,s,o);return n&&n(a,e),e}function We(e){return e.s===m?e.toJSON():st(e)}function me(e,t,n){if(n=n===0[0]?U:n,e!=null){if(T&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var s=h(e);return s&2?e:(t&&(t=s===0||!!(s&32)&&!(s&64||!(s&16))),t?(l(e,(s|34)&-12293),e):B(e,me,s&4?U:n,!0,!0))}return e.s===m&&(n=e.h,s=d(n),e=s&2?e:$(e.constructor,fe(n,s,!0))),e}}function fe(e,t,n){var s=n||t&2?U:it,o=!!(t&32);return e=nt(e,t,function(e){return me(e,o,s)}),ye(e,32|(n?2:0)),e}function pe(e,t){return e=e.h,ve(e,d(e),t)}function ge(e,t,n,s){if(t=s+(+!!(t&512)-1),!(t<0||t>=e.length||t>=n))return e[t]}function ve(e,t,n,s){if(n===-1)return null;var o,a,i=t>>14&1023||536870912;if(n>=i){if(t&256)return e[e.length-1][n]}else return a=e.length,s&&t&256&&(s=e[a-1][n],s!=null)?(ge(e,t,i,n)&&H!=null&&(e=(o=Te)!=null?o:Te={},o=e[H]||0,o>=4||(e[H]=o+1,o=Error(),o.__closure__error__context__984382||(o.__closure__error__context__984382={}),o.__closure__error__context__984382.severity="incident",ct(o))),s):ge(e,t,i,n)}function Y(e,t,n,s,o){var i,a=t>>14&1023||536870912;if(n>=a||o&&!et){if(i=t,t&256)o=e[e.length-1];else{if(s==null)return;o=e[a+(+!!(t&512)-1)]={},i|=256}o[n]=s,n<a&&(e[n+(+!!(t&512)-1)]=0[0]),i!==t&&l(e,i)}else e[n+(+!!(t&512)-1)]=s,t&256&&(e=e[e.length-1],n in e&&delete e[n])}function je(e,t){var a,r,s=he,c=c!==0[0]&&c,o=e.h,i=d(o),n=ve(o,i,t,c);return n!=null&&typeof n=="object"&&n.s===m?s=n:Array.isArray(n)?(a=h(n),r=a,r===0&&(r|=i&32),r|=i&2,r!==a&&l(n,r),s=new s(n)):s=0[0],s!==n&&s!=null&&Y(o,i,t,s,c),o=s,o==null?o:(e=e.h,i=d(e),i&2||(n=o,s=n.h,a=d(s),n=a&2?$(n.constructor,fe(s,a,!1)):n,n!==o&&(o=n,Y(e,i,t,o,c))),o)}function I(e,t){return e=pe(e,t),e==null||typeof e=="string"?e:0[0]}function _e(e,s){if(i=i===0[0]?0:i,e=pe(e,s),e!=null)if(s=typeof e,s==="number"?Number.isFinite(e):s!=="string"?0:oe.test(e)){if(typeof e=="number")e=e|0,!Number.isSafeInteger(e)&&(ee(e),s=t,o=n,(e=o&2147483648)&&(s=~s+1>>>0,o=~o>>>0,s==0&&(o=o+1>>>0)),s=o*4294967296+(s>>>0),e=e?-s:s);else if(s=Number(e)|0,Number.isSafeInteger(s))e=String(s);else if(s=e.indexOf("."),s!==-1&&(e=e.substring(0,s)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337)){if(e.length<16)ee(Number(e));else if(N())e=BigInt(e),t=Number(e&BigInt(4294967295))>>>0,n=Number(e>>BigInt(32)&BigInt(4294967295));else{s=+(e[0]==="-"),n=t=0,o=e.length;for(var o,i,a=s,r=(o-s)%6+s;r<=o;a=r,r+=6)a=Number(e.slice(a,r)),n*=1e6,t=t*1e6+a,t>=4294967296&&(n+=t/4294967296|0,n>>>=0,t>>>=0);s&&(s=b(A(t,n)),e=s.next().value,s=s.next().value,t=e,n=s)}e=t,s=n,s&2147483648?N()?e=""+(BigInt(s|0)<<BigInt(32)|BigInt(e>>>0)):(s=b(A(e,s)),e=s.next().value,s=s.next().value,e="-"+te(e,s)):e=te(e,s)}}else e=0[0];return e??i}function a(e,t){var n=n===0[0]?"":n;return e=I(e,t),e??n}function u(e,t,n){this.h=k(e,t,n)}u.prototype.toJSON=function(){return Ce(this)},u.prototype.s=m,u.prototype.toString=function(){try{return C=!0,Ce(this).toString()}finally{C=!1}};function Ce(e){if(a=C?e.h:B(e.h,We,0[0],0[0],!1),m=!C,h=ot?0[0]:e.constructor.v,l=d(m?e.h:a),e=a.length){var t,n,s,o,i,a,l,u,h,m,f,c=a[e-1],r=S(c);if(r?e--:c=0[0],l=+!!(l&512)-1,i=a,r){b:{if(s=c,n={},r=!1,s)for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(isNaN(+t)?n[t]=s[t]:(o=s[t],Array.isArray(o)&&(y(o,h,+t)||Ie(o)&&o.size===0)&&(o=null),o==null&&(r=!0),o!=null&&(n[t]=o)));if(r){for(u in n)break b;n=null}else n=s}s=n==null?c!=null:n!==c}for(;e>0;e--){if(u=e-1,t=i[u],u-=l,!(t==null||y(t,h,u)||Ie(t)&&t.size===0))break;f=!0}(i!==a||s||f)&&(m?(f||s||n)&&(i.length=e):i=Array.prototype.slice.call(i,0,e),n&&i.push(n)),a=i}return a}function Ee(e){return function(t){if(t==null||t=="")t=new e;else{if(t=JSON.parse(t),!Array.isArray(t))throw Error("dnarr");ye(t,32),t=$(e,t)}return t}}function ke(e){this.h=k(e)}K(ke,u),Ae=Ee(ke);function w(e){this.g=e}w.prototype.toString=function(){return this.g+""},Fe={};function D(t){if(j===0[0]){var n=null,s=e.trustedTypes;if(s&&s.createPolicy){try{n=s.createPolicy("goog#html",{createHTML:q,createScript:q,createScriptURL:q})}catch(t){e.console&&e.console.error(t.message)}j=n}else j=n}return t=(n=j)?n.createScriptURL(t):t,new w(t,Fe)}function ze(e){if(t=Q.apply(1,arguments),t.length===0)return D(e[0]);for(var t,s=e[0],n=0;n<t.length;n++)s+=encodeURIComponent(t[n])+e[n+1];return D(s)}function Ye(e,t){e.src=t instanceof w&&t.constructor===w?t.g:"type_error:TrustedResourceUrl";var n,s;(n=(t=(s=(n=(e.ownerDocument&&e.ownerDocument.defaultView||window).document).querySelector)==null?0[0]:s.call(n,"script[nonce]"))?t.nonce||t.getAttribute("nonce")||"":"")&&e.setAttribute("nonce",n)}function Ne(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)}function Le(e,t){return t=String(t),e.contentType==="application/xhtml+xml"&&(t=t.toLowerCase()),e.createElement(t)}function Re(t){this.g=t||e.document||document}function qe(e){return e=e===0[0]?document:e,e.createElement("script")}function z(e,t,n,s,o,i){try{var r=e.g,a=qe(r);a.async=!0,Ye(a,t),r.head.appendChild(a),a.addEventListener("load",function(){o(),s&&r.head.removeChild(a)}),a.addEventListener("error",function(){n>0?z(e,t,n-1,s,o,i):(s&&r.head.removeChild(a),i())})}catch{i()}}var Ke=e.atob("aHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vaW1hZ2VzL2ljb25zL21hdGVyaWFsL3N5c3RlbS8xeC93YXJuaW5nX2FtYmVyXzI0ZHAucG5n"),Ue=e.atob("WW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIGJlY2F1c2UgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlIGlzIGludGVyZmVyaW5nIHdpdGggdGhpcyBwYWdlLg=="),Je=e.atob("RGlzYWJsZSBhbnkgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlLCB0aGVuIHJlbG9hZCB0aGlzIHBhZ2Uu");function tt(e,t,n){this.i=e,this.u=t,this.o=n,this.g=null,this.j=[],this.m=!1,this.l=new Re(this.i)}function Ve(t){if(t.i.body&&!t.m){var n=function(){Be(t),e.setTimeout(function(){Me(t,3)},50)};z(t.l,t.u,2,!0,function(){e[t.o]||n()},n),t.m=!0}}function Be(e){for(var s,a,r,c,t=o(1,5),n=0;n<t;n++)s=i(e),e.i.body.appendChild(s),e.j.push(s);t=i(e),t.style.bottom="0",t.style.left="0",t.style.position="fixed",t.style.width=o(100,110).toString()+"%",t.style.zIndex=o(2147483544,2147483644).toString(),t.style.backgroundColor=De(249,259,242,252,219,229),t.style.boxShadow="0 0 12px #888",t.style.color=De(0,10,0,10,0,10),t.style.display="flex",t.style.justifyContent="center",t.style.fontFamily="Roboto, Arial",n=i(e),n.style.width=o(80,85).toString()+"%",n.style.maxWidth=o(750,775).toString()+"px",n.style.margin="24px",n.style.display="flex",n.style.alignItems="flex-start",n.style.justifyContent="center",s=Le(e.l.g,"IMG"),s.className=Ne(),s.src=Ke,s.alt="Warning icon",s.style.height="24px",s.style.width="24px",s.style.paddingRight="16px",a=i(e),r=i(e),r.style.fontWeight="bold",r.textContent=Ue,c=i(e),c.textContent=Je,p(e,a,r),p(e,a,c),p(e,n,s),p(e,n,a),p(e,t,n),e.g=t,e.i.body.appendChild(e.g),t=o(1,5);for(n=0;n<t;n++)s=i(e),e.i.body.appendChild(s),e.j.push(s)}function p(e,t,n){for(var r,s=o(1,5),a=0;a<s;a++)r=i(e),t.appendChild(r);t.appendChild(n),n=o(1,5);for(s=0;s<n;s++)a=i(e),t.appendChild(a)}function o(e,t){return Math.floor(e+Math.random()*(t-e))}function De(e,t,n,s,i,a){return"rgb("+o(Math.max(e,0),Math.min(t,255)).toString()+","+o(Math.max(n,0),Math.min(s,255)).toString()+","+o(Math.max(i,0),Math.min(a,255)).toString()+")"}function i(e){return e=Le(e.l.g,"DIV"),e.className=Ne(),e}function Me(t,n){n<=0||t.g!=null&&t.g.offsetHeight!==0&&t.g.offsetWidth!==0||(Qe(t),Be(t),e.setTimeout(function(){Me(t,n-1)},50))}function Qe(e){for(var n=b(e.j),t=n.next();!t.done;t=n.next())(t=t.value)&&t.parentNode&&t.parentNode.removeChild(t);e.j=[],(n=e.g)&&n.parentNode&&n.parentNode.removeChild(n),e.g=null}function Ze(t,n,s,o,i){function r(t){document.body?c(document.body):t>0?e.setTimeout(function(){r(t-1)},i):n()}function c(s){s.appendChild(a),e.setTimeout(function(){a?(a.offsetHeight!==0&&a.offsetWidth!==0?n():t(),a.parentNode&&a.parentNode.removeChild(a)):t()},o)}var a=$e(s);r(3)}function $e(e){var t=document.createElement("div");return t.className=e,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.zIndex="-10000",t}function he(e){this.h=k(e)}K(he,u);function ue(e){this.h=k(e)}K(ue,u),le=Ee(ue);function ce(e){if(!e)return null;e=I(e,4);var t;return e==null?t=null:t=D(e),t}re=G([""]),ie=G([""]);function se(e,t){this.m=e,this.o=new Re(e.document),this.g=t,this.j=a(this.g,1),this.u=ce(je(this.g,2))||ze(re),this.i=!1,t=ce(je(this.g,13))||ze(ie),this.l=new tt(e.document,t,a(this.g,12))}se.prototype.start=function(){rt(this)};function rt(t){lt(t),z(t.o,t.u,3,!1,function(){a:{var o,n=t.j,s=e.btoa(n);if(s=e[s]){try{o=Ae(e.atob(s))}catch{n=!1;break a}n=n===I(o,1)}else n=!1}n?f(t,a(t.g,14)):(f(t,a(t.g,8)),Ve(t.l))},function(){Ze(function(){f(t,a(t.g,7)),Ve(t.l)},function(){return f(t,a(t.g,6))},a(t.g,9),_e(t.g,10),_e(t.g,11))})}function f(e,t){e.i||(e.i=!0,e=new e.m.XMLHttpRequest,e.open("GET",t,!0),e.send())}function lt(t){var n=e.btoa(t.j);t.m[n]&&f(t,a(t.g,5))}(function(t,n){e[t]=function(){var s=Q.apply(0,arguments);e[t]=function(){},n.call.apply(n,[null].concat(s instanceof Array?s:Xe(b(s))))}})("__h82AlnkH6D91__",function(e){typeof window.atob=="function"&&new se(window,le(window.atob(e))).start()})}).call(this),window.__h82AlnkH6D91__("WyJwdWItMzE0OTAzNjY4NDIxNjk3MyIsW251bGwsbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9iL3B1Yi0zMTQ5MDM2Njg0MjE2OTczIl0sbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9lbC9BR1NLV3hXRW1tb2ZrZGEwZHlSNkcxMkdNSnNEZDF5UFF4a3FSYS11R2NVem9LZHh6NGFxNndzZm5DN3VPekxfWmljWUZvSW5iYnNKRGtFUUU1a1RUNFFGb25MMF9nXHUwMDNkXHUwMDNkP3RlXHUwMDNkVE9LRU5fRVhQT1NFRCIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFZVeXNCQ3NSc2llS3ExOENZVDNibVVqbFREbTVKM01FR1BSdUVoRjFsV3c3UjVNdGRwWnhNM2hJQm1tMnZhbjNmVWxZcVNLSnoycE5xMWNSTUJZYUxfLXdcdTAwM2RcdTAwM2Q/YWJcdTAwM2QxXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFVvQ2JlQlRkS2gzZmU0NnB1VERhek9PdHN0b0p3NjhKUU5SOGQ1OFgwWm9QRlV0LUZPUm1HU1ZJajM2WXQwQjU3c0t1bUFmcjFNWU5JV3U3U3JXNi1EQkFcdTAwM2RcdTAwM2Q/YWJcdTAwM2QyXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFdORXhuRXA0STJueGlBNXdiejVRMDZzT0Njek53bFltRXo4cWhOY0sxZzd2N1UwR2ZVZ0hJOFlPeWk1Qms2NGljWTNzU3BMRE9IZ3pSNTg0VlA5ak5sZmdcdTAwM2RcdTAwM2Q/c2JmXHUwMDNkMiIsImRpdi1ncHQtYWQiLDIwLDEwMCwiY0hWaUxUTXhORGt3TXpZMk9EUXlNVFk1TnpNXHUwMDNkIixbbnVsbCxudWxsLG51bGwsImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLzBlbW4vZi9wL3B1Yi0zMTQ5MDM2Njg0MjE2OTczLmpzP3VzcXBcdTAwM2RDQWMiXSwiaHR0cHM6Ly9mdW5kaW5nY2hvaWNlc21lc3NhZ2VzLmdvb2dsZS5jb20vZWwvQUdTS1d4VmpzRmdxZHhwME1yZFNEMjF6Q2l2TkR3cjZvM0FfNEQyYVlaRUJJZXZNSmN1eUVvNmRmX29XMUNiZFVRdVR1WW52cGZUdWhteS1NTXZfcGlqVlB0NUQxZ1x1MDAzZFx1MDAzZCJd")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3149036684216973" crossorigin=anonymous></script></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"><header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow"><div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-2xl font-extrabold tracking-wide"><a href=/ class=hover:opacity-90>BUANACODING</a></h1><nav class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"><a href=/tags/general class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="hidden md:flex items-center"><div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium"><a href=/2025/09/laravel-queue-jobs-background-processing-tutorial.html data-lang=en data-has-trans=true class="js-lang-link px-2 py-1 bg-white/20 text-white">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">ID</a></div></div><button id=openSearchModal class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
</button>
<button id=theme-toggle class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer" aria-label="Toggle Dark Mode">
<i id=icon-sun data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon data-feather=moon class="w-5 h-5"></i></button></nav><button id=menu-toggle class="md:hidden text-2xl focus:outline-none">
â˜°</button></div><div id=mobile-menu class="hidden md:hidden px-4 pb-4 space-y-2"><a href=/tags/general class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="mt-8 space-y-6"><button id=openSearchModalMobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
<span class="text-sm font-medium">Search</span></button><div class="flex items-center justify-between py-2"><div class="flex items-center gap-4"><i data-feather=globe class="w-5 h-5 text-white/80"></i>
<span class="text-sm font-medium text-white">Language</span></div><div class="flex text-xs"><a href=/2025/09/laravel-queue-jobs-background-processing-tutorial.html data-lang=en data-has-trans=true class="js-lang-link px-3 py-1.5 text-white font-medium">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-3 py-1.5 text-white/60 hover:text-white">ID</a></div></div><button id=theme-toggle-mobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label="Toggle Dark Mode">
<i id=icon-sun-mobile data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon-mobile data-feather=moon class="w-5 h-5"></i>
<span class="text-sm font-medium">Theme</span></button></div></div></header><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2"><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3149036684216973 data-ad-slot=9616560861 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div id=searchModal class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"><div class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"><button id=closeSearchModal class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110">
<i data-feather=x class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"></i>
</button>
<input type=text id=searchBox placeholder="Search articles..." class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"><div id=searchAdBanner class="mt-4 mb-8 hidden"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class="adsbygoogle search-results-ad" style=display:block;min-height:100px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><style>#searchAdBanner{transition:opacity .3s ease-in-out,transform .3s ease-in-out}#searchAdBanner.show{display:block!important;opacity:1;transform:translateY(0)}#searchAdBanner.hide{opacity:0;transform:translateY(-10px)}.search-results-ad{max-height:100px;overflow:hidden}</style><ul id=results class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"></ul></div></div><main class="flex-1 w-full"><div class="max-w-7xl mx-auto py-8 px-4"><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8"><article class="prose prose-blue dark:prose-invert lg:col-span-2"><nav class="text-sm text-gray-600 dark:text-gray-300 mb-4"><a href=/ class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">Home</a>
<span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
<a href=/tags/laravel class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">#Laravel</a></nav><h1>Easy Background Processing Tutorial</h1><div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700"><span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
<a href="https://twitter.com/intent/tweet?text=Easy+Background+Processing+Tutorial&url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Flaravel-queue-jobs-background-processing-tutorial.html&via=buanacoding" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Share on Twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Flaravel-queue-jobs-background-processing-tutorial.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on Facebook"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Flaravel-queue-jobs-background-processing-tutorial.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on LinkedIn"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://wa.me/?text=Easy+Background+Processing+Tutorial%20https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Flaravel-queue-jobs-background-processing-tutorial.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200" title="Share on WhatsApp"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.484 3.488"/></svg>
</a><button onclick='copyLinkHeader("https://www.buanacoding.com/2025/09/laravel-queue-jobs-background-processing-tutorial.html")' class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Copy Link">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</button>
<span id=copy-header-success class="hidden text-xs text-green-600 dark:text-green-400 font-medium">Copied!</span></div><script>function copyLinkHeader(e){navigator.clipboard.writeText(e).then(function(){showHeaderSuccess()}).catch(function(){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),showHeaderSuccess()})}function showHeaderSuccess(){const e=document.getElementById("copy-header-success");e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},2e3)}</script><p>Ever had a user complain that your app takes forever to send an email or process an image upload? Or maybe you&rsquo;ve watched your response times crawl to a halt because you&rsquo;re trying to do too much work during a single request? Laravel queues are the solution you&rsquo;ve been looking for, and they&rsquo;re easier to set up than you might think.</p><p>Think of Laravel queues as your app&rsquo;s personal assistant. Instead of making users wait while you send emails, resize images, or generate reports, you hand these tasks off to the background and let users continue with their day. The work still gets done, but it doesn&rsquo;t block the user experience.</p><p>Queue jobs are perfect for any task that doesn&rsquo;t need to happen immediately - and honestly, that&rsquo;s most tasks. Whether you&rsquo;re sending welcome emails, processing file uploads, generating PDFs, or hitting external APIs, queues can make your app feel snappy and responsive while handling the heavy lifting behind the scenes.</p><div class="my-8 flex justify-center"><div class="w-full max-w-2xl"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-3149036684216973 data-ad-slot=2492895769></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><h2 id=understanding-laravel-queues>Understanding Laravel Queues</h2><p>Before we dive into the code, let&rsquo;s understand what&rsquo;s actually happening when you use Laravel queues. When a user triggers an action that normally takes time (like sending an email), instead of processing it immediately, Laravel puts that task into a queue - basically a to-do list.</p><p>Meanwhile, queue workers (separate processes) are constantly checking this to-do list and processing tasks one by one. The user gets an immediate response, and the work happens in the background without them having to wait.</p><p>Here&rsquo;s a simple example to illustrate the difference:</p><p><strong>Without Queues:</strong></p><ol><li>User submits a form</li><li>App sends email (takes 3 seconds)</li><li>App resizes uploaded image (takes 2 seconds)</li><li>App saves data to database</li><li>User finally sees success message (after 5+ seconds)</li></ol><p><strong>With Queues:</strong></p><ol><li>User submits a form</li><li>App queues email job</li><li>App queues image resize job</li><li>App saves data to database</li><li>User sees success message (under 1 second)</li><li>Background workers handle email and image tasks</li></ol><p>The difference in user experience is night and day.</p><h2 id=queue-drivers-and-configuration>Queue Drivers and Configuration</h2><p>Laravel supports several queue drivers, each with different strengths depending on your needs.</p><h3 id=database-driver-perfect-for-starting-out>Database Driver (Perfect for Starting Out)</h3><p>The database driver stores jobs in your database - it&rsquo;s simple, requires no additional services, and perfect for getting started:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// config/queue.php
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;default&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;QUEUE_CONNECTION&#39;</span><span class=p>,</span> <span class=s1>&#39;database&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s1>&#39;connections&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;database&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;driver&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;database&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;table&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;jobs&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;queue&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;default&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;retry_after&#39;</span> <span class=o>=&gt;</span> <span class=mi>90</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;after_commit&#39;</span> <span class=o>=&gt;</span> <span class=k>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>],</span>
</span></span></code></pre></div><p>Set up the database tables:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan queue:table
</span></span><span class=line><span class=cl>php artisan queue:failed-table
</span></span><span class=line><span class=cl>php artisan migrate
</span></span></code></pre></div><h3 id=redis-driver-great-for-production>Redis Driver (Great for Production)</h3><p>Redis is faster and more feature-rich, perfect for high-traffic applications:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Install Redis PHP extension</span>
</span></span><span class=line><span class=cl>composer require predis/predis
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// config/queue.php
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;redis&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;driver&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;redis&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;connection&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;default&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;queue&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;REDIS_QUEUE&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;retry_after&#39;</span> <span class=o>=&gt;</span> <span class=mi>90</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;block_for&#39;</span> <span class=o>=&gt;</span> <span class=k>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;after_commit&#39;</span> <span class=o>=&gt;</span> <span class=k>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>],</span>
</span></span></code></pre></div><h3 id=amazon-sqs-driver-scalable-cloud-solution>Amazon SQS Driver (Scalable Cloud Solution)</h3><p>For applications that need to scale automatically:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composer require aws/aws-sdk-php
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// config/queue.php
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;sqs&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;driver&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;sqs&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;key&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;AWS_ACCESS_KEY_ID&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;secret&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;prefix&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;SQS_PREFIX&#39;</span><span class=p>,</span> <span class=s1>&#39;https://sqs.us-east-1.amazonaws.com/your-account-id&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;queue&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;SQS_QUEUE&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;suffix&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;SQS_SUFFIX&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;region&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;AWS_DEFAULT_REGION&#39;</span><span class=p>,</span> <span class=s1>&#39;us-east-1&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;after_commit&#39;</span> <span class=o>=&gt;</span> <span class=k>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>],</span>
</span></span></code></pre></div><h2 id=creating-your-first-job>Creating Your First Job</h2><p>Let&rsquo;s create a job that sends a welcome email to new users. This is a perfect example because emails can be slow and users shouldn&rsquo;t have to wait for them.</p><p>Generate a new job:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan make:job SendWelcomeEmail
</span></span></code></pre></div><p>This creates a job class in <code>app/Jobs/SendWelcomeEmail.php</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Jobs</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\User</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Mail\WelcomeEmail</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Bus\Queueable</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Contracts\Queue\ShouldQueue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Foundation\Bus\Dispatchable</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Queue\InteractsWithQueue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Queue\SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\Facades\Mail</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SendWelcomeEmail</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>User</span> <span class=nv>$user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span> <span class=o>=</span> <span class=nv>$user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Send the welcome email
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Mail</span><span class=o>::</span><span class=na>to</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=k>new</span> <span class=nx>WelcomeEmail</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now, instead of sending the email directly in your controller, dispatch the job:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// In your controller
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>validated</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Instead of: Mail::to($user-&gt;email)-&gt;send(new WelcomeEmail($user));
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>SendWelcomeEmail</span><span class=o>::</span><span class=na>dispatch</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>redirect</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>route</span><span class=p>(</span><span class=s1>&#39;dashboard&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>with</span><span class=p>(</span><span class=s1>&#39;success&#39;</span><span class=p>,</span> <span class=s1>&#39;Account created successfully!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The user sees the success message immediately, and the email gets sent in the background.</p><h2 id=job-properties-and-configuration>Job Properties and Configuration</h2><p>Laravel jobs are highly configurable. Here are the most important properties you should know about:</p><h3 id=queue-assignment>Queue Assignment</h3><p>You can organize jobs into different queues based on priority or type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>SendWelcomeEmail</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Specify which queue this job should go to
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=nv>$queue</span> <span class=o>=</span> <span class=s1>&#39;emails&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Or set it when dispatching
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// SendWelcomeEmail::dispatch($user)-&gt;onQueue(&#39;high-priority&#39;);
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h3 id=retry-configuration>Retry Configuration</h3><p>Control how many times a job should be retried if it fails:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessPayment</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Retry up to 3 times
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=nv>$tries</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Wait 30 seconds between retries
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=nv>$backoff</span> <span class=o>=</span> <span class=mi>30</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Or use exponential backoff
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>backoff</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>30</span><span class=p>];</span> <span class=c1>// Seconds between retries
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=timeout-configuration>Timeout Configuration</h3><p>Prevent jobs from running too long:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>GenerateReport</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Job will be killed if it runs longer than 120 seconds
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=nv>$timeout</span> <span class=o>=</span> <span class=mi>120</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Handle timeout gracefully
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>timeoutAt</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>addMinutes</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=advanced-job-types-and-patterns>Advanced Job Types and Patterns</h2><h3 id=job-batching>Job Batching</h3><p>Sometimes you need to process many related jobs and know when they&rsquo;re all done:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Bus\Batch</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\Facades\Bus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Process 1000 emails in batches
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$jobs</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=nv>$users</span> <span class=k>as</span> <span class=nv>$user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$jobs</span><span class=p>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SendNewsletterEmail</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$batch</span> <span class=o>=</span> <span class=nx>Bus</span><span class=o>::</span><span class=na>batch</span><span class=p>(</span><span class=nv>$jobs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>-&gt;</span><span class=na>then</span><span class=p>(</span><span class=k>function</span> <span class=p>(</span><span class=nx>Batch</span> <span class=nv>$batch</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// All jobs completed successfully
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Log</span><span class=o>::</span><span class=na>info</span><span class=p>(</span><span class=s1>&#39;Newsletter batch completed&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;batch_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$batch</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=o>-&gt;</span><span class=na>catch</span><span class=p>(</span><span class=k>function</span> <span class=p>(</span><span class=nx>Batch</span> <span class=nv>$batch</span><span class=p>,</span> <span class=nx>Throwable</span> <span class=nv>$e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// First batch job failure
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Log</span><span class=o>::</span><span class=na>error</span><span class=p>(</span><span class=s1>&#39;Newsletter batch failed&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;batch_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$batch</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span> <span class=o>=&gt;</span> <span class=nv>$e</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>()]);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=o>-&gt;</span><span class=na>finally</span><span class=p>(</span><span class=k>function</span> <span class=p>(</span><span class=nx>Batch</span> <span class=nv>$batch</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Batch has finished executing (success or failure)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>NotificationService</span><span class=o>::</span><span class=na>notifyAdmins</span><span class=p>(</span><span class=s1>&#39;Newsletter batch finished&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=o>-&gt;</span><span class=na>dispatch</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nx>response</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>json</span><span class=p>([</span><span class=s1>&#39;batch_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$batch</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>]);</span>
</span></span></code></pre></div><h3 id=job-chains>Job Chains</h3><p>When jobs need to run in a specific order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\Facades\Bus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Process an order: charge payment â†’ update inventory â†’ send confirmation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Bus</span><span class=o>::</span><span class=na>chain</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>ProcessPayment</span><span class=p>(</span><span class=nv>$order</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>UpdateInventory</span><span class=p>(</span><span class=nv>$order</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>SendOrderConfirmation</span><span class=p>(</span><span class=nv>$order</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>])</span><span class=o>-&gt;</span><span class=na>dispatch</span><span class=p>();</span>
</span></span></code></pre></div><p>If any job in the chain fails, the remaining jobs won&rsquo;t run.</p><h3 id=conditional-job-dispatching>Conditional Job Dispatching</h3><p>Only queue jobs when certain conditions are met:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>SendPromotionalEmail</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>User</span> <span class=nv>$user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span> <span class=o>=</span> <span class=nv>$user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Don&#39;t queue if user has unsubscribed
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>shouldQueue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>email_notifications_enabled</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>email_notifications_enabled</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span> <span class=c1>// Exit early if user has unsubscribed since queuing
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>Mail</span><span class=o>::</span><span class=na>to</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=k>new</span> <span class=nx>PromotionalEmail</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=queue-workers-and-processing>Queue Workers and Processing</h2><p>Queue workers are the engines that actually process your jobs. Understanding how they work helps you optimize performance and avoid common pitfalls.</p><h3 id=starting-workers>Starting Workers</h3><p>Start a worker to process jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Process jobs from the default queue</span>
</span></span><span class=line><span class=cl>php artisan queue:work
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Process specific queues in order of priority</span>
</span></span><span class=line><span class=cl>php artisan queue:work --queue<span class=o>=</span>high-priority,emails,default
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Process jobs with memory and timeout limits</span>
</span></span><span class=line><span class=cl>php artisan queue:work --memory<span class=o>=</span><span class=m>512</span> --timeout<span class=o>=</span><span class=m>60</span>
</span></span></code></pre></div><h3 id=worker-configuration>Worker Configuration</h3><p>Configure workers for your specific needs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Process only 10 jobs before restarting (prevents memory leaks)</span>
</span></span><span class=line><span class=cl>php artisan queue:work --max-jobs<span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Process jobs for 1 hour before restarting</span>
</span></span><span class=line><span class=cl>php artisan queue:work --max-time<span class=o>=</span><span class=m>3600</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sleep for 5 seconds when no jobs are available</span>
</span></span><span class=line><span class=cl>php artisan queue:work --sleep<span class=o>=</span><span class=m>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Restart workers gracefully when they finish current job</span>
</span></span><span class=line><span class=cl>php artisan queue:restart
</span></span></code></pre></div><h3 id=production-worker-setup>Production Worker Setup</h3><p>In production, use a process manager like Supervisor to keep workers running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[program:laravel-worker]</span>
</span></span><span class=line><span class=cl><span class=na>process_name</span><span class=o>=</span><span class=s>%(program_name)s_%(process_num)02d</span>
</span></span><span class=line><span class=cl><span class=na>command</span><span class=o>=</span><span class=s>php /path/to/your/app/artisan queue:work redis --sleep=3 --tries=3 --max-time=3600</span>
</span></span><span class=line><span class=cl><span class=na>directory</span><span class=o>=</span><span class=s>/path/to/your/app</span>
</span></span><span class=line><span class=cl><span class=na>user</span><span class=o>=</span><span class=s>www-data</span>
</span></span><span class=line><span class=cl><span class=na>numprocs</span><span class=o>=</span><span class=s>8</span>
</span></span><span class=line><span class=cl><span class=na>redirect_stderr</span><span class=o>=</span><span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>stdout_logfile</span><span class=o>=</span><span class=s>/var/log/laravel-worker.log</span>
</span></span><span class=line><span class=cl><span class=na>stopwaitsecs</span><span class=o>=</span><span class=s>3600</span>
</span></span></code></pre></div><p>This configuration runs 8 worker processes, automatically restarts them if they crash, and logs their output.</p><h2 id=error-handling-and-failed-jobs>Error Handling and Failed Jobs</h2><p>Not all jobs succeed on the first try. Laravel provides robust error handling to deal with failures gracefully.</p><h3 id=handling-job-failures>Handling Job Failures</h3><p>Add a <code>failed</code> method to handle job failures:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessPayment</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$order</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$tries</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>Order</span> <span class=nv>$order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span> <span class=o>=</span> <span class=nv>$order</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$paymentService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PaymentService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$paymentService</span><span class=o>-&gt;</span><span class=na>charge</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span><span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;paid&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>PaymentException</span> <span class=nv>$e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Log the error with context
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>Log</span><span class=o>::</span><span class=na>error</span><span class=p>(</span><span class=s1>&#39;Payment processing failed&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;order_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;error&#39;</span> <span class=o>=&gt;</span> <span class=nv>$e</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;attempt&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>attempts</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// Re-throw to trigger retry mechanism
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>throw</span> <span class=nv>$e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>failed</span><span class=p>(</span><span class=nx>Throwable</span> <span class=nv>$exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Handle job failure after all retries are exhausted
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span><span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;payment_failed&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Notify the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Mail</span><span class=o>::</span><span class=na>to</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=k>new</span> <span class=nx>PaymentFailedEmail</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Alert administrators
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Log</span><span class=o>::</span><span class=na>alert</span><span class=p>(</span><span class=s1>&#39;Payment processing failed permanently&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;order_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>order</span><span class=o>-&gt;</span><span class=na>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;error&#39;</span> <span class=o>=&gt;</span> <span class=nv>$exception</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=managing-failed-jobs>Managing Failed Jobs</h3><p>Laravel tracks failed jobs automatically. You can view and manage them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List all failed jobs</span>
</span></span><span class=line><span class=cl>php artisan queue:failed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Retry a specific failed job</span>
</span></span><span class=line><span class=cl>php artisan queue:retry <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Retry all failed jobs</span>
</span></span><span class=line><span class=cl>php artisan queue:retry all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Delete a failed job</span>
</span></span><span class=line><span class=cl>php artisan queue:forget <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Clear all failed jobs</span>
</span></span><span class=line><span class=cl>php artisan queue:flush
</span></span></code></pre></div><h3 id=custom-failed-job-handling>Custom Failed Job Handling</h3><p>Create custom logic for handling failed jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// In a controller or command
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>public</span> <span class=k>function</span> <span class=nf>retryFailedJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$failedJobs</span> <span class=o>=</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;failed_jobs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;failed_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&gt;&#39;</span><span class=p>,</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>subDay</span><span class=p>())</span> <span class=c1>// Only recent failures
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=nv>$failedJobs</span> <span class=k>as</span> <span class=nv>$failedJob</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$payload</span> <span class=o>=</span> <span class=nx>json_decode</span><span class=p>(</span><span class=nv>$failedJob</span><span class=o>-&gt;</span><span class=na>payload</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Only retry certain types of jobs
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>str_contains</span><span class=p>(</span><span class=nv>$payload</span><span class=p>[</span><span class=s1>&#39;displayName&#39;</span><span class=p>],</span> <span class=s1>&#39;SendEmail&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Artisan</span><span class=o>::</span><span class=na>call</span><span class=p>(</span><span class=s1>&#39;queue:retry&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$failedJob</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=real-world-job-examples>Real-World Job Examples</h2><p>Let&rsquo;s look at some practical job examples you&rsquo;ll likely need in real applications.</p><h3 id=image-processing-job>Image Processing Job</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessImageUpload</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$imagePath</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$timeout</span> <span class=o>=</span> <span class=mi>300</span><span class=p>;</span> <span class=c1>// 5 minutes for large images
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nv>$imagePath</span><span class=p>,</span> <span class=nv>$userId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>imagePath</span> <span class=o>=</span> <span class=nv>$imagePath</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span> <span class=o>=</span> <span class=nv>$userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$image</span> <span class=o>=</span> <span class=nx>Image</span><span class=o>::</span><span class=na>make</span><span class=p>(</span><span class=nx>storage_path</span><span class=p>(</span><span class=s1>&#39;app/&#39;</span> <span class=o>.</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>imagePath</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Create different sizes
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$sizes</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;thumbnail&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>150</span><span class=p>,</span> <span class=mi>150</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;medium&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>500</span><span class=p>,</span> <span class=mi>500</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;large&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>1200</span><span class=p>,</span> <span class=mi>1200</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$sizes</span> <span class=k>as</span> <span class=nv>$name</span> <span class=o>=&gt;</span> <span class=nv>$dimensions</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$resized</span> <span class=o>=</span> <span class=nv>$image</span><span class=o>-&gt;</span><span class=na>fit</span><span class=p>(</span><span class=nv>$dimensions</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nv>$dimensions</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=nv>$filename</span> <span class=o>=</span> <span class=nv>$name</span> <span class=o>.</span> <span class=s1>&#39;_&#39;</span> <span class=o>.</span> <span class=nx>basename</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>imagePath</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nv>$resized</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>(</span><span class=nx>storage_path</span><span class=p>(</span><span class=s1>&#39;app/images/&#39;</span> <span class=o>.</span> <span class=nv>$filename</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Update user&#39;s profile with processed images
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>User</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;avatar_processed&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;processing_completed_at&#39;</span> <span class=o>=&gt;</span> <span class=nx>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>failed</span><span class=p>(</span><span class=nx>Throwable</span> <span class=nv>$exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>User</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;avatar_processing_failed&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>Log</span><span class=o>::</span><span class=na>error</span><span class=p>(</span><span class=s1>&#39;Image processing failed&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;image_path&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>imagePath</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;error&#39;</span> <span class=o>=&gt;</span> <span class=nv>$exception</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=pdf-generation-job>PDF Generation Job</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>GenerateInvoicePDF</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$invoice</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$queue</span> <span class=o>=</span> <span class=s1>&#39;reports&#39;</span><span class=p>;</span> <span class=c1>// Use a dedicated queue for reports
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>Invoice</span> <span class=nv>$invoice</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span> <span class=o>=</span> <span class=nv>$invoice</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$pdf</span> <span class=o>=</span> <span class=nx>PDF</span><span class=o>::</span><span class=na>loadView</span><span class=p>(</span><span class=s1>&#39;invoices.pdf&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;invoice&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;company&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=o>-&gt;</span><span class=na>company</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;items&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$filename</span> <span class=o>=</span> <span class=s2>&#34;invoice-</span><span class=si>{</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=o>-&gt;</span><span class=na>number</span><span class=si>}</span><span class=s2>.pdf&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$path</span> <span class=o>=</span> <span class=s2>&#34;invoices/</span><span class=si>{</span><span class=nv>$filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Save PDF to storage
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Storage</span><span class=o>::</span><span class=na>put</span><span class=p>(</span><span class=nv>$path</span><span class=p>,</span> <span class=nv>$pdf</span><span class=o>-&gt;</span><span class=na>output</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Update invoice with PDF path
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pdf_path&#39;</span> <span class=o>=&gt;</span> <span class=nv>$path</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pdf_generated_at&#39;</span> <span class=o>=&gt;</span> <span class=nx>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Email PDF to customer
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Mail</span><span class=o>::</span><span class=na>to</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=o>-&gt;</span><span class=na>customer</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=k>new</span> <span class=nx>InvoicePDFReady</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>invoice</span><span class=p>,</span> <span class=nv>$path</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=data-export-job>Data Export Job</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ExportUsersToCSV</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$filters</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$requestedBy</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$timeout</span> <span class=o>=</span> <span class=mi>600</span><span class=p>;</span> <span class=c1>// 10 minutes for large exports
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=k>array</span> <span class=nv>$filters</span><span class=p>,</span> <span class=nx>User</span> <span class=nv>$requestedBy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filters</span> <span class=o>=</span> <span class=nv>$filters</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedBy</span> <span class=o>=</span> <span class=nv>$requestedBy</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$filename</span> <span class=o>=</span> <span class=s1>&#39;users_export_&#39;</span> <span class=o>.</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>format</span><span class=p>(</span><span class=s1>&#39;Y_m_d_H_i_s&#39;</span><span class=p>)</span> <span class=o>.</span> <span class=s1>&#39;.csv&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$path</span> <span class=o>=</span> <span class=s2>&#34;exports/</span><span class=si>{</span><span class=nv>$filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$query</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>query</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Apply filters
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>empty</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filters</span><span class=p>[</span><span class=s1>&#39;created_after&#39;</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&gt;=&#39;</span><span class=p>,</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filters</span><span class=p>[</span><span class=s1>&#39;created_after&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>empty</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filters</span><span class=p>[</span><span class=s1>&#39;role&#39;</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;role&#39;</span><span class=p>,</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filters</span><span class=p>[</span><span class=s1>&#39;role&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Stream large datasets to avoid memory issues
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$file</span> <span class=o>=</span> <span class=nx>fopen</span><span class=p>(</span><span class=nx>storage_path</span><span class=p>(</span><span class=s1>&#39;app/&#39;</span> <span class=o>.</span> <span class=nv>$path</span><span class=p>),</span> <span class=s1>&#39;w&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>fputcsv</span><span class=p>(</span><span class=nv>$file</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Name&#39;</span><span class=p>,</span> <span class=s1>&#39;Email&#39;</span><span class=p>,</span> <span class=s1>&#39;Created At&#39;</span><span class=p>,</span> <span class=s1>&#39;Role&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>chunk</span><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$users</span><span class=p>)</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$file</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>foreach</span> <span class=p>(</span><span class=nv>$users</span> <span class=k>as</span> <span class=nv>$user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fputcsv</span><span class=p>(</span><span class=nv>$file</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>created_at</span><span class=o>-&gt;</span><span class=na>format</span><span class=p>(</span><span class=s1>&#39;Y-m-d H:i:s&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>role</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>fclose</span><span class=p>(</span><span class=nv>$file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Notify user that export is ready
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Mail</span><span class=o>::</span><span class=na>to</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedBy</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=k>new</span> <span class=nx>ExportReady</span><span class=p>(</span><span class=nv>$filename</span><span class=p>,</span> <span class=nv>$path</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>For comprehensive performance optimization when working with large datasets, check out our <a href=/2025/09/laravel-performance-optimization-15-techniques.html>Laravel performance optimization guide
</a>.</p><h2 id=queue-monitoring-and-debugging>Queue Monitoring and Debugging</h2><p>Monitoring your queues is crucial for maintaining a healthy application. Here are the tools and techniques you need.</p><h3 id=basic-queue-monitoring>Basic Queue Monitoring</h3><p>Check queue status and job counts:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check queue status</span>
</span></span><span class=line><span class=cl>php artisan queue:monitor
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View queue statistics</span>
</span></span><span class=line><span class=cl>php artisan queue:work --verbose
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check specific queue</span>
</span></span><span class=line><span class=cl>php artisan queue:size redis:high-priority
</span></span></code></pre></div><h3 id=custom-queue-monitoring>Custom Queue Monitoring</h3><p>Create your own monitoring dashboard:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>QueueMonitoringController</span> <span class=k>extends</span> <span class=nx>Controller</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>dashboard</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$queueStats</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pending_jobs&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getPendingJobsCount</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;failed_jobs&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getFailedJobsCount</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;processed_today&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getProcessedJobsToday</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;average_processing_time&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getAverageProcessingTime</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;queue_sizes&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getQueueSizes</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;admin.queue-dashboard&#39;</span><span class=p>,</span> <span class=nx>compact</span><span class=p>(</span><span class=s1>&#39;queueStats&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>getPendingJobsCount</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;jobs&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>getFailedJobsCount</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;failed_jobs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;failed_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&gt;&#39;</span><span class=p>,</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>subDay</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>getQueueSizes</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$queues</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;default&#39;</span><span class=p>,</span> <span class=s1>&#39;emails&#39;</span><span class=p>,</span> <span class=s1>&#39;high-priority&#39;</span><span class=p>,</span> <span class=s1>&#39;reports&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=nv>$sizes</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$queues</span> <span class=k>as</span> <span class=nv>$queue</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$sizes</span><span class=p>[</span><span class=nv>$queue</span><span class=p>]</span> <span class=o>=</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;jobs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;queue&#39;</span><span class=p>,</span> <span class=nv>$queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$sizes</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=queue-health-checks>Queue Health Checks</h3><p>Monitor queue health automatically:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>QueueHealthCheck</span> <span class=k>extends</span> <span class=nx>Command</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$signature</span> <span class=o>=</span> <span class=s1>&#39;queue:health-check&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$description</span> <span class=o>=</span> <span class=s1>&#39;Check queue health and alert if issues found&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>checkQueueSize</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>checkFailedJobs</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>checkOldJobs</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>checkWorkerStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>checkQueueSize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$pendingJobs</span> <span class=o>=</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;jobs&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nv>$pendingJobs</span> <span class=o>&gt;</span> <span class=mi>1000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>alert</span><span class=p>(</span><span class=s2>&#34;High queue backlog: </span><span class=si>{</span><span class=nv>$pendingJobs</span><span class=si>}</span><span class=s2> pending jobs&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// Send notification to team
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>Notification</span><span class=o>::</span><span class=na>route</span><span class=p>(</span><span class=s1>&#39;slack&#39;</span><span class=p>,</span> <span class=nx>config</span><span class=p>(</span><span class=s1>&#39;monitoring.slack_webhook&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=o>-&gt;</span><span class=na>notify</span><span class=p>(</span><span class=k>new</span> <span class=nx>QueueBacklogAlert</span><span class=p>(</span><span class=nv>$pendingJobs</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>checkFailedJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$recentFailures</span> <span class=o>=</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;failed_jobs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;failed_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&gt;&#39;</span><span class=p>,</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>subHour</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nv>$recentFailures</span> <span class=o>&gt;</span> <span class=mi>10</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>alert</span><span class=p>(</span><span class=s2>&#34;High failure rate: </span><span class=si>{</span><span class=nv>$recentFailures</span><span class=si>}</span><span class=s2> jobs failed in the last hour&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>checkOldJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$oldJobs</span> <span class=o>=</span> <span class=nx>DB</span><span class=o>::</span><span class=na>table</span><span class=p>(</span><span class=s1>&#39;jobs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;&#39;</span><span class=p>,</span> <span class=nx>now</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>subHours</span><span class=p>(</span><span class=mi>6</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nv>$oldJobs</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>warn</span><span class=p>(</span><span class=s2>&#34;Found </span><span class=si>{</span><span class=nv>$oldJobs</span><span class=si>}</span><span class=s2> jobs older than 6 hours - workers may not be running&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>For detailed monitoring and alerting strategies, explore our <a href=/2025/09/laravel-production-monitoring-error-tracking.html>Laravel production monitoring guide
</a>.</p><h2 id=performance-optimization>Performance Optimization</h2><p>As your application grows, you&rsquo;ll need to optimize queue performance. Here are proven strategies.</p><h3 id=queue-prioritization>Queue Prioritization</h3><p>Process important jobs first:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// In your worker command
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>php</span> <span class=nx>artisan</span> <span class=nx>queue</span><span class=o>:</span><span class=nx>work</span> <span class=o>--</span><span class=nx>queue</span><span class=o>=</span><span class=nx>critical</span><span class=p>,</span><span class=nx>high</span><span class=p>,</span><span class=nx>normal</span><span class=p>,</span><span class=nx>low</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Or in your job
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>UrgentNotification</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$queue</span> <span class=o>=</span> <span class=s1>&#39;critical&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// This job will be processed before others
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h3 id=memory-management>Memory Management</h3><p>Prevent memory leaks in long-running workers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessLargeDataset</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$datasetId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$dataset</span> <span class=o>=</span> <span class=nx>Dataset</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>datasetId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Process in chunks to manage memory
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$dataset</span><span class=o>-&gt;</span><span class=na>records</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>chunk</span><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$records</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>foreach</span> <span class=p>(</span><span class=nv>$records</span> <span class=k>as</span> <span class=nv>$record</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>processRecord</span><span class=p>(</span><span class=nv>$record</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// Force garbage collection for large datasets
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>memory_get_usage</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>100</span> <span class=o>*</span> <span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 100MB
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>gc_collect_cycles</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Clear any loaded relationships to free memory
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$dataset</span><span class=o>-&gt;</span><span class=na>unsetRelations</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=database-connection-management>Database Connection Management</h3><p>Handle database connections properly in queued jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>DatabaseIntensiveJob</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Your database operations here
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>performDatabaseOperations</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Disconnect to prevent connection leaks
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>DB</span><span class=o>::</span><span class=na>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=horizon-for-redis-queues>Horizon for Redis Queues</h3><p>If you&rsquo;re using Redis, Laravel Horizon provides a beautiful dashboard and auto-scaling:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composer require laravel/horizon
</span></span><span class=line><span class=cl>php artisan horizon:install
</span></span><span class=line><span class=cl>php artisan migrate
</span></span></code></pre></div><p>Configure Horizon for auto-scaling:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// config/horizon.php
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;environments&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;production&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;supervisor-1&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;connection&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;redis&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;queue&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s1>&#39;default&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;balance&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;auto&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;autoScalingStrategy&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;time&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;minProcesses&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;maxProcesses&#39;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;balanceMaxShift&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;balanceCooldown&#39;</span> <span class=o>=&gt;</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;tries&#39;</span> <span class=o>=&gt;</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>],</span>
</span></span></code></pre></div><h2 id=testing-queue-jobs>Testing Queue Jobs</h2><p>Testing queued jobs requires special considerations since they run asynchronously.</p><h3 id=testing-job-dispatch>Testing Job Dispatch</h3><p>Test that jobs are queued correctly:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserRegistrationTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_welcome_email_is_queued_after_registration</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Queue</span><span class=o>::</span><span class=na>fake</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$userData</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;name&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;John Doe&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;email&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;john@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$response</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post</span><span class=p>(</span><span class=s1>&#39;/register&#39;</span><span class=p>,</span> <span class=nv>$userData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$response</span><span class=o>-&gt;</span><span class=na>assertStatus</span><span class=p>(</span><span class=mi>302</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>Queue</span><span class=o>::</span><span class=na>assertPushed</span><span class=p>(</span><span class=nx>SendWelcomeEmail</span><span class=o>::</span><span class=na>class</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_welcome_email_job_has_correct_user</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Queue</span><span class=o>::</span><span class=na>fake</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>SendWelcomeEmail</span><span class=o>::</span><span class=na>dispatch</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>Queue</span><span class=o>::</span><span class=na>assertPushed</span><span class=p>(</span><span class=nx>SendWelcomeEmail</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$job</span><span class=p>)</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nv>$job</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>id</span> <span class=o>===</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=testing-job-execution>Testing Job Execution</h3><p>Test the actual job logic:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>SendWelcomeEmailTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_welcome_email_is_sent</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Mail</span><span class=o>::</span><span class=na>fake</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SendWelcomeEmail</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span><span class=o>-&gt;</span><span class=na>handle</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>Mail</span><span class=o>::</span><span class=na>assertSent</span><span class=p>(</span><span class=nx>WelcomeEmail</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$mail</span><span class=p>)</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nv>$mail</span><span class=o>-&gt;</span><span class=na>hasTo</span><span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=na>email</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_job_handles_invalid_user</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>delete</span><span class=p>();</span> <span class=c1>// Simulate deleted user
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SendWelcomeEmail</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Should not throw exception
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertNull</span><span class=p>(</span><span class=nv>$job</span><span class=o>-&gt;</span><span class=na>handle</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=testing-failed-jobs>Testing Failed Jobs</h3><p>Test failure scenarios:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessPaymentTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_job_fails_gracefully_with_invalid_payment</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$order</span> <span class=o>=</span> <span class=nx>Order</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ProcessPayment</span><span class=p>(</span><span class=nv>$order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Mock payment service to throw exception
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>mock</span><span class=p>(</span><span class=nx>PaymentService</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$mock</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$mock</span><span class=o>-&gt;</span><span class=na>shouldReceive</span><span class=p>(</span><span class=s1>&#39;charge&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>andThrow</span><span class=p>(</span><span class=k>new</span> <span class=nx>PaymentException</span><span class=p>(</span><span class=s1>&#39;Invalid card&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>expectException</span><span class=p>(</span><span class=nx>PaymentException</span><span class=o>::</span><span class=na>class</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span><span class=o>-&gt;</span><span class=na>handle</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_failed_method_updates_order_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$order</span> <span class=o>=</span> <span class=nx>Order</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ProcessPayment</span><span class=p>(</span><span class=nv>$order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$exception</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PaymentException</span><span class=p>(</span><span class=s1>&#39;Payment failed&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$job</span><span class=o>-&gt;</span><span class=na>failed</span><span class=p>(</span><span class=nv>$exception</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertEquals</span><span class=p>(</span><span class=s1>&#39;payment_failed&#39;</span><span class=p>,</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>fresh</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=security-considerations>Security Considerations</h2><p>Queue jobs can access sensitive data and perform critical operations, so security is important.</p><h3 id=input-validation>Input Validation</h3><p>Always validate data in your jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessUserData</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$userData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=k>array</span> <span class=nv>$userData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userData</span> <span class=o>=</span> <span class=nv>$userData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Validate data even in background jobs
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$validator</span> <span class=o>=</span> <span class=nx>Validator</span><span class=o>::</span><span class=na>make</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userData</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;email&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;required|email&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;name&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;required|string|max:255&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;age&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;integer|min:0|max:150&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nv>$validator</span><span class=o>-&gt;</span><span class=na>fails</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Log</span><span class=o>::</span><span class=na>error</span><span class=p>(</span><span class=s1>&#39;Invalid data in job&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;data&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;errors&#39;</span> <span class=o>=&gt;</span> <span class=nv>$validator</span><span class=o>-&gt;</span><span class=na>errors</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Process validated data
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>processValidatedData</span><span class=p>(</span><span class=nv>$validator</span><span class=o>-&gt;</span><span class=na>validated</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=authorization-checks>Authorization Checks</h3><p>Ensure jobs respect user permissions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>DeleteUserAccount</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$requestedByUserId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nv>$userId</span><span class=p>,</span> <span class=nv>$requestedByUserId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span> <span class=o>=</span> <span class=nv>$userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedByUserId</span> <span class=o>=</span> <span class=nv>$requestedByUserId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$requestedBy</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedByUserId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Check if user still exists and requester has permission
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$user</span> <span class=o>||</span> <span class=o>!</span><span class=nv>$requestedBy</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Log</span><span class=o>::</span><span class=na>warning</span><span class=p>(</span><span class=s1>&#39;User deletion job failed - user not found&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;requested_by&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedByUserId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Only admins or the user themselves can delete accounts
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nv>$requestedBy</span><span class=o>-&gt;</span><span class=na>id</span> <span class=o>!==</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>id</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=nv>$requestedBy</span><span class=o>-&gt;</span><span class=na>isAdmin</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Log</span><span class=o>::</span><span class=na>warning</span><span class=p>(</span><span class=s1>&#39;Unauthorized user deletion attempt&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;requested_by&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>requestedByUserId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Proceed with deletion
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>delete</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=sensitive-data-handling>Sensitive Data Handling</h3><p>Be careful with sensitive data in jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessCreditCard</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$encryptedCardData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$orderId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nv>$cardData</span><span class=p>,</span> <span class=nv>$orderId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Encrypt sensitive data before queuing
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>encryptedCardData</span> <span class=o>=</span> <span class=nx>encrypt</span><span class=p>(</span><span class=nv>$cardData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderId</span> <span class=o>=</span> <span class=nv>$orderId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Decrypt data when processing
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nv>$cardData</span> <span class=o>=</span> <span class=nx>decrypt</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>encryptedCardData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// Process payment
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>processPayment</span><span class=p>(</span><span class=nv>$cardData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Clear sensitive data from memory
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>encryptedCardData</span> <span class=o>=</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nv>$cardData</span> <span class=o>=</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Don&#39;t store sensitive data in failed jobs table
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>failed</span><span class=p>(</span><span class=nx>Throwable</span> <span class=nv>$exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Log</span><span class=o>::</span><span class=na>error</span><span class=p>(</span><span class=s1>&#39;Payment processing failed&#39;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;order_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;error&#39;</span> <span class=o>=&gt;</span> <span class=nv>$exception</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Don&#39;t log card data!
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>For comprehensive security practices, review our <a href=/2025/09/laravel-security-best-practices-production.html>Laravel security best practices guide
</a>.</p><h2 id=common-pitfalls-and-solutions>Common Pitfalls and Solutions</h2><p>Here are the most common issues developers face with Laravel queues and how to solve them.</p><h3 id=memory-leaks-in-workers>Memory Leaks in Workers</h3><p>Long-running workers can accumulate memory. Solution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Restart workers periodically</span>
</span></span><span class=line><span class=cl>php artisan queue:work --max-jobs<span class=o>=</span><span class=m>1000</span> --max-time<span class=o>=</span><span class=m>3600</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Monitor memory usage</span>
</span></span><span class=line><span class=cl>php artisan queue:work --memory<span class=o>=</span><span class=m>512</span>
</span></span></code></pre></div><h3 id=database-connection-timeouts>Database Connection Timeouts</h3><p>Workers that run for hours may lose database connections:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>LongRunningJob</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Check connection before database operations
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>DB</span><span class=o>::</span><span class=na>reconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// Your database operations
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>performDatabaseWork</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>QueryException</span> <span class=nv>$e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Retry with fresh connection
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>DB</span><span class=o>::</span><span class=na>reconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>performDatabaseWork</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=job-serialization-issues>Job Serialization Issues</h3><p>Be careful with what you pass to jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// Bad - Eloquent models can become stale
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>BadJob</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$user</span><span class=p>;</span> <span class=c1>// This user data can become outdated
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>User</span> <span class=nv>$user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span> <span class=o>=</span> <span class=nv>$user</span><span class=p>;</span> <span class=c1>// Serializes entire model
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Good - Pass IDs and reload fresh data
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>GoodJob</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nv>$userId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span> <span class=o>=</span> <span class=nv>$userId</span><span class=p>;</span> <span class=c1>// Only store ID
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>handle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>find</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>);</span> <span class=c1>// Load fresh data
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Log</span><span class=o>::</span><span class=na>warning</span><span class=p>(</span><span class=s1>&#39;User not found in job&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Work with fresh user data
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=duplicate-job-prevention>Duplicate Job Prevention</h3><p>Prevent the same job from being queued multiple times:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>SendDailyReport</span> <span class=k>implements</span> <span class=nx>ShouldQueue</span><span class=p>,</span> <span class=nx>ShouldBeUnique</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>Dispatchable</span><span class=p>,</span> <span class=nx>InteractsWithQueue</span><span class=p>,</span> <span class=nx>Queueable</span><span class=p>,</span> <span class=nx>SerializesModels</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=nv>$date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nv>$date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>date</span> <span class=o>=</span> <span class=nv>$date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Define uniqueness
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>uniqueId</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;daily-report-&#39;</span> <span class=o>.</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// How long to maintain uniqueness lock
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>uniqueFor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>3600</span><span class=p>;</span> <span class=c1>// 1 hour
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Laravel queues are one of those features that seem complex at first but become indispensable once you understand them. They&rsquo;re the key to building responsive applications that can handle heavy workloads without making users wait.</p><p>Start simple with the database driver for development and testing. As your needs grow, move to Redis for better performance or SQS for cloud scalability. Focus on these fundamentals:</p><ul><li>Queue time-consuming tasks like emails, file processing, and API calls</li><li>Use proper error handling and retry logic</li><li>Monitor your queues to catch issues early</li><li>Test your jobs thoroughly</li><li>Be mindful of security when handling sensitive data</li></ul><p>The difference between a sluggish app and a snappy one often comes down to smart use of background processing. With Laravel&rsquo;s queue system, you have all the tools you need to build applications that feel fast and responsive, no matter how much work they&rsquo;re doing behind the scenes.</p><p>Remember, the best queue implementation is one that your users never notice - they just know your app feels fast and reliable. Start implementing queues in your next project, and your users (and your servers) will thank you for it.</p></p><div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded"><h2 class="text-lg font-semibold mb-2">ðŸ“Œ Read Also</h2><ul class="list-disc list-outside ml-5"><li><a href=/2025/10/how-to-build-multi-tenant-applications-laravel.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Build Multi-Tenant Applications in Laravel</a></li><li><a href=/2025/10/how-to-implement-laravel-socialite-oauth-login-google-facebook-github.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Implement Laravel Socialite for OAuth Login (Google, Facebook, GitHub)</a></li><li><a href=/2025/10/how-to-set-up-automated-testing-laravel-phpunit-pest.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Set Up Automated Testing in Laravel with PHPUnit and Pest</a></li></ul></div><div class="hidden lg:block"><div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><div class="block lg:hidden my-8 px-2 mb-10"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:50px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="lg:hidden mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><div class="grid gap-3"><a href=/2025/10/how-to-manage-firewall-linux-ufw-firewalld.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Set Up and Manage Firewall on Linux with UFW and Firewalld</h4><p class="text-xs text-gray-500 dark:text-gray-400">25 Oct 2025</p></a><a href=/2025/10/how-to-secure-ssh-server-ubuntu-hardening-guide.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Secure SSH Server on Ubuntu - Complete Hardening Guide</h4><p class="text-xs text-gray-500 dark:text-gray-400">25 Oct 2025</p></a><a href=/2025/10/how-to-build-multi-tenant-applications-laravel.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Build Multi-Tenant Applications in Laravel</h4><p class="text-xs text-gray-500 dark:text-gray-400">24 Oct 2025</p></a><a href=/2025/10/how-to-implement-laravel-socialite-oauth-login-google-facebook-github.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Implement Laravel Socialite for OAuth Login (Google, Facebook, GitHub)</h4><p class="text-xs text-gray-500 dark:text-gray-400">24 Oct 2025</p></a><a href=/2025/10/how-to-set-up-automated-testing-laravel-phpunit-pest.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Set Up Automated Testing in Laravel with PHPUnit and Pest</h4><p class="text-xs text-gray-500 dark:text-gray-400">23 Oct 2025</p></a></div></div><div class="my-8 py-6"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block data-ad-format=autorelaxed data-ad-client=ca-pub-3149036684216973 data-ad-slot=7106179106></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="not-prose my-12 -mx-4 sm:-mx-6 lg:mx-0"><div class=max-w-full><div class=mb-8><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2">Frequently Asked Questions</h2><p class="text-gray-600 dark:text-gray-400">Find quick answers to common questions</p></div><ul class="faq-list space-y-0 list-none p-0 m-0"><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">Should I use database, Redis, or SQS for Laravel queues?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Start with database driver for development and small appsâ€”it requires no extra services and is simple to debug. Switch to Redis for production when you need better performance (10x+ faster than database), advanced features like delayed jobs, or horizontal scaling across multiple servers. Choose Amazon SQS when you need automatic scaling, managed infrastructure, or when already on AWS. Most production apps use Redis (via Laravel Horizon) for the best balance of performance, features, and ease of management. Avoid sync driver in productionâ€”it processes jobs immediately, defeating the purpose.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">What's the difference between dispatch() and dispatchSync() for queue jobs?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>dispatch() queues the job to run in the background via queue workers, allowing your application to respond immediately while the job processes later. dispatchSync() runs the job immediately in the same request, blocking the response until completeâ€”use only for testing or when you absolutely need immediate execution with rollback support. dispatchAfterResponse() queues the job but waits until after the HTTP response is sent, good for logging or cleanup that doesn&rsquo;t need full background processing. For async processing, always use dispatch(), not dispatchSync().</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">How do I prevent memory leaks in long-running queue workers?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Use &ndash;max-jobs=1000 to restart workers after processing 1000 jobs, &ndash;max-time=3600 to restart after 1 hour, and &ndash;memory=512 to stop when memory exceeds 512MB. In jobs, process large datasets with chunk(1000) instead of get()->each(), call unsetRelations() after processing models, and use gc_collect_cycles() for very large operations. Use Supervisor to automatically restart crashed workers. Horizon (for Redis) handles this automatically. Monitor with php artisan queue:monitor. Memory leaks occur when workers hold references to old models or dataâ€”restarting periodically prevents issues.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">Why are my queued jobs not processing?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Check: (1) Queue workers running? Run php artisan queue:work to start workers, use Supervisor in production for auto-restart. (2) Correct queue connection? Verify QUEUE_CONNECTION in .env matches your queue:work connection parameter. (3) Wrong queue name? Jobs on &rsquo;emails&rsquo; queue won&rsquo;t process if worker listens to &lsquo;default&rsquo;. (4) Failed migrations? Run php artisan migrate for jobs/failed_jobs tables. (5) Redis/SQS configured properly? Check connection details. Use php artisan queue:monitor and check storage/logs/laravel.log. Run php artisan queue:failed to see failed jobs.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">Should I pass Eloquent models or IDs to queue jobs?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Pass IDs and reload models inside the job&rsquo;s handle() method. SerializesModels trait serializes only the model ID, but the model&rsquo;s state (attributes, relationships) at queue time can become stale by execution time. Inside handle(), call User::find($this->userId) to get fresh data and check if (!$user) return; in case it was deleted. This prevents working with outdated data or missing records. Only pass entire models when you need specific snapshot data that shouldn&rsquo;t change, but this is rare. For most cases: pass IDs, load fresh in handle().</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">How do I handle failed queue jobs in production?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Implement a failed() method in your job to handle final failure after all retries exhaustedâ€”update status, notify users, alert admins. Set reasonable retry counts (public $tries = 3) and backoff delays (public $backoff = [10, 30, 60]). Monitor with php artisan queue:failed | grep &lsquo;Last 24h&rsquo; in cron jobs. Use php artisan queue:retry all cautiouslyâ€”understand why jobs failed first. Log failures with context: Log::error(&lsquo;Job failed&rsquo;, [&lsquo;id&rsquo; => $this->id, &rsquo;error&rsquo; => $e->getMessage()]). Consider implementing a dashboard to review and retry failed jobs manually. Set up alerts when failed job count exceeds threshold.</div></div></details></li></ul></div></div><script type=application/ld+json>{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"\"Should I use database, Redis, or SQS for Laravel queues?\"","acceptedAnswer":{"@type":"Answer","text":"\"Start with database driver for development and small appsâ€”it requires no extra services and is simple to debug. Switch to Redis for production when you need better performance (10x+ faster than database), advanced features like delayed jobs, or horizontal scaling across multiple servers. Choose Amazon SQS when you need automatic scaling, managed infrastructure, or when already on AWS. Most production apps use Redis (via Laravel Horizon) for the best balance of performance, features, and ease of management. Avoid sync driver in productionâ€”it processes jobs immediately, defeating the purpose.\""}},{"@type":"Question","name":"\"What's the difference between dispatch() and dispatchSync() for queue jobs?\"","acceptedAnswer":{"@type":"Answer","text":"\"dispatch() queues the job to run in the background via queue workers, allowing your application to respond immediately while the job processes later. dispatchSync() runs the job immediately in the same request, blocking the response until completeâ€”use only for testing or when you absolutely need immediate execution with rollback support. dispatchAfterResponse() queues the job but waits until after the HTTP response is sent, good for logging or cleanup that doesn't need full background processing. For async processing, always use dispatch(), not dispatchSync().\""}},{"@type":"Question","name":"\"How do I prevent memory leaks in long-running queue workers?\"","acceptedAnswer":{"@type":"Answer","text":"\"Use --max-jobs=1000 to restart workers after processing 1000 jobs, --max-time=3600 to restart after 1 hour, and --memory=512 to stop when memory exceeds 512MB. In jobs, process large datasets with chunk(1000) instead of get()-\\u003eeach(), call unsetRelations() after processing models, and use gc_collect_cycles() for very large operations. Use Supervisor to automatically restart crashed workers. Horizon (for Redis) handles this automatically. Monitor with php artisan queue:monitor. Memory leaks occur when workers hold references to old models or dataâ€”restarting periodically prevents issues.\""}},{"@type":"Question","name":"\"Why are my queued jobs not processing?\"","acceptedAnswer":{"@type":"Answer","text":"\"Check: (1) Queue workers running? Run php artisan queue:work to start workers, use Supervisor in production for auto-restart. (2) Correct queue connection? Verify QUEUE_CONNECTION in .env matches your queue:work connection parameter. (3) Wrong queue name? Jobs on 'emails' queue won't process if worker listens to 'default'. (4) Failed migrations? Run php artisan migrate for jobs/failed_jobs tables. (5) Redis/SQS configured properly? Check connection details. Use php artisan queue:monitor and check storage/logs/laravel.log. Run php artisan queue:failed to see failed jobs.\""}},{"@type":"Question","name":"\"Should I pass Eloquent models or IDs to queue jobs?\"","acceptedAnswer":{"@type":"Answer","text":"\"Pass IDs and reload models inside the job's handle() method. SerializesModels trait serializes only the model ID, but the model's state (attributes, relationships) at queue time can become stale by execution time. Inside handle(), call User::find($this-\\u003euserId) to get fresh data and check if (!$user) return; in case it was deleted. This prevents working with outdated data or missing records. Only pass entire models when you need specific snapshot data that shouldn't change, but this is rare. For most cases: pass IDs, load fresh in handle().\""}},{"@type":"Question","name":"\"How do I handle failed queue jobs in production?\"","acceptedAnswer":{"@type":"Answer","text":"\"Implement a failed() method in your job to handle final failure after all retries exhaustedâ€”update status, notify users, alert admins. Set reasonable retry counts (public $tries = 3) and backoff delays (public $backoff = [10, 30, 60]). Monitor with php artisan queue:failed | grep 'Last 24h' in cron jobs. Use php artisan queue:retry all cautiouslyâ€”understand why jobs failed first. Log failures with context: Log::error('Job failed', ['id' =\\u003e $this-\\u003eid, 'error' =\\u003e $e-\\u003egetMessage()]). Consider implementing a dashboard to review and retry failed jobs manually. Set up alerts when failed job count exceeds threshold.\""}}]}</script><style>details.faq-details[open] .faq-arrow svg{transform:rotate(180deg)}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".faq-item");e.forEach(function(t){t.addEventListener("toggle",function(){this.open&&e.forEach(function(e){e!==t&&e.open&&(e.open=!1)})})})})</script></article><aside class="space-y-10 hidden lg:block"><div><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><ul class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"><li><a href=/2025/10/how-to-manage-firewall-linux-ufw-firewalld.html class="hover:text-[#0f7ea9] transition">How to Set Up and Manage Firewall on Linux with UFW and Firewalld</a></li><li><a href=/2025/10/how-to-secure-ssh-server-ubuntu-hardening-guide.html class="hover:text-[#0f7ea9] transition">How to Secure SSH Server on Ubuntu - Complete Hardening Guide</a></li><li><a href=/2025/10/how-to-build-multi-tenant-applications-laravel.html class="hover:text-[#0f7ea9] transition">How to Build Multi-Tenant Applications in Laravel</a></li><li><a href=/2025/10/how-to-implement-laravel-socialite-oauth-login-google-facebook-github.html class="hover:text-[#0f7ea9] transition">How to Implement Laravel Socialite for OAuth Login (Google, Facebook, GitHub)</a></li><li><a href=/2025/10/how-to-set-up-automated-testing-laravel-phpunit-pest.html class="hover:text-[#0f7ea9] transition">How to Set Up Automated Testing in Laravel with PHPUnit and Pest</a></li></ul></div></aside></div><section id=comments class=mt-12><script src=https://giscus.app/client.js data-repo=wikukarno/buanacoding data-repo-id=R_kgD0Oj4jAw data-category=General data-category-id=DIC_kwD0Oj4jA84Cr_fx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></main><div class=py-6><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300"><div class="text-center space-x-4 text-sm font-medium"><a href=/about class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
<span>-</span>
<a href=/contact class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
<span>-</span>
<a href=/privacy-policy class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
<span>-</span>
<a href=/disclaimer class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a></div></div><footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">&copy; 2025 buanacoding.com</footer><button id=scrollToTop class="fixed bottom-6 right-6 lg:bottom-6 lg:right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300 z-50" aria-label="Scroll to top">
<svg fill="none" class="w-4 h-4" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg></button><style>body.floating-ad-active #scrollToTop{bottom:100px!important}@media(min-width:1024px){body.floating-ad-active #scrollToTop{bottom:1.5rem!important}}</style><div id=google_translate_element style=display:none></div><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.4.6></script><script>feather.replace();const btn=document.getElementById("scrollToTop"),html=document.documentElement,toggleBtn=document.getElementById("theme-toggle"),toggleBtnMobile=document.getElementById("theme-toggle-mobile"),iconSun=document.getElementById("icon-sun"),iconMoon=document.getElementById("icon-moon"),iconSunMobile=document.getElementById("icon-sun-mobile"),iconMoonMobile=document.getElementById("icon-moon-mobile");document.getElementById("menu-toggle")?.addEventListener("click",()=>{document.getElementById("mobile-menu")?.classList.toggle("hidden")}),btn.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>300?btn.style.display="flex":btn.style.display="none"}),btn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});function updateIcons(e){iconSun.classList.toggle("hidden",!e),iconMoon.classList.toggle("hidden",e),iconSunMobile.classList.toggle("hidden",!e),iconMoonMobile.classList.toggle("hidden",e)}function setDarkMode(e){html.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light"),updateIcons(e)}const userPref=localStorage.getItem("theme"),systemPref=window.matchMedia("(prefers-color-scheme: dark)").matches,isDark=userPref==="dark"||!userPref&&systemPref;setDarkMode(isDark),toggleBtn?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),toggleBtnMobile?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),document.querySelectorAll("pre").forEach(e=>{const t=document.createElement("button");t.innerHTML=`
      <span>Copy</span>
    `,t.className=`
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();const n=document.createElement("div");n.className="relative",e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),t.addEventListener("click",()=>{const n=e.innerText;navigator.clipboard.writeText(n).then(()=>{t.querySelector("span").innerText="Copied!",setTimeout(()=>{t.querySelector("span").innerText="Copy"},2e3)})})});const openBtn=document.getElementById("openSearchModal"),closeBtn=document.getElementById("closeSearchModal"),modal=document.getElementById("searchModal");openBtn.addEventListener("click",()=>{console.log("Search modal opened"),modal.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtn.addEventListener("click",()=>{modal.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modal.classList.add("hidden")}),fetch("/index.json").then(e=>e.json()).then(e=>{const n=new Fuse(e,{keys:["title","content"],threshold:.3}),s=document.getElementById("searchBox"),t=document.getElementById("results");s.addEventListener("input",function(e){const o=e.target.value.trim(),s=document.getElementById("searchAdBanner");if(o.length<2){t.innerHTML="",s&&(s.classList.remove("show"),s.classList.add("hide"),setTimeout(()=>s.style.display="none",300));return}s&&(s.style.display="block",s.classList.remove("hide"),s.classList.add("show"));const i=n.search(o);if(i.length===0)t.innerHTML=`
            <li class='px-4 py-3 text-center text-gray-500 dark:text-gray-400'>
              <div class="mb-2">ðŸ“„ No results found for "${o}"</div>
              <div class="text-xs">Try different keywords or browse categories below</div>
            </li>
          `;else{let e="";i.forEach((t,n)=>{e+=`
              <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                <a href="${t.item.href}" class="block font-semibold text-gray-900 dark:text-white no-underline">${t.item.title}</a>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.item.content.substring(0,100)}...</p>
              </li>
            `,(n+1)%3===0&&n<i.length-1&&(e+=`
                <li class="px-4 py-2 bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                  <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">ðŸ“š More related articles</div>
                </li>
              `)}),t.innerHTML=e}})});const openBtnMobile=document.getElementById("openSearchModalMobile"),closeBtnMobile=document.getElementById("closeSearchModal"),modalMobile=document.getElementById("searchModal");openBtnMobile.addEventListener("click",()=>{console.log("Search modal opened (mobile)"),modalMobile.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtnMobile.addEventListener("click",()=>{modalMobile.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modalMobile.classList.add("hidden")}),function(){function t(e,t){if(window.google&&window.google.translate&&window.google.translate.TranslateElement){e&&e();return}if(window.__gtReadyCallbacks=window.__gtReadyCallbacks||[],e&&window.__gtReadyCallbacks.push(e),window.__gtLoading)return;window.__gtLoading=!0,window.initGoogleTranslate=function(){try{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"id",autoDisplay:!1},"google_translate_element")}catch{}(window.__gtReadyCallbacks||[]).forEach(function(e){try{e()}catch{}}),window.__gtReadyCallbacks=[]};var s,n=document.createElement("script");n.src="https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate",n.defer=!0,s=!1,n.onerror=function(){s=!0,t&&t()},setTimeout(function(){(!window.google||!window.google.translate)&&(s=!0,t&&t())},4e3),document.head.appendChild(n)}function n(e,t){document.cookie=e+"="+t+"; path=/; expires="+new Date(Date.now()+365*24*3600*1e3).toUTCString()}function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}function s(){if(document.getElementById("translate-fallback"))return;var e=document.createElement("div");e.id="translate-fallback",e.style.cssText="position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;",e.innerHTML='<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span><button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button><button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>',document.body.appendChild(e),document.getElementById("btnCloseTf").onclick=function(){e.remove()},document.getElementById("btnTryId").onclick=function(){var t=new URL(location.href),e=location.pathname;e.startsWith("/id/")||(t.pathname="/id"+(e.startsWith("/")?e:"/"+e)),fetch(t,{method:"HEAD"}).then(function(e){e.ok?location.href=t:location.href="/id/"}).catch(function(){location.href="/id/"})}}function o(e){t(function(){var t=document.querySelector(".goog-te-combo");t?(t.value=e,t.dispatchEvent(new Event("change"))):(n("googtrans","/en/"+e),location.reload())},s)}function i(){e("googtrans"),e("GOOGTRANS")}document.querySelectorAll(".js-lang-link").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-lang"),s=e.getAttribute("data-has-trans")==="true";if(n==="en"){i();return}s||(t.preventDefault(),o(n))})})}()</script></body></html>