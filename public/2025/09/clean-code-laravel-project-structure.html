<!doctype html><html lang=en data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Clean Code Laravel: Project Structure and Design Patterns Guide | Buana Coding</title><meta name=description content="Laravel clean code guide with proper project structure and design patterns. How to create maintainable and scalable Laravel code."><meta name=keywords content="coding,programming,web development,app development,tutorial,developer tips"><link rel=canonical href=https://www.buanacoding.com/2025/09/clean-code-laravel-project-structure.html><link rel=alternate hreflang=en href=https://www.buanacoding.com/2025/09/clean-code-laravel-project-structure.html><meta property="og:type" content="article"><meta property="og:title" content="Clean Code Laravel: Project Structure and Design Patterns Guide | Buana Coding"><meta property="og:description" content="Laravel clean code guide with proper project structure and design patterns. How to create maintainable and scalable Laravel code."><meta property="og:url" content="https://www.buanacoding.com/2025/09/clean-code-laravel-project-structure.html"><meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Clean Code Laravel: Project Structure and Design Patterns Guide | Buana Coding"><meta name=twitter:description content="Laravel clean code guide with proper project structure and design patterns. How to create maintainable and scalable Laravel code."><meta name=twitter:image content="https://www.buanacoding.com/images/og-image.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Clean Code Laravel: Project Structure and Design Patterns Guide | Buana Coding","description":"Laravel clean code guide with proper project structure and design patterns. How to create maintainable and scalable Laravel code.","inLanguage":"en","datePublished":"2025-09-08T09:00:00\u002b07:00","dateModified":"2025-09-08T09:00:00\u002b07:00","author":{"@type":"Person","name":"Wiku Karno"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.buanacoding.com\/2025\/09\/clean-code-laravel-project-structure.html"},"image":"https:\/\/www.buanacoding.com\/images\/og-image.jpg","publisher":{"@type":"Organization","name":"Buana Coding"}}</script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel=stylesheet><link rel=stylesheet href="/style.css?v=1757299904"><link rel=stylesheet href="/css/overrides.css?v=1757299904"><link rel=stylesheet href="/css/syntax.css?v=1757299904"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0EN9J73FXF")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3149036684216973" crossorigin=anonymous></script></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"><header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow"><div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-2xl font-extrabold tracking-wide"><a href=/ class=hover:opacity-90>BUANACODING</a></h1><nav class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"><a href=/tags/general class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="hidden md:flex items-center"><div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium"><a href=/2025/09/clean-code-laravel-project-structure.html data-lang=en data-has-trans=true class="js-lang-link px-2 py-1 bg-white/20 text-white">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">ID</a></div></div><button id=openSearchModal class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
</button>
<button id=theme-toggle class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer" aria-label="Toggle Dark Mode">
<i id=icon-sun data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon data-feather=moon class="w-5 h-5"></i></button></nav><button id=menu-toggle class="md:hidden text-2xl focus:outline-none">
☰</button></div><div id=mobile-menu class="hidden md:hidden px-4 pb-4 space-y-2"><a href=/tags/general class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="mt-8 space-y-6"><button id=openSearchModalMobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
<span class="text-sm font-medium">Search</span></button><div class="flex items-center justify-between py-2"><div class="flex items-center gap-4"><i data-feather=globe class="w-5 h-5 text-white/80"></i>
<span class="text-sm font-medium text-white">Language</span></div><div class="flex text-xs"><a href=/2025/09/clean-code-laravel-project-structure.html data-lang=en data-has-trans=true class="js-lang-link px-3 py-1.5 text-white font-medium">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-3 py-1.5 text-white/60 hover:text-white">ID</a></div></div><button id=theme-toggle-mobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label="Toggle Dark Mode">
<i id=icon-sun-mobile data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon-mobile data-feather=moon class="w-5 h-5"></i>
<span class="text-sm font-medium">Theme</span></button></div></div></header><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2"><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div id=searchModal class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"><div class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"><button id=closeSearchModal class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110">
<i data-feather=x class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"></i>
</button>
<input type=text id=searchBox placeholder="Search articles..." class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"><div id=searchAdBanner class="mt-4 mb-8 hidden"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class="adsbygoogle search-results-ad" style=display:block;min-height:100px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><style>#searchAdBanner{transition:opacity .3s ease-in-out,transform .3s ease-in-out}#searchAdBanner.show{display:block !important;opacity:1;transform:translateY(0)}#searchAdBanner.hide{opacity:0;transform:translateY(-10px)}.search-results-ad{max-height:100px;overflow:hidden}</style><ul id=results class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"></ul></div></div><main class="flex-1 w-full"><div class="max-w-7xl mx-auto py-8 px-4"><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8"><article class="prose prose-blue dark:prose-invert lg:col-span-2"><nav class="text-sm text-gray-600 dark:text-gray-300 mb-4"><a href=/ class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">Home</a>
<span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
<a href=/tags/laravel class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">#Laravel</a></nav><h1>Clean Code Laravel: Project Structure and Design Patterns Guide</h1><div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700"><span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
<a href="https://twitter.com/intent/tweet?text=Clean+Code+Laravel%3A+Project+Structure+and+Design+Patterns+Guide&url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fclean-code-laravel-project-structure.html&via=buanacoding" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Share on Twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fclean-code-laravel-project-structure.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on Facebook"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fclean-code-laravel-project-structure.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on LinkedIn"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://wa.me/?text=Clean+Code+Laravel%3A+Project+Structure+and+Design+Patterns+Guide%20https%3A%2F%2Fwww.buanacoding.com%2F2025%2F09%2Fclean-code-laravel-project-structure.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200" title="Share on WhatsApp"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.484 3.488"/></svg>
</a><button onclick='copyLinkHeader("https://www.buanacoding.com/2025/09/clean-code-laravel-project-structure.html")' class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Copy Link">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</button>
<span id=copy-header-success class="hidden text-xs text-green-600 dark:text-green-400 font-medium">Copied!</span></div><script>function copyLinkHeader(e){navigator.clipboard.writeText(e).then(function(){showHeaderSuccess()}).catch(function(){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),showHeaderSuccess()})}function showHeaderSuccess(){const e=document.getElementById("copy-header-success");e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},2e3)}</script><p>Writing clean, maintainable code in Laravel applications requires more than just understanding the framework&rsquo;s features. It demands a systematic approach to organizing your project structure, implementing proven design patterns, and following established best practices that make your codebase scalable and readable.</p><p>Laravel provides excellent flexibility, but this freedom can sometimes lead to messy codebases if developers don&rsquo;t establish clear conventions early on. This comprehensive guide will walk you through proven strategies for creating professional Laravel applications that are easy to maintain, test, and scale.</p><h2 id=understanding-clean-code-principles-in-laravel>Understanding Clean Code Principles in Laravel</h2><p>Clean code isn&rsquo;t just about making your code look pretty. It&rsquo;s about creating applications that other developers can easily understand, modify, and extend. In the Laravel ecosystem, this means leveraging the framework&rsquo;s conventions while adding your own organizational patterns.</p><div class="my-8 flex justify-center"><div class="w-full max-w-2xl"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-3149036684216973 data-ad-slot=2492895769></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><p>The foundation of clean Laravel code rests on several key principles: single responsibility, proper naming conventions, consistent file organization, and strategic use of Laravel&rsquo;s built-in features. These principles become especially important as your application grows beyond a simple CRUD interface.</p><h2 id=essential-laravel-project-structure>Essential Laravel Project Structure</h2><p>A well-organized Laravel project goes beyond the default directory structure. While Laravel&rsquo;s default organization works well for small applications, larger projects benefit from additional layers of organization that separate concerns more clearly.</p><h3 id=service-layer-architecture>Service Layer Architecture</h3><p>Implementing a service layer helps separate business logic from your controllers, making your code more testable and maintainable. Here&rsquo;s how to structure this approach:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Services</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\User</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Order</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\Facades\DB</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\Facades\Log</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>createOrder</span><span class=p>(</span><span class=nx>User</span> <span class=nv>$user</span><span class=p>,</span> <span class=k>array</span> <span class=nv>$orderData</span><span class=p>)</span><span class=o>:</span> <span class=nx>Order</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>DB</span><span class=o>::</span><span class=na>transaction</span><span class=p>(</span><span class=k>function</span> <span class=p>()</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$user</span><span class=p>,</span> <span class=nv>$orderData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Order</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>user_id</span> <span class=o>=</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>total_amount</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>calculateTotal</span><span class=p>(</span><span class=nv>$orderData</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>status</span> <span class=o>=</span> <span class=s1>&#39;pending&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>attachOrderItems</span><span class=p>(</span><span class=nv>$order</span><span class=p>,</span> <span class=nv>$orderData</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>sendOrderConfirmation</span><span class=p>(</span><span class=nv>$order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>Log</span><span class=o>::</span><span class=na>info</span><span class=p>(</span><span class=s1>&#39;Order created successfully&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;order_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nv>$order</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>calculateTotal</span><span class=p>(</span><span class=k>array</span> <span class=nv>$items</span><span class=p>)</span><span class=o>:</span> <span class=nx>float</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>collect</span><span class=p>(</span><span class=nv>$items</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>sum</span><span class=p>(</span><span class=k>function</span> <span class=p>(</span><span class=nv>$item</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nv>$item</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>*</span> <span class=nv>$item</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>attachOrderItems</span><span class=p>(</span><span class=nx>Order</span> <span class=nv>$order</span><span class=p>,</span> <span class=k>array</span> <span class=nv>$items</span><span class=p>)</span><span class=o>:</span> <span class=nx>void</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$items</span> <span class=k>as</span> <span class=nv>$item</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;product_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$item</span><span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;quantity&#39;</span> <span class=o>=&gt;</span> <span class=nv>$item</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;price&#39;</span> <span class=o>=&gt;</span> <span class=nv>$item</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>sendOrderConfirmation</span><span class=p>(</span><span class=nx>Order</span> <span class=nv>$order</span><span class=p>)</span><span class=o>:</span> <span class=nx>void</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Implementation for sending order confirmation
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This service class encapsulates all order-related business logic, making it reusable across different parts of your application. Your controller becomes much simpler:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Http\Controllers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Services\OrderService</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Http\Requests\CreateOrderRequest</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Http\JsonResponse</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderController</span> <span class=k>extends</span> <span class=nx>Controller</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=nx>OrderService</span> <span class=nv>$orderService</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>OrderService</span> <span class=nv>$orderService</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderService</span> <span class=o>=</span> <span class=nv>$orderService</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>store</span><span class=p>(</span><span class=nx>CreateOrderRequest</span> <span class=nv>$request</span><span class=p>)</span><span class=o>:</span> <span class=nx>JsonResponse</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$order</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderService</span><span class=o>-&gt;</span><span class=na>createOrder</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>auth</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>user</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>validated</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>response</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>json</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;Order created successfully&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;order&#39;</span> <span class=o>=&gt;</span> <span class=nv>$order</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span> <span class=mi>201</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=repository-pattern-implementation>Repository Pattern Implementation</h3><p>The Repository pattern provides an abstraction layer between your business logic and data access logic. This pattern becomes invaluable when you need to switch data sources or implement complex querying logic.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Repositories</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Product</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Database\Eloquent\Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>interface</span> <span class=nx>ProductRepositoryInterface</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findById</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$id</span><span class=p>)</span><span class=o>:</span> <span class=o>?</span><span class=nx>Product</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findByCategory</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$category</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findFeaturedProducts</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$limit</span> <span class=o>=</span> <span class=mi>10</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>searchByName</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$name</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductRepository</span> <span class=k>implements</span> <span class=nx>ProductRepositoryInterface</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findById</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$id</span><span class=p>)</span><span class=o>:</span> <span class=o>?</span><span class=nx>Product</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>Product</span><span class=o>::</span><span class=na>with</span><span class=p>([</span><span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;images&#39;</span><span class=p>])</span><span class=o>-&gt;</span><span class=na>find</span><span class=p>(</span><span class=nv>$id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findByCategory</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$category</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>Product</span><span class=o>::</span><span class=na>whereHas</span><span class=p>(</span><span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$query</span><span class=p>)</span> <span class=k>use</span> <span class=p>(</span><span class=nv>$category</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;slug&#39;</span><span class=p>,</span> <span class=nv>$category</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span><span class=o>-&gt;</span><span class=na>with</span><span class=p>([</span><span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;images&#39;</span><span class=p>])</span><span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>findFeaturedProducts</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$limit</span> <span class=o>=</span> <span class=mi>10</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>Product</span><span class=o>::</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;is_featured&#39;</span><span class=p>,</span> <span class=k>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>with</span><span class=p>([</span><span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;images&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>limit</span><span class=p>(</span><span class=nv>$limit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>searchByName</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$name</span><span class=p>)</span><span class=o>:</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>Product</span><span class=o>::</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;LIKE&#39;</span><span class=p>,</span> <span class=s2>&#34;%</span><span class=si>{</span><span class=nv>$name</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>with</span><span class=p>([</span><span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;images&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Don&rsquo;t forget to bind your repository in a service provider:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Providers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Support\ServiceProvider</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Repositories\ProductRepositoryInterface</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Repositories\ProductRepository</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RepositoryServiceProvider</span> <span class=k>extends</span> <span class=nx>ServiceProvider</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>()</span><span class=o>:</span> <span class=nx>void</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>app</span><span class=o>-&gt;</span><span class=na>bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>ProductRepositoryInterface</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>ProductRepository</span><span class=o>::</span><span class=na>class</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=advanced-directory-organization>Advanced Directory Organization</h2><p>As your Laravel application grows, the default directory structure might not be sufficient. Consider creating additional directories that reflect your application&rsquo;s domain:</p><pre tabindex=0><code>app/
├── Actions/
│   ├── Orders/
│   │   ├── CreateOrderAction.php
│   │   └── UpdateOrderStatusAction.php
│   └── Users/
│       ├── RegisterUserAction.php
│       └── UpdateUserProfileAction.php
├── DataTransferObjects/
│   ├── OrderDTO.php
│   └── UserDTO.php
├── Repositories/
│   ├── Contracts/
│   │   ├── OrderRepositoryInterface.php
│   │   └── UserRepositoryInterface.php
│   ├── OrderRepository.php
│   └── UserRepository.php
├── Services/
│   ├── OrderService.php
│   ├── PaymentService.php
│   └── NotificationService.php
└── ValueObjects/
    ├── Money.php
    └── Email.php
</code></pre><h3 id=data-transfer-objects-dtos>Data Transfer Objects (DTOs)</h3><p>DTOs help you maintain clean interfaces between different layers of your application:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\DataTransferObjects</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderDTO</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=nx>readonly</span> <span class=nx>int</span> <span class=nv>$userId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=nx>readonly</span> <span class=k>array</span> <span class=nv>$items</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=nx>readonly</span> <span class=nx>string</span> <span class=nv>$shippingAddress</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=nx>readonly</span> <span class=o>?</span><span class=nx>string</span> <span class=nv>$notes</span> <span class=o>=</span> <span class=k>null</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>fromRequest</span><span class=p>(</span><span class=k>array</span> <span class=nv>$data</span><span class=p>)</span><span class=o>:</span> <span class=nx>self</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nx>self</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>userId</span><span class=o>:</span> <span class=nv>$data</span><span class=p>[</span><span class=s1>&#39;user_id&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>items</span><span class=o>:</span> <span class=nv>$data</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>shippingAddress</span><span class=o>:</span> <span class=nv>$data</span><span class=p>[</span><span class=s1>&#39;shipping_address&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>notes</span><span class=o>:</span> <span class=nv>$data</span><span class=p>[</span><span class=s1>&#39;notes&#39;</span><span class=p>]</span> <span class=o>??</span> <span class=k>null</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>toArray</span><span class=p>()</span><span class=o>:</span> <span class=k>array</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>userId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;items&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;shipping_address&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>shippingAddress</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;notes&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>notes</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=action-classes-for-single-responsibility>Action Classes for Single Responsibility</h3><p>Action classes encapsulate single business operations, making your code more focused and testable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Actions\Orders</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Order</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\DataTransferObjects\OrderDTO</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Services\PaymentService</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Services\InventoryService</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Services\NotificationService</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CreateOrderAction</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=k>private</span> <span class=nx>PaymentService</span> <span class=nv>$paymentService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>private</span> <span class=nx>InventoryService</span> <span class=nv>$inventoryService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>private</span> <span class=nx>NotificationService</span> <span class=nv>$notificationService</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>execute</span><span class=p>(</span><span class=nx>OrderDTO</span> <span class=nv>$orderDTO</span><span class=p>)</span><span class=o>:</span> <span class=nx>Order</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Check inventory availability
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>inventoryService</span><span class=o>-&gt;</span><span class=na>checkAvailability</span><span class=p>(</span><span class=nv>$orderDTO</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Create the order
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$order</span> <span class=o>=</span> <span class=nx>Order</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$orderDTO</span><span class=o>-&gt;</span><span class=na>toArray</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Process payment
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$payment</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>paymentService</span><span class=o>-&gt;</span><span class=na>processPayment</span><span class=p>(</span><span class=nv>$order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Update inventory
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>inventoryService</span><span class=o>-&gt;</span><span class=na>reserveItems</span><span class=p>(</span><span class=nv>$orderDTO</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Send notifications
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>notificationService</span><span class=o>-&gt;</span><span class=na>sendOrderConfirmation</span><span class=p>(</span><span class=nv>$order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>fresh</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=model-organization-and-relationships>Model Organization and Relationships</h2><p>Proper model organization extends beyond just defining relationships. Consider implementing model concerns, observers, and custom collections to keep your models clean and focused.</p><h3 id=using-model-concerns>Using Model Concerns</h3><p>Organize common model behavior into reusable concerns:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Models\Concerns</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Database\Eloquent\Builder</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>trait</span> <span class=nx>HasActiveScope</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>scopeActive</span><span class=p>(</span><span class=nx>Builder</span> <span class=nv>$query</span><span class=p>)</span><span class=o>:</span> <span class=nx>Builder</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;is_active&#39;</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>scopeInactive</span><span class=p>(</span><span class=nx>Builder</span> <span class=nv>$query</span><span class=p>)</span><span class=o>:</span> <span class=nx>Builder</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$query</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;is_active&#39;</span><span class=p>,</span> <span class=k>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>activate</span><span class=p>()</span><span class=o>:</span> <span class=nx>bool</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span><span class=s1>&#39;is_active&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>deactivate</span><span class=p>()</span><span class=o>:</span> <span class=nx>bool</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>update</span><span class=p>([</span><span class=s1>&#39;is_active&#39;</span> <span class=o>=&gt;</span> <span class=k>false</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=custom-collections-for-enhanced-functionality>Custom Collections for Enhanced Functionality</h3><p>Create custom collections to add domain-specific methods:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Collections</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Database\Eloquent\Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Order</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderCollection</span> <span class=k>extends</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>pending</span><span class=p>()</span><span class=o>:</span> <span class=nx>self</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filter</span><span class=p>(</span><span class=nx>fn</span><span class=p>(</span><span class=nx>Order</span> <span class=nv>$order</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>status</span> <span class=o>===</span> <span class=s1>&#39;pending&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>completed</span><span class=p>()</span><span class=o>:</span> <span class=nx>self</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>filter</span><span class=p>(</span><span class=nx>fn</span><span class=p>(</span><span class=nx>Order</span> <span class=nv>$order</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>status</span> <span class=o>===</span> <span class=s1>&#39;completed&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>totalRevenue</span><span class=p>()</span><span class=o>:</span> <span class=nx>float</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>sum</span><span class=p>(</span><span class=s1>&#39;total_amount&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>averageOrderValue</span><span class=p>()</span><span class=o>:</span> <span class=nx>float</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>avg</span><span class=p>(</span><span class=s1>&#39;total_amount&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Then use it in your model:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Models</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Database\Eloquent\Model</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Collections\OrderCollection</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span> <span class=k>extends</span> <span class=nx>Model</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>newCollection</span><span class=p>(</span><span class=k>array</span> <span class=nv>$models</span> <span class=o>=</span> <span class=p>[])</span><span class=o>:</span> <span class=nx>OrderCollection</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nx>OrderCollection</span><span class=p>(</span><span class=nv>$models</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=testing-clean-code-architecture>Testing Clean Code Architecture</h2><p>Clean architecture makes testing easier. Here&rsquo;s how to test your service layer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>Tests\Unit\Services</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Tests\TestCase</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Services\OrderService</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\User</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Product</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Foundation\Testing\RefreshDatabase</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderServiceTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>use</span> <span class=nx>RefreshDatabase</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=nx>OrderService</span> <span class=nv>$orderService</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>setUp</span><span class=p>()</span><span class=o>:</span> <span class=nx>void</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>parent</span><span class=o>::</span><span class=na>setUp</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderService</span> <span class=o>=</span> <span class=nx>app</span><span class=p>(</span><span class=nx>OrderService</span><span class=o>::</span><span class=na>class</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test_creates_order_successfully</span><span class=p>()</span><span class=o>:</span> <span class=nx>void</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$product</span> <span class=o>=</span> <span class=nx>Product</span><span class=o>::</span><span class=na>factory</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>([</span><span class=s1>&#39;price&#39;</span> <span class=o>=&gt;</span> <span class=mi>100</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nv>$orderData</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;items&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;product_id&#39;</span> <span class=o>=&gt;</span> <span class=nv>$product</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;quantity&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;price&#39;</span> <span class=o>=&gt;</span> <span class=nv>$product</span><span class=o>-&gt;</span><span class=na>price</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nv>$order</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>orderService</span><span class=o>-&gt;</span><span class=na>createOrder</span><span class=p>(</span><span class=nv>$user</span><span class=p>,</span> <span class=nv>$orderData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertEquals</span><span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>user_id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertEquals</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>total_amount</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertEquals</span><span class=p>(</span><span class=s1>&#39;pending&#39;</span><span class=p>,</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertCount</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nv>$order</span><span class=o>-&gt;</span><span class=na>items</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=performance-considerations-in-clean-architecture>Performance Considerations in Clean Architecture</h2><p>While clean architecture provides many benefits, it&rsquo;s important to consider performance implications. Use Laravel&rsquo;s query optimization features strategically:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nx>App\Services</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>App\Models\Order</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nx>Illuminate\Database\Eloquent\Collection</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderReportService</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>getMonthlyReport</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$year</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$month</span><span class=p>)</span><span class=o>:</span> <span class=k>array</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$orders</span> <span class=o>=</span> <span class=nx>Order</span><span class=o>::</span><span class=na>with</span><span class=p>([</span><span class=s1>&#39;items.product&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                      <span class=o>-&gt;</span><span class=na>whereYear</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=nv>$year</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                      <span class=o>-&gt;</span><span class=na>whereMonth</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=nv>$month</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                      <span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_orders&#39;</span> <span class=o>=&gt;</span> <span class=nv>$orders</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_revenue&#39;</span> <span class=o>=&gt;</span> <span class=nv>$orders</span><span class=o>-&gt;</span><span class=na>sum</span><span class=p>(</span><span class=s1>&#39;total_amount&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;average_order_value&#39;</span> <span class=o>=&gt;</span> <span class=nv>$orders</span><span class=o>-&gt;</span><span class=na>avg</span><span class=p>(</span><span class=s1>&#39;total_amount&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;top_products&#39;</span> <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getTopProducts</span><span class=p>(</span><span class=nv>$orders</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>getTopProducts</span><span class=p>(</span><span class=nx>Collection</span> <span class=nv>$orders</span><span class=p>)</span><span class=o>:</span> <span class=k>array</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$orders</span><span class=o>-&gt;</span><span class=na>flatMap</span><span class=o>-&gt;</span><span class=na>items</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>groupBy</span><span class=p>(</span><span class=s1>&#39;product_id&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>map</span><span class=p>(</span><span class=nx>fn</span><span class=p>(</span><span class=nv>$items</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                         <span class=s1>&#39;product&#39;</span> <span class=o>=&gt;</span> <span class=nv>$items</span><span class=o>-&gt;</span><span class=na>first</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>product</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=s1>&#39;quantity_sold&#39;</span> <span class=o>=&gt;</span> <span class=nv>$items</span><span class=o>-&gt;</span><span class=na>sum</span><span class=p>(</span><span class=s1>&#39;quantity&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                         <span class=s1>&#39;revenue&#39;</span> <span class=o>=&gt;</span> <span class=nv>$items</span><span class=o>-&gt;</span><span class=na>sum</span><span class=p>(</span><span class=nx>fn</span><span class=p>(</span><span class=nv>$item</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nv>$item</span><span class=o>-&gt;</span><span class=na>price</span> <span class=o>*</span> <span class=nv>$item</span><span class=o>-&gt;</span><span class=na>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=p>])</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>sortByDesc</span><span class=p>(</span><span class=s1>&#39;quantity_sold&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>take</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>values</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                     <span class=o>-&gt;</span><span class=na>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=configuration-and-environment-management>Configuration and Environment Management</h2><p>Proper configuration management is crucial for clean code. Create custom configuration files for complex settings:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// config/business.php
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;order&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;max_items_per_order&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;MAX_ITEMS_PER_ORDER&#39;</span><span class=p>,</span> <span class=mi>50</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;auto_cancel_hours&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;AUTO_CANCEL_HOURS&#39;</span><span class=p>,</span> <span class=mi>24</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;minimum_order_amount&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;MINIMUM_ORDER_AMOUNT&#39;</span><span class=p>,</span> <span class=mf>10.00</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=s1>&#39;payment&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;default_gateway&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;PAYMENT_GATEWAY&#39;</span><span class=p>,</span> <span class=s1>&#39;stripe&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;timeout_seconds&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;PAYMENT_TIMEOUT&#39;</span><span class=p>,</span> <span class=mi>30</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;retry_attempts&#39;</span> <span class=o>=&gt;</span> <span class=nx>env</span><span class=p>(</span><span class=s1>&#39;PAYMENT_RETRY_ATTEMPTS&#39;</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Implementing clean code practices in Laravel requires discipline and planning, but the benefits are substantial. A well-structured Laravel application with proper separation of concerns, consistent naming conventions, and strategic use of design patterns becomes easier to maintain, test, and scale.</p><p>The key to success lies in starting with good practices from the beginning rather than trying to refactor a messy codebase later. Use Laravel&rsquo;s built-in features as your foundation, but don&rsquo;t hesitate to add your own organizational layers when they serve your application&rsquo;s specific needs.</p><p>Remember that clean code isn&rsquo;t about following every pattern perfectly, but about creating code that serves your team and your project&rsquo;s long-term goals. Start with the basics covered in this guide, and gradually introduce more advanced patterns as your application grows in complexity.</p><p>Looking to optimize your Laravel application further? Learn about <a href=/2025/09/laravel-performance-optimization-15-techniques.html>15 Essential Performance Optimization Techniques
</a>or explore comprehensive <a href=/2025/09/laravel-security-best-practices-production.html>Security Best Practices for Production
</a>environments.</p></p><div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded"><h2 class="text-lg font-semibold mb-2">📌 Read Also</h2><ul class="list-disc list-outside ml-5"><li><a href=/2025/09/advanced-laravel-debugging-with-logs.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Advanced Laravel Debugging with Logs: Production Issues Troubleshooting</a></li><li><a href=/2025/08/deploy-laravel-to-vps-with-nginx-complete-guide.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Deploy Laravel Application to VPS with Nginx: Complete Production Guide</a></li><li><a href=/2024/04/5-laravel-extensions-that-you-must-install-on-your-visual-studio-code.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">5 Laravel extensions that you must install on your Visual Studio Code</a></li></ul></div><div class="hidden lg:block"><div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><div class="block lg:hidden my-8 px-2 mb-10"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:50px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="lg:hidden mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><div class="grid gap-3"><a href=/2025/09/clean-code-laravel-project-structure.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Clean Code Laravel: Project Structure and Design Patterns Guide</h4><p class="text-xs text-gray-500 dark:text-gray-400">08 Sep 2025</p></a><a href=/2025/09/advanced-laravel-debugging-with-logs.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Advanced Laravel Debugging with Logs: Production Issues Troubleshooting</h4><p class="text-xs text-gray-500 dark:text-gray-400">06 Sep 2025</p></a><a href=/2025/09/advanced-go-modules-private-repos-semantic-import-v2-go-work.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Advanced Go Modules: Private Repos, Semantic Import v2+, and go.work</h4><p class="text-xs text-gray-500 dark:text-gray-400">02 Sep 2025</p></a><a href=/2025/09/computer-vision-opencv-object-detection-face-recognition-tutorial.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Computer Vision with OpenCV: Complete Guide to Object Detection and Face Recognition in Python</h4><p class="text-xs text-gray-500 dark:text-gray-400">02 Sep 2025</p></a><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025)</h4><p class="text-xs text-gray-500 dark:text-gray-400">01 Sep 2025</p></a></div></div></article><aside class="space-y-10 hidden lg:block"><div><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><ul class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"><li><a href=/2025/09/clean-code-laravel-project-structure.html class="hover:text-[#0f7ea9] transition">Clean Code Laravel: Project Structure and Design Patterns Guide</a></li><li><a href=/2025/09/advanced-laravel-debugging-with-logs.html class="hover:text-[#0f7ea9] transition">Advanced Laravel Debugging with Logs: Production Issues Troubleshooting</a></li><li><a href=/2025/09/advanced-go-modules-private-repos-semantic-import-v2-go-work.html class="hover:text-[#0f7ea9] transition">Advanced Go Modules: Private Repos, Semantic Import v2+, and go.work</a></li><li><a href=/2025/09/computer-vision-opencv-object-detection-face-recognition-tutorial.html class="hover:text-[#0f7ea9] transition">Computer Vision with OpenCV: Complete Guide to Object Detection and Face Recognition in Python</a></li><li><a href=/2025/09/complete-guide-slog-go-structured-logging-2025.html class="hover:text-[#0f7ea9] transition">The Complete Guide to slog (Go 1.21+): Modern Structured Logging in Go (2025)</a></li></ul></div><div class=mt-8><div class="hidden lg:block"><div id=stickySidebarAd class="sticky top-8 transition-all duration-300"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="mx-auto w-[300px] min-h-[250px] overflow-hidden sticky-ad-container"><button id=closeStickyAd class="absolute top-2 right-2 w-6 h-6 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-600 text-xs transition-colors z-10 hidden">
×
</button>
<ins class="adsbygoogle sticky-ad-unit" style=display:block;background-color:inherit;min-height:250px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><style>.sticky-ad-container{position:relative}.sticky-ad-container:hover #closeStickyAd{display:block}#stickySidebarAd{will-change:transform}@media(min-width:1024px){#stickySidebarAd{max-height:calc(100vh - 120px)}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("stickySidebarAd"),t=document.getElementById("closeStickyAd");if(t&&t.addEventListener("click",function(){e&&(e.style.display="none",localStorage.setItem("stickySidebarHidden","true"))}),localStorage.getItem("stickySidebarHidden")==="true"&&e&&(e.style.display="none"),e&&window.IntersectionObserver){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});t.observe(e)}})</script></div></aside></div><section id=comments class=mt-12><script src=https://giscus.app/client.js data-repo=wikukarno/buanacoding data-repo-id=R_kgD0Oj4jAw data-category=General data-category-id=DIC_kwD0Oj4jA84Cr_fx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></main><div class=py-6><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300"><div class="text-center space-x-4 text-sm font-medium"><a href=/about class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
<span>-</span>
<a href=/contact class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
<span>-</span>
<a href=/privacy-policy class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
<span>-</span>
<a href=/disclaimer class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a></div></div><footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">&copy; 2025 buanacoding.com</footer><button id=scrollToTop class="fixed bottom-6 right-6 lg:bottom-6 lg:right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300 z-50" aria-label="Scroll to top">
<svg fill="none" class="w-4 h-4" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg></button><style>body.floating-ad-active #scrollToTop{bottom:100px !important}@media(min-width:1024px){body.floating-ad-active #scrollToTop{bottom:1.5rem !important}}</style><div id=floatingMobileAd class="lg:hidden fixed bottom-0 left-0 right-0 z-40 transform transition-transform duration-300 translate-y-0"><div class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-lg"><div class="flex items-center justify-between px-2 py-1 max-w-sm mx-auto"><button id=closeFloatingMobile class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors flex-shrink-0">
<span class="text-lg leading-none">×</span></button><div class="flex-1 mx-2 min-h-[50px] flex items-center justify-center"><ins class="adsbygoogle floating-mobile-ad" style=display:block;background-color:inherit;width:100%;max-width:320px;height:50px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=false></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="w-8 flex-shrink-0"></div></div><div class="text-center pb-1"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide">Ad</span></div></div></div><style>#floatingMobileAd{z-index:40;transition:transform .3s ease-in-out,opacity .3s ease-in-out}#floatingMobileAd.hidden-mobile-ad{transform:translateY(100%);opacity:0}body.floating-ad-active{padding-bottom:70px}.floating-mobile-ad{pointer-events:auto}@media(min-width:1024px){#floatingMobileAd{display:none !important}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("floatingMobileAd"),s=document.getElementById("closeFloatingMobile"),t=document.body;e&&window.innerWidth<1024&&t.classList.add("floating-ad-active"),s&&s.addEventListener("click",function(){e&&(e.classList.add("hidden-mobile-ad"),t.classList.remove("floating-ad-active"),localStorage.setItem("floatingMobileHidden","true"),setTimeout(()=>{e.style.display="none"},300))}),localStorage.getItem("floatingMobileHidden")==="true"&&e&&(e.style.display="none",t.classList.remove("floating-ad-active"));let n=0,o;e&&localStorage.getItem("floatingMobileHidden")!=="true"&&window.addEventListener("scroll",function(){clearTimeout(o),o=setTimeout(()=>{const t=window.pageYOffset||document.documentElement.scrollTop;t>n&&t>100?e.style.transform="translateY(100%)":t<n&&(e.style.transform="translateY(0)"),n=t<=0?0:t},50)}),window.addEventListener("resize",function(){window.innerWidth>=1024?t.classList.remove("floating-ad-active"):e&&localStorage.getItem("floatingMobileHidden")!=="true"&&t.classList.add("floating-ad-active")})})</script><div id=google_translate_element style=display:none></div><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.4.6></script><script>feather.replace();const btn=document.getElementById("scrollToTop"),html=document.documentElement,toggleBtn=document.getElementById("theme-toggle"),toggleBtnMobile=document.getElementById("theme-toggle-mobile"),iconSun=document.getElementById("icon-sun"),iconMoon=document.getElementById("icon-moon"),iconSunMobile=document.getElementById("icon-sun-mobile"),iconMoonMobile=document.getElementById("icon-moon-mobile");document.getElementById("menu-toggle")?.addEventListener("click",()=>{document.getElementById("mobile-menu")?.classList.toggle("hidden")}),btn.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>300?btn.style.display="flex":btn.style.display="none"}),btn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});function updateIcons(e){iconSun.classList.toggle("hidden",!e),iconMoon.classList.toggle("hidden",e),iconSunMobile.classList.toggle("hidden",!e),iconMoonMobile.classList.toggle("hidden",e)}function setDarkMode(e){html.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light"),updateIcons(e)}const userPref=localStorage.getItem("theme"),systemPref=window.matchMedia("(prefers-color-scheme: dark)").matches,isDark=userPref==="dark"||!userPref&&systemPref;setDarkMode(isDark),toggleBtn?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),toggleBtnMobile?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),document.querySelectorAll("pre").forEach(e=>{const t=document.createElement("button");t.innerHTML=`
      <span>Copy</span>
    `,t.className=`
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();const n=document.createElement("div");n.className="relative",e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),t.addEventListener("click",()=>{const n=e.innerText;navigator.clipboard.writeText(n).then(()=>{t.querySelector("span").innerText="Copied!",setTimeout(()=>{t.querySelector("span").innerText="Copy"},2e3)})})});const openBtn=document.getElementById("openSearchModal"),closeBtn=document.getElementById("closeSearchModal"),modal=document.getElementById("searchModal");openBtn.addEventListener("click",()=>{console.log("Search modal opened"),modal.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtn.addEventListener("click",()=>{modal.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modal.classList.add("hidden")}),fetch("/index.json").then(e=>e.json()).then(e=>{const n=new Fuse(e,{keys:["title","content"],threshold:.3}),s=document.getElementById("searchBox"),t=document.getElementById("results");s.addEventListener("input",function(e){const o=e.target.value.trim(),s=document.getElementById("searchAdBanner");if(o.length<2){t.innerHTML="",s&&(s.classList.remove("show"),s.classList.add("hide"),setTimeout(()=>s.style.display="none",300));return}s&&(s.style.display="block",s.classList.remove("hide"),s.classList.add("show"));const i=n.search(o);if(i.length===0)t.innerHTML=`
            <li class='px-4 py-3 text-center text-gray-500 dark:text-gray-400'>
              <div class="mb-2">📄 No results found for "${o}"</div>
              <div class="text-xs">Try different keywords or browse categories below</div>
            </li>
          `;else{let e="";i.forEach((t,n)=>{e+=`
              <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                <a href="${t.item.href}" class="block font-semibold text-gray-900 dark:text-white no-underline">${t.item.title}</a>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.item.content.substring(0,100)}...</p>
              </li>
            `,(n+1)%3===0&&n<i.length-1&&(e+=`
                <li class="px-4 py-2 bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                  <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">📚 More related articles</div>
                </li>
              `)}),t.innerHTML=e}})});const openBtnMobile=document.getElementById("openSearchModalMobile"),closeBtnMobile=document.getElementById("closeSearchModal"),modalMobile=document.getElementById("searchModal");openBtnMobile.addEventListener("click",()=>{console.log("Search modal opened (mobile)"),modalMobile.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtnMobile.addEventListener("click",()=>{modalMobile.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modalMobile.classList.add("hidden")}),function(){function t(e,t){if(window.google&&window.google.translate&&window.google.translate.TranslateElement){e&&e();return}if(window.__gtReadyCallbacks=window.__gtReadyCallbacks||[],e&&window.__gtReadyCallbacks.push(e),window.__gtLoading)return;window.__gtLoading=!0,window.initGoogleTranslate=function(){try{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"id",autoDisplay:!1},"google_translate_element")}catch{}(window.__gtReadyCallbacks||[]).forEach(function(e){try{e()}catch{}}),window.__gtReadyCallbacks=[]};var s,n=document.createElement("script");n.src="https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate",n.defer=!0,s=!1,n.onerror=function(){s=!0,t&&t()},setTimeout(function(){(!window.google||!window.google.translate)&&(s=!0,t&&t())},4e3),document.head.appendChild(n)}function n(e,t){document.cookie=e+"="+t+"; path=/; expires="+new Date(Date.now()+365*24*3600*1e3).toUTCString()}function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}function s(){if(document.getElementById("translate-fallback"))return;var e=document.createElement("div");e.id="translate-fallback",e.style.cssText="position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;",e.innerHTML='<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span><button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button><button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>',document.body.appendChild(e),document.getElementById("btnCloseTf").onclick=function(){e.remove()},document.getElementById("btnTryId").onclick=function(){var t=new URL(location.href),e=location.pathname;e.startsWith("/id/")||(t.pathname="/id"+(e.startsWith("/")?e:"/"+e)),fetch(t,{method:"HEAD"}).then(function(e){e.ok?location.href=t:location.href="/id/"}).catch(function(){location.href="/id/"})}}function o(e){t(function(){var t=document.querySelector(".goog-te-combo");t?(t.value=e,t.dispatchEvent(new Event("change"))):(n("googtrans","/en/"+e),location.reload())},s)}function i(){e("googtrans"),e("GOOGTRANS")}document.querySelectorAll(".js-lang-link").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-lang"),s=e.getAttribute("data-has-trans")==="true";if(n==="en"){i();return}s||(t.preventDefault(),o(n))})})}()</script></body></html>