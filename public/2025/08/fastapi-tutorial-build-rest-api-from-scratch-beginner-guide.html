<!doctype html><html lang=en data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>FastAPI Tutorial: Build REST API from Scratch (Beginner Guide) | Buana Coding</title><meta name=description content="Learn how to build a complete REST API from scratch using FastAPI. This beginner-friendly tutorial covers everything from setup to deployment with practical examples and clear explanations."><meta name=keywords content="fastapi,python,rest api,tutorial,beginner,web development,api development,fastapi tutorial"><link rel=canonical href=https://www.buanacoding.com/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html><link rel=alternate hreflang=en href=https://www.buanacoding.com/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html><meta property="og:type" content="article"><meta property="og:title" content="FastAPI Tutorial: Build REST API from Scratch (Beginner Guide) | Buana Coding"><meta property="og:description" content="Learn how to build a complete REST API from scratch using FastAPI. This beginner-friendly tutorial covers everything from setup to deployment with practical examples and clear explanations."><meta property="og:url" content="https://www.buanacoding.com/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html"><meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="FastAPI Tutorial: Build REST API from Scratch (Beginner Guide) | Buana Coding"><meta name=twitter:description content="Learn how to build a complete REST API from scratch using FastAPI. This beginner-friendly tutorial covers everything from setup to deployment with practical examples and clear explanations."><meta name=twitter:image content="https://www.buanacoding.com/images/og-image.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FastAPI Tutorial: Build REST API from Scratch (Beginner Guide) | Buana Coding","description":"Learn how to build a complete REST API from scratch using FastAPI. This beginner-friendly tutorial covers everything from setup to deployment with practical examples and clear explanations.","inLanguage":"en","datePublished":"2025-08-25T07:00:00\u002b07:00","dateModified":"2025-08-25T07:00:00\u002b07:00","author":{"@type":"Person","name":"Wiku Karno"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.buanacoding.com\/2025\/08\/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html"},"image":"https:\/\/www.buanacoding.com\/images\/og-image.jpg","publisher":{"@type":"Organization","name":"Buana Coding"}}</script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel=stylesheet><link rel=stylesheet href="/style.css?v=1756611566"><link rel=stylesheet href="/css/overrides.css?v=1756611566"><link rel=stylesheet href="/css/syntax.css?v=1756611566"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0EN9J73FXF")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3149036684216973" crossorigin=anonymous></script></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"><header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow"><div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-2xl font-extrabold tracking-wide"><a href=/ class=hover:opacity-90>BUANACODING</a></h1><nav class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"><a href=/tags/go class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security
</a><a href=/tags/general class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General</a><div class="hidden md:flex items-center"><div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium"><a href=/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html data-lang=en data-has-trans=true class="js-lang-link px-2 py-1 bg-white/20 text-white">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">ID</a></div></div><button id=openSearchModal class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
</button>
<button id=theme-toggle class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer" aria-label="Toggle Dark Mode">
<i id=icon-sun data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon data-feather=moon class="w-5 h-5"></i></button></nav><button id=menu-toggle class="md:hidden text-2xl focus:outline-none">
☰</button></div><div id=mobile-menu class="hidden md:hidden px-4 pb-4 space-y-2"><a href=/tags/go class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security
</a><a href=/tags/general class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General</a><div class="mt-8 space-y-6"><button id=openSearchModalMobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
<span class="text-sm font-medium">Search</span></button><div class="flex items-center justify-between py-2"><div class="flex items-center gap-4"><i data-feather=globe class="w-5 h-5 text-white/80"></i>
<span class="text-sm font-medium text-white">Language</span></div><div class="flex text-xs"><a href=/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html data-lang=en data-has-trans=true class="js-lang-link px-3 py-1.5 text-white font-medium">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-3 py-1.5 text-white/60 hover:text-white">ID</a></div></div><button id=theme-toggle-mobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label="Toggle Dark Mode">
<i id=icon-sun-mobile data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon-mobile data-feather=moon class="w-5 h-5"></i>
<span class="text-sm font-medium">Theme</span></button></div></div></header><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2"><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div id=searchModal class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"><div class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"><button id=closeSearchModal class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110">
<i data-feather=x class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"></i>
</button>
<input type=text id=searchBox placeholder="Search articles..." class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"><div id=searchAdBanner class="mt-4 mb-8 hidden"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class="adsbygoogle search-results-ad" style=display:block;min-height:100px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><style>#searchAdBanner{transition:opacity .3s ease-in-out,transform .3s ease-in-out}#searchAdBanner.show{display:block !important;opacity:1;transform:translateY(0)}#searchAdBanner.hide{opacity:0;transform:translateY(-10px)}.search-results-ad{max-height:100px;overflow:hidden}</style><ul id=results class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"></ul></div></div><main class="flex-1 w-full"><div class="max-w-7xl mx-auto py-8 px-4"><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8"><article class="prose prose-blue dark:prose-invert lg:col-span-2"><nav class="text-sm text-gray-600 dark:text-gray-300 mb-4"><a href=/ class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">Home</a>
<span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
<a href=/tags/python class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">#Python</a></nav><h1>FastAPI Tutorial: Build REST API from Scratch (Beginner Guide)</h1><div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700"><span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
<a href="https://twitter.com/intent/tweet?text=FastAPI+Tutorial%3A+Build+REST+API+from+Scratch+%28Beginner+Guide%29&url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F08%2Ffastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html&via=buanacoding" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Share on Twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F08%2Ffastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on Facebook"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F08%2Ffastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on LinkedIn"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://wa.me/?text=FastAPI+Tutorial%3A+Build+REST+API+from+Scratch+%28Beginner+Guide%29%20https%3A%2F%2Fwww.buanacoding.com%2F2025%2F08%2Ffastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200" title="Share on WhatsApp"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.484 3.488"/></svg>
</a><button onclick='copyLinkHeader("https://www.buanacoding.com/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html")' class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Copy Link">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</button>
<span id=copy-header-success class="hidden text-xs text-green-600 dark:text-green-400 font-medium">Copied!</span></div><script>function copyLinkHeader(e){navigator.clipboard.writeText(e).then(function(){showHeaderSuccess()}).catch(function(){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),showHeaderSuccess()})}function showHeaderSuccess(){const e=document.getElementById("copy-header-success");e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},2e3)}</script><p>Building APIs used to scare me when I first started programming. There&rsquo;s so much to learn - databases, HTTP methods, authentication, error handling. But FastAPI changed everything for me. It&rsquo;s like having training wheels that actually make you faster, not slower.</p><p>We&rsquo;re going to build a real Book Library API from the ground up. No fluff, no complicated setups - just practical, working code that you can understand and expand on. By the end of this guide, you&rsquo;ll have a fully functional REST API that can handle creating, reading, updating, and deleting books.</p><p>Once you master the basics here, you can take your FastAPI skills further with <a href=/2025/08/fastapi-jwt-auth-oauth2-password-flow-pydantic-v2-sqlalchemy-2.html>JWT authentication and OAuth2 security
</a>, or learn how to <a href=/2025/08/deploy-fastapi-ubuntu-24-04-gunicorn-nginx-certbot.html>deploy your FastAPI application to production
</a>.</p><div class="my-8 flex justify-center"><div class="w-full max-w-2xl"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-3149036684216973 data-ad-slot=2492895769></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><p>I&rsquo;m not going to throw a bunch of code at you and hope it sticks. We&rsquo;ll walk through each piece together, and I&rsquo;ll explain why we&rsquo;re doing things a certain way. Think of it as pair programming through an article. Everything runs locally too - no cloud accounts or credit cards needed.</p><p>What you&rsquo;ll build:</p><ul><li>A complete Book Library REST API</li><li>CRUD operations (Create, Read, Update, Delete)</li><li>Data validation with Pydantic</li><li>SQLite database integration</li><li>Interactive API documentation</li><li>Error handling and responses</li><li>Testing with real HTTP requests</li></ul><h2 id=prerequisites>Prerequisites</h2><p>Before we dive in, make sure you have:</p><ul><li>Python 3.8 or higher installed</li><li>Basic Python knowledge (variables, functions, classes)</li><li>A code editor (VS Code, PyCharm, or any text editor)</li><li>Command line familiarity</li></ul><p>Don&rsquo;t worry if you&rsquo;re not an expert in any of these - we&rsquo;ll explain everything as we go.</p><h2 id=why-fastapi>Why FastAPI?</h2><p>Why FastAPI and not Django or Flask? Good question. I&rsquo;ve used all three in production, and here&rsquo;s my take: Django feels like driving a truck when you need a motorcycle. Flask is that motorcycle, but you end up building the truck yourself anyway. FastAPI? It&rsquo;s like a sports car that comes with GPS, heated seats, and a great sound system right out of the box.</p><p>FastAPI automatically generates interactive documentation for your API, validates request data, and handles serialization. These features alone save hours of manual work. Plus, it&rsquo;s built on modern Python features like type hints, making your code more readable and less bug-prone.</p><h2 id=setting-up-the-development-environment>Setting Up the Development Environment</h2><p>First things first - let&rsquo;s set up a proper workspace. Open your terminal and create a new directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir book-library-api
</span></span><span class=line><span class=cl><span class=nb>cd</span> book-library-api
</span></span></code></pre></div><p>Now create a virtual environment. This keeps our project dependencies separate from other Python projects on your system:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m venv venv
</span></span></code></pre></div><p>Activate the virtual environment:</p><p><strong>On Windows:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>venv<span class=se>\S</span>cripts<span class=se>\a</span>ctivate
</span></span></code></pre></div><p><strong>On macOS/Linux:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> venv/bin/activate
</span></span></code></pre></div><p>You should see <code>(venv)</code> at the beginning of your command prompt, indicating the virtual environment is active.</p><h2 id=installing-dependencies>Installing Dependencies</h2><p>We need just a few packages to get started:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install fastapi uvicorn sqlalchemy
</span></span></code></pre></div><p>Here&rsquo;s what each package does:</p><ul><li><strong>FastAPI</strong>: The web framework itself</li><li><strong>Uvicorn</strong>: ASGI server to run our application</li><li><strong>SQLAlchemy</strong>: Database ORM (Object-Relational Mapping)</li></ul><p>Let&rsquo;s also create a requirements.txt file to track our dependencies:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip freeze &gt; requirements.txt
</span></span></code></pre></div><h2 id=project-structure>Project Structure</h2><p>Good organization makes your code easier to understand and maintain. Create this folder structure:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir app
</span></span><span class=line><span class=cl>mkdir app/models
</span></span><span class=line><span class=cl>mkdir app/schemas
</span></span><span class=line><span class=cl>mkdir app/database
</span></span><span class=line><span class=cl>touch app/__init__.py
</span></span><span class=line><span class=cl>touch app/main.py
</span></span><span class=line><span class=cl>touch app/models/__init__.py
</span></span><span class=line><span class=cl>touch app/models/book.py
</span></span><span class=line><span class=cl>touch app/schemas/__init__.py
</span></span><span class=line><span class=cl>touch app/schemas/book.py
</span></span><span class=line><span class=cl>touch app/database/__init__.py
</span></span><span class=line><span class=cl>touch app/database/database.py
</span></span></code></pre></div><p>Your project should now look like this:</p><pre tabindex=0><code>book-library-api/
├── venv/
├── app/
│   ├── __init__.py
│   ├── main.py
│   ├── models/
│   │   ├── __init__.py
│   │   └── book.py
│   ├── schemas/
│   │   ├── __init__.py
│   │   └── book.py
│   └── database/
│       ├── __init__.py
│       └── database.py
└── requirements.txt
</code></pre><p>This structure separates different parts of our application, making it easier to find and modify code later.</p><h2 id=database-setup>Database Setup</h2><p>Let&rsquo;s start by setting up our database connection. We&rsquo;ll use SQLite because it&rsquo;s simple and doesn&rsquo;t require a separate database server.</p><p>Create the database configuration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># app/database/database.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>create_engine</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.ext.declarative</span> <span class=kn>import</span> <span class=n>declarative_base</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>sessionmaker</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># SQLite database file</span>
</span></span><span class=line><span class=cl><span class=n>SQLALCHEMY_DATABASE_URL</span> <span class=o>=</span> <span class=s2>&#34;sqlite:///./books.db&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create engine</span>
</span></span><span class=line><span class=cl><span class=n>engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>SQLALCHEMY_DATABASE_URL</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>connect_args</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;check_same_thread&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create session</span>
</span></span><span class=line><span class=cl><span class=n>SessionLocal</span> <span class=o>=</span> <span class=n>sessionmaker</span><span class=p>(</span><span class=n>autocommit</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>autoflush</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>bind</span><span class=o>=</span><span class=n>engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Base class for models</span>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=o>=</span> <span class=n>declarative_base</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Dependency to get database session</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_db</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>SessionLocal</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=n>db</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>db</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div><p>This code sets up our database connection. The <code>get_db()</code> function is a dependency that FastAPI will use to provide database sessions to our API endpoints.</p><h2 id=creating-the-database-model>Creating the Database Model</h2><p>Now let&rsquo;s define what a book looks like in our database:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># app/models/book.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>Column</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>String</span><span class=p>,</span> <span class=n>Text</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>app.database.database</span> <span class=kn>import</span> <span class=n>Base</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Book</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s2>&#34;books&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Text</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>published_year</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>isbn</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><p>This model defines our book structure with fields for title, author, description, publication year, and ISBN. The <code>__tablename__</code> tells SQLAlchemy what to name the table in the database.</p><h2 id=pydantic-schemas>Pydantic Schemas</h2><p>Pydantic schemas define how data should look when it comes into or goes out of our API. Think of them as contracts that ensure data consistency:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># app/schemas/book.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pydantic</span> <span class=kn>import</span> <span class=n>BaseModel</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookBase</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>published_year</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>isbn</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookCreate</span><span class=p>(</span><span class=n>BookBase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookUpdate</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>published_year</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>isbn</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookResponse</span><span class=p>(</span><span class=n>BookBase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Config</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>from_attributes</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Standard API Response Schemas</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Meta</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>success</span><span class=p>:</span> <span class=nb>bool</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>total</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>page</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>limit</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>total_pages</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StandardResponse</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>meta</span><span class=p>:</span> <span class=n>Meta</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=p>:</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookListResponse</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>meta</span><span class=p>:</span> <span class=n>Meta</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>BookResponse</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SingleBookResponse</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>meta</span><span class=p>:</span> <span class=n>Meta</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=p>:</span> <span class=n>BookResponse</span>
</span></span></code></pre></div><p>We have different schemas for different purposes:</p><ul><li><code>BookBase</code>: Common fields for all book operations</li><li><code>BookCreate</code>: For creating new books (inherits from BookBase)</li><li><code>BookUpdate</code>: For updating existing books (all fields optional)</li><li><code>BookResponse</code>: For returning book data (includes the ID)</li><li><code>Meta</code>: Metadata for API responses (success status, pagination info)</li><li><code>StandardResponse</code>: Generic response wrapper with meta and data</li><li><code>BookListResponse</code>: Specific response for book lists</li><li><code>SingleBookResponse</code>: Specific response for single book operations</li></ul><p>This standard response format makes your API more consistent and easier to consume by frontend applications or other services.</p><h2 id=building-the-fastapi-application>Building the FastAPI Application</h2><p>Now for the main event - creating our FastAPI application:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># app/main.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fastapi</span> <span class=kn>import</span> <span class=n>FastAPI</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>,</span> <span class=n>Depends</span><span class=p>,</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>Session</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>math</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>app.database.database</span> <span class=kn>import</span> <span class=n>engine</span><span class=p>,</span> <span class=n>get_db</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>app.models</span> <span class=kn>import</span> <span class=n>book</span> <span class=k>as</span> <span class=n>book_models</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>app.schemas</span> <span class=kn>import</span> <span class=n>book</span> <span class=k>as</span> <span class=n>book_schemas</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create database tables</span>
</span></span><span class=line><span class=cl><span class=n>book_models</span><span class=o>.</span><span class=n>Base</span><span class=o>.</span><span class=n>metadata</span><span class=o>.</span><span class=n>create_all</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=n>engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Initialize FastAPI app</span>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=o>=</span><span class=s2>&#34;Book Library API&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;A simple REST API for managing books with standardized responses&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>version</span><span class=o>=</span><span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Helper function to create standard responses</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_response</span><span class=p>(</span><span class=n>success</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span> <span class=n>message</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>page</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=n>success</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=n>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>total</span><span class=o>=</span><span class=n>total</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>page</span><span class=o>=</span><span class=n>page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>limit</span><span class=o>=</span><span class=n>limit</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>total_pages</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span><span class=n>total</span> <span class=o>/</span> <span class=n>limit</span><span class=p>)</span> <span class=k>if</span> <span class=n>total</span> <span class=ow>and</span> <span class=n>limit</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>StandardResponse</span><span class=p>(</span><span class=n>meta</span><span class=o>=</span><span class=n>meta</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Root endpoint</span>
</span></span><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_root</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>create_response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Welcome to Book Library API&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;running&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Health check endpoint</span>
</span></span><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/health&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>health_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>create_response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;API is healthy&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;healthy&#34;</span><span class=p>,</span> <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2024-01-01T00:00:00Z&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get all books</span>
</span></span><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/books&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>BookListResponse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_books</span><span class=p>(</span><span class=n>skip</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>limit</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>100</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Get total count for pagination</span>
</span></span><span class=line><span class=cl>    <span class=n>total_books</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Get books with pagination</span>
</span></span><span class=line><span class=cl>    <span class=n>books</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>offset</span><span class=p>(</span><span class=n>skip</span><span class=p>)</span><span class=o>.</span><span class=n>limit</span><span class=p>(</span><span class=n>limit</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>current_page</span> <span class=o>=</span> <span class=p>(</span><span class=n>skip</span> <span class=o>//</span> <span class=n>limit</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Books retrieved successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>total</span><span class=o>=</span><span class=n>total_books</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>page</span><span class=o>=</span><span class=n>current_page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>limit</span><span class=o>=</span><span class=n>limit</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>total_pages</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span><span class=n>total_books</span> <span class=o>/</span> <span class=n>limit</span><span class=p>)</span> <span class=k>if</span> <span class=n>total_books</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>BookListResponse</span><span class=p>(</span><span class=n>meta</span><span class=o>=</span><span class=n>meta</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>books</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get single book by ID</span>
</span></span><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/books/</span><span class=si>{book_id}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_book</span><span class=p>(</span><span class=n>book_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>book</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>book_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Book with id </span><span class=si>{</span><span class=n>book_id</span><span class=si>}</span><span class=s2> not found&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>detail</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;meta&#34;</span><span class=p>:</span> <span class=n>meta</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span> <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Book retrieved successfully&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>(</span><span class=n>meta</span><span class=o>=</span><span class=n>meta</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create new book</span>
</span></span><span class=line><span class=cl><span class=nd>@app.post</span><span class=p>(</span><span class=s2>&#34;/books&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>,</span> <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_book</span><span class=p>(</span><span class=n>book</span><span class=p>:</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>BookCreate</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Check if book with same ISBN already exists</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>isbn</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>existing_book</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>isbn</span> <span class=o>==</span> <span class=n>book</span><span class=o>.</span><span class=n>isbn</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>existing_book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Book with ISBN </span><span class=si>{</span><span class=n>book</span><span class=o>.</span><span class=n>isbn</span><span class=si>}</span><span class=s2> already exists&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>detail</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;meta&#34;</span><span class=p>:</span> <span class=n>meta</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span> <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>db_book</span> <span class=o>=</span> <span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>(</span><span class=o>**</span><span class=n>book</span><span class=o>.</span><span class=n>dict</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>db_book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>refresh</span><span class=p>(</span><span class=n>db_book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Book created successfully&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>(</span><span class=n>meta</span><span class=o>=</span><span class=n>meta</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>db_book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update existing book</span>
</span></span><span class=line><span class=cl><span class=nd>@app.put</span><span class=p>(</span><span class=s2>&#34;/books/</span><span class=si>{book_id}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>update_book</span><span class=p>(</span><span class=n>book_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>book_update</span><span class=p>:</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>BookUpdate</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>book</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>book_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Book with id </span><span class=si>{</span><span class=n>book_id</span><span class=si>}</span><span class=s2> not found&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>detail</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;meta&#34;</span><span class=p>:</span> <span class=n>meta</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span> <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Update only provided fields</span>
</span></span><span class=line><span class=cl>    <span class=n>update_data</span> <span class=o>=</span> <span class=n>book_update</span><span class=o>.</span><span class=n>dict</span><span class=p>(</span><span class=n>exclude_unset</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>update_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span><span class=o>=</span><span class=s2>&#34;No fields provided for update&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>detail</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;meta&#34;</span><span class=p>:</span> <span class=n>meta</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span> <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>field</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>update_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>setattr</span><span class=p>(</span><span class=n>book</span><span class=p>,</span> <span class=n>field</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>refresh</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Book updated successfully&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>SingleBookResponse</span><span class=p>(</span><span class=n>meta</span><span class=o>=</span><span class=n>meta</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Delete book</span>
</span></span><span class=line><span class=cl><span class=nd>@app.delete</span><span class=p>(</span><span class=s2>&#34;/books/</span><span class=si>{book_id}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>delete_book</span><span class=p>(</span><span class=n>book_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>book</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>book_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>meta</span> <span class=o>=</span> <span class=n>book_schemas</span><span class=o>.</span><span class=n>Meta</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Book with id </span><span class=si>{</span><span class=n>book_id</span><span class=si>}</span><span class=s2> not found&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>detail</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;meta&#34;</span><span class=p>:</span> <span class=n>meta</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span> <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>create_response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Book with id </span><span class=si>{</span><span class=n>book_id</span><span class=si>}</span><span class=s2> deleted successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;deleted_book_id&#34;</span><span class=p>:</span> <span class=n>book_id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span></code></pre></div><p>This is the heart of our API. Let&rsquo;s break down what each endpoint does:</p><ul><li><code>GET /</code>: Welcome message with standardized response</li><li><code>GET /health</code>: Simple health check with status information</li><li><code>GET /books</code>: Get all books with pagination and metadata</li><li><code>GET /books/{book_id}</code>: Get a specific book by ID</li><li><code>POST /books</code>: Create a new book with validation</li><li><code>PUT /books/{book_id}</code>: Update an existing book</li><li><code>DELETE /books/{book_id}</code>: Delete a book</li></ul><h2 id=standard-response-format>Standard Response Format</h2><p>Notice how all our responses now follow a consistent structure with <code>meta</code> and <code>data</code> fields:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;meta&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Books retrieved successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>25</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;The Python Guide&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Real Python&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;A comprehensive guide to Python programming&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;published_year&#34;</span><span class=p>:</span> <span class=mi>2023</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0123456789&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This format provides several benefits:</p><ul><li><strong>Consistent structure</strong> across all endpoints</li><li><strong>Success/failure indication</strong> in every response</li><li><strong>Helpful messages</strong> for debugging and user feedback</li><li><strong>Pagination metadata</strong> for list endpoints</li><li><strong>Easy parsing</strong> for frontend applications</li></ul><h2 id=running-the-application>Running the Application</h2><p>Let&rsquo;s see our API in action! Run this command from your project root:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>uvicorn app.main:app --reload --host 0.0.0.0 --port <span class=m>8000</span>
</span></span></code></pre></div><p>The <code>--reload</code> flag automatically restarts the server when you change code, making development much smoother.</p><p>Open your browser and go to <code>http://127.0.0.1:8000</code>. You should see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;meta&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Welcome to Book Library API&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;running&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=interactive-api-documentation>Interactive API Documentation</h2><p>Now for the coolest part. Navigate to <code>http://127.0.0.1:8000/docs</code> and prepare to be impressed. FastAPI automatically created interactive documentation for your entire API. You can test every endpoint right in the browser - no Postman needed.</p><p>Try creating a book:</p><ol><li>Click on the <code>POST /books</code> endpoint</li><li>Click &ldquo;Try it out&rdquo;</li><li>Enter this sample data:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;The Python Guide&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Real Python&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;A comprehensive guide to Python programming&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;published_year&#34;</span><span class=p>:</span> <span class=mi>2023</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0123456789&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li>Click &ldquo;Execute&rdquo;</li></ol><p>You should get a successful response with your newly created book in the standard format:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;meta&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Book created successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;The Python Guide&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Real Python&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;A comprehensive guide to Python programming&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;published_year&#34;</span><span class=p>:</span> <span class=mi>2023</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0123456789&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=testing-your-api>Testing Your API</h2><p>Let&rsquo;s test all our endpoints to make sure everything works. You can use the interactive docs at <code>http://127.0.0.1:8000/docs</code>, or test via command line with these examples:</p><h3 id=method-1-copy-paste-ready-commands>Method 1: Copy-Paste Ready Commands</h3><p><strong>Create a book (single line - just copy and paste):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST <span class=s2>&#34;http://127.0.0.1:8000/books&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;title&#34;: &#34;FastAPI for Beginners&#34;, &#34;author&#34;: &#34;Jane Developer&#34;, &#34;description&#34;: &#34;Learn FastAPI step by step&#34;, &#34;published_year&#34;: 2024, &#34;isbn&#34;: &#34;978-0987654321&#34;}&#39;</span>
</span></span></code></pre></div><p><strong>Get all books:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;http://127.0.0.1:8000/books&#34;</span>
</span></span></code></pre></div><p><strong>Get a specific book:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;http://127.0.0.1:8000/books/1&#34;</span>
</span></span></code></pre></div><p><strong>Update a book:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT <span class=s2>&#34;http://127.0.0.1:8000/books/1&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;title&#34;: &#34;FastAPI for Beginners - Updated Edition&#34;}&#39;</span>
</span></span></code></pre></div><p><strong>Delete a book:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE <span class=s2>&#34;http://127.0.0.1:8000/books/1&#34;</span>
</span></span></code></pre></div><h3 id=method-2-using-json-files-recommended-for-complex-data>Method 2: Using JSON Files (Recommended for Complex Data)</h3><p>For easier testing with complex data, create JSON files:</p><p><strong>Create <code>book.json</code>:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt; book.json <span class=s>&lt;&lt; &#39;EOF&#39;
</span></span></span><span class=line><span class=cl><span class=s>{
</span></span></span><span class=line><span class=cl><span class=s>  &#34;title&#34;: &#34;FastAPI for Beginners&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;author&#34;: &#34;Jane Developer&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;description&#34;: &#34;Learn FastAPI step by step&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;published_year&#34;: 2024,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;isbn&#34;: &#34;978-0987654321&#34;
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p><strong>Then use the file:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST <span class=s2>&#34;http://127.0.0.1:8000/books&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> --data-binary @book.json
</span></span></code></pre></div><p><strong>Create <code>update.json</code>:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt; update.json <span class=s>&lt;&lt; &#39;EOF&#39;
</span></span></span><span class=line><span class=cl><span class=s>{
</span></span></span><span class=line><span class=cl><span class=s>  &#34;title&#34;: &#34;FastAPI for Beginners - Updated Edition&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;description&#34;: &#34;Learn FastAPI step by step with the latest updates&#34;
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p><strong>Update using file:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT <span class=s2>&#34;http://127.0.0.1:8000/books/1&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> --data-binary @update.json
</span></span></code></pre></div><h3 id=expected-response-examples>Expected Response Examples</h3><p><strong>Successful book creation:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;meta&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Book created successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;FastAPI for Beginners&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Jane Developer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Learn FastAPI step by step&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;published_year&#34;</span><span class=p>:</span> <span class=mi>2024</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0987654321&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Get all books response:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;meta&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Books retrieved successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;FastAPI for Beginners&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;Jane Developer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Learn FastAPI step by step&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;published_year&#34;</span><span class=p>:</span> <span class=mi>2024</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;isbn&#34;</span><span class=p>:</span> <span class=s2>&#34;978-0987654321&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=testing-with-pagination>Testing with Pagination</h3><p><strong>Get books with pagination:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;http://127.0.0.1:8000/books?skip=0&amp;limit=5&#34;</span>
</span></span></code></pre></div><p><strong>Get second page:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;http://127.0.0.1:8000/books?skip=5&amp;limit=5&#34;</span>
</span></span></code></pre></div><h2 id=understanding-the-code>Understanding the Code</h2><p>Before we move on, let me explain a few important concepts that might not be obvious:</p><p><strong>Dependency Injection:</strong> The <code>Depends(get_db)</code> parameter in our endpoints is dependency injection. FastAPI automatically calls <code>get_db()</code> and provides the database session to your function.</p><p><strong>Type Hints:</strong> Notice how we specify types like <code>book_id: int</code> and <code>response_model=List[book_schemas.BookResponse]</code>. This isn&rsquo;t just for documentation - FastAPI uses these to validate data and provide better error messages.</p><p><strong>HTTP Status Codes:</strong> We use appropriate status codes like 201 for created resources and 404 for not found. This makes our API more professional and easier to integrate with.</p><p><strong>Error Handling:</strong> When something goes wrong (like trying to access a non-existent book), we raise HTTPException with appropriate status codes and messages.</p><h2 id=adding-more-features>Adding More Features</h2><p>Want to extend your API? Here are some ideas:</p><p><strong>Search functionality:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/books/search&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>List</span><span class=p>[</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>BookResponse</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_books</span><span class=p>(</span><span class=n>q</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>books</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>title</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=n>q</span><span class=p>)</span> <span class=o>|</span> 
</span></span><span class=line><span class=cl>        <span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>author</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=n>q</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>books</span>
</span></span></code></pre></div><p><strong>Filtering by author:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/books/by-author/</span><span class=si>{author}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>List</span><span class=p>[</span><span class=n>book_schemas</span><span class=o>.</span><span class=n>BookResponse</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_books_by_author</span><span class=p>(</span><span class=n>author</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>db</span><span class=p>:</span> <span class=n>Session</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_db</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>books</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>book_models</span><span class=o>.</span><span class=n>Book</span><span class=o>.</span><span class=n>author</span> <span class=o>==</span> <span class=n>author</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>books</span>
</span></span></code></pre></div><h2 id=common-issues-and-solutions>Common Issues and Solutions</h2><p><strong>Import Errors:</strong> Make sure all your <code>__init__.py</code> files exist and you&rsquo;re running commands from the project root.</p><p><strong>Database Errors:</strong> If you get database-related errors, delete the <code>books.db</code> file and restart the application to recreate it.</p><p><strong>Port Already in Use:</strong> If port 8000 is busy, use a different port: <code>uvicorn app.main:app --reload --port 8001</code></p><p><strong>curl Command Issues:</strong> If you get &ldquo;command not found&rdquo; errors when copying multiline curl commands, use the single-line versions provided above, or create JSON files as shown in Method 2.</p><p><strong>JSON Parsing Errors:</strong> Make sure your JSON is valid. If you get &ldquo;Field required&rdquo; errors, check that your JSON structure matches the expected schema. Use the interactive docs at <code>/docs</code> to see the exact format needed.</p><p><strong>Permission Errors:</strong> On some systems, you might need to escape quotes differently. If single quotes don&rsquo;t work, try double quotes with escaped inner quotes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST <span class=s2>&#34;http://127.0.0.1:8000/books&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s2>&#34;{\&#34;title\&#34;: \&#34;FastAPI for Beginners\&#34;, \&#34;author\&#34;: \&#34;Jane Developer\&#34;}&#34;</span>
</span></span></code></pre></div><h2 id=next-steps>Next Steps</h2><p>Congratulations! You&rsquo;ve built a complete REST API from scratch. Here&rsquo;s what you can do next:</p><ol><li><strong>Add Authentication:</strong> Protect your endpoints with <a href=/2025/08/fastapi-jwt-auth-oauth2-password-flow-pydantic-v2-sqlalchemy-2.html>JWT authentication and OAuth2 password flow</a></li><li><strong>Deploy to Production:</strong> Learn how to <a href=/2025/08/deploy-fastapi-ubuntu-24-04-gunicorn-nginx-certbot.html>deploy FastAPI on Ubuntu 24.04 with Nginx and HTTPS</a></li><li><strong>Add Validation:</strong> Implement more complex validation rules with Pydantic</li><li><strong>Add Tests:</strong> Write unit tests for your endpoints</li><li><strong>Add a Frontend:</strong> Build a web interface to interact with your API</li><li><strong>Scale with Docker:</strong> Containerize your application for easier deployment</li></ol><h2 id=wrapping-up>Wrapping Up</h2><p>Look at what you just built - a real REST API that handles data, validates input, and documents itself. That&rsquo;s not trivial stuff. You went from zero to having something that could actually power a web app or mobile app.</p><p>What I love about this setup is how easy it is to extend. Need user accounts? Add a User model. Want to track book reviews? Create a Review endpoint. The foundation is solid, and FastAPI handles the boring stuff so you can focus on the interesting problems.</p><p>Keep experimenting with different endpoints and features. The best way to learn API development is by building real projects and solving real problems. Your Book Library API is just the beginning - imagine what you&rsquo;ll build next!</p></p><div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded"><h2 class="text-lg font-semibold mb-2">📌 Read Also</h2><ul class="list-disc list-outside ml-5"><li><a href=/2025/08/fastapi-jwt-auth-oauth2-password-flow-pydantic-v2-sqlalchemy-2.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">FastAPI JWT Auth with OAuth2 Password Flow (Pydantic v2 + SQLAlchemy 2.0)</a></li><li><a href=/2025/08/deploy-fastapi-ubuntu-24-04-gunicorn-nginx-certbot.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Deploy FastAPI on Ubuntu 24.04: Gunicorn + Nginx + Certbot (HTTPS)</a></li></ul></div><div class="hidden lg:block"><div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><div class="block lg:hidden my-8 px-2 mb-10"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:50px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="lg:hidden mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><div class="grid gap-3"><a href=/2025/08/essential-linux-commands-every-developer-must-know-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Essential Linux Commands Every Developer Must Know in 2025</h4><p class="text-xs text-gray-500 dark:text-gray-400">31 Aug 2025</p></a><a href=/2025/08/grpc-in-go-complete-guide-basics-production.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">gRPC in Go: Complete Guide from Basics to Production Ready Services</h4><p class="text-xs text-gray-500 dark:text-gray-400">28 Aug 2025</p></a><a href=/2025/08/10-essential-vscode-extensions-developers-2025.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">10 Essential VS Code Extensions Every Developer Must Have in 2025</h4><p class="text-xs text-gray-500 dark:text-gray-400">26 Aug 2025</p></a><a href=/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">FastAPI Tutorial: Build REST API from Scratch (Beginner Guide)</h4><p class="text-xs text-gray-500 dark:text-gray-400">25 Aug 2025</p></a><a href=/2025/08/deploy-laravel-to-vps-with-nginx-complete-guide.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Deploy Laravel Application to VPS with Nginx: Complete Production Guide</h4><p class="text-xs text-gray-500 dark:text-gray-400">24 Aug 2025</p></a></div></div></article><aside class="space-y-10 hidden lg:block"><div><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><ul class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"><li><a href=/2025/08/essential-linux-commands-every-developer-must-know-2025.html class="hover:text-[#0f7ea9] transition">Essential Linux Commands Every Developer Must Know in 2025</a></li><li><a href=/2025/08/grpc-in-go-complete-guide-basics-production.html class="hover:text-[#0f7ea9] transition">gRPC in Go: Complete Guide from Basics to Production Ready Services</a></li><li><a href=/2025/08/10-essential-vscode-extensions-developers-2025.html class="hover:text-[#0f7ea9] transition">10 Essential VS Code Extensions Every Developer Must Have in 2025</a></li><li><a href=/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html class="hover:text-[#0f7ea9] transition">FastAPI Tutorial: Build REST API from Scratch (Beginner Guide)</a></li><li><a href=/2025/08/deploy-laravel-to-vps-with-nginx-complete-guide.html class="hover:text-[#0f7ea9] transition">Deploy Laravel Application to VPS with Nginx: Complete Production Guide</a></li></ul></div><div class=mt-8><div class="hidden lg:block"><div id=stickySidebarAd class="sticky top-8 transition-all duration-300"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="mx-auto w-[300px] min-h-[250px] overflow-hidden sticky-ad-container"><button id=closeStickyAd class="absolute top-2 right-2 w-6 h-6 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-600 text-xs transition-colors z-10 hidden">
×
</button>
<ins class="adsbygoogle sticky-ad-unit" style=display:block;background-color:inherit;min-height:250px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><style>.sticky-ad-container{position:relative}.sticky-ad-container:hover #closeStickyAd{display:block}#stickySidebarAd{will-change:transform}@media(min-width:1024px){#stickySidebarAd{max-height:calc(100vh - 120px)}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("stickySidebarAd"),t=document.getElementById("closeStickyAd");if(t&&t.addEventListener("click",function(){e&&(e.style.display="none",localStorage.setItem("stickySidebarHidden","true"))}),localStorage.getItem("stickySidebarHidden")==="true"&&e&&(e.style.display="none"),e&&window.IntersectionObserver){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});t.observe(e)}})</script></div></aside></div><section id=comments class=mt-12><script src=https://giscus.app/client.js data-repo=wikukarno/buanacoding data-repo-id=R_kgD0Oj4jAw data-category=General data-category-id=DIC_kwD0Oj4jA84Cr_fx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></main><div class=py-6><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300"><div class="text-center space-x-4 text-sm font-medium"><a href=/about class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
<span>-</span>
<a href=/contact class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
<span>-</span>
<a href=/privacy-policy class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
<span>-</span>
<a href=/disclaimer class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a></div></div><footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">&copy; 2025 buanacoding.com</footer><button id=scrollToTop class="fixed bottom-6 right-6 lg:bottom-6 lg:right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300 z-50" aria-label="Scroll to top">
<svg fill="none" class="w-4 h-4" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg></button><style>body.floating-ad-active #scrollToTop{bottom:100px !important}@media(min-width:1024px){body.floating-ad-active #scrollToTop{bottom:1.5rem !important}}</style><div id=floatingMobileAd class="lg:hidden fixed bottom-0 left-0 right-0 z-40 transform transition-transform duration-300 translate-y-0"><div class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-lg"><div class="flex items-center justify-between px-2 py-1 max-w-sm mx-auto"><button id=closeFloatingMobile class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors flex-shrink-0">
<span class="text-lg leading-none">×</span></button><div class="flex-1 mx-2 min-h-[50px] flex items-center justify-center"><ins class="adsbygoogle floating-mobile-ad" style=display:block;background-color:inherit;width:100%;max-width:320px;height:50px data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=false></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="w-8 flex-shrink-0"></div></div><div class="text-center pb-1"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide">Ad</span></div></div></div><style>#floatingMobileAd{z-index:40;transition:transform .3s ease-in-out,opacity .3s ease-in-out}#floatingMobileAd.hidden-mobile-ad{transform:translateY(100%);opacity:0}body.floating-ad-active{padding-bottom:70px}.floating-mobile-ad{pointer-events:auto}@media(min-width:1024px){#floatingMobileAd{display:none !important}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("floatingMobileAd"),s=document.getElementById("closeFloatingMobile"),t=document.body;e&&window.innerWidth<1024&&t.classList.add("floating-ad-active"),s&&s.addEventListener("click",function(){e&&(e.classList.add("hidden-mobile-ad"),t.classList.remove("floating-ad-active"),localStorage.setItem("floatingMobileHidden","true"),setTimeout(()=>{e.style.display="none"},300))}),localStorage.getItem("floatingMobileHidden")==="true"&&e&&(e.style.display="none",t.classList.remove("floating-ad-active"));let n=0,o;e&&localStorage.getItem("floatingMobileHidden")!=="true"&&window.addEventListener("scroll",function(){clearTimeout(o),o=setTimeout(()=>{const t=window.pageYOffset||document.documentElement.scrollTop;t>n&&t>100?e.style.transform="translateY(100%)":t<n&&(e.style.transform="translateY(0)"),n=t<=0?0:t},50)}),window.addEventListener("resize",function(){window.innerWidth>=1024?t.classList.remove("floating-ad-active"):e&&localStorage.getItem("floatingMobileHidden")!=="true"&&t.classList.add("floating-ad-active")})})</script><div id=google_translate_element style=display:none></div><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.4.6></script><script>feather.replace();const btn=document.getElementById("scrollToTop"),html=document.documentElement,toggleBtn=document.getElementById("theme-toggle"),toggleBtnMobile=document.getElementById("theme-toggle-mobile"),iconSun=document.getElementById("icon-sun"),iconMoon=document.getElementById("icon-moon"),iconSunMobile=document.getElementById("icon-sun-mobile"),iconMoonMobile=document.getElementById("icon-moon-mobile");document.getElementById("menu-toggle")?.addEventListener("click",()=>{document.getElementById("mobile-menu")?.classList.toggle("hidden")}),btn.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>300?btn.style.display="flex":btn.style.display="none"}),btn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});function updateIcons(e){iconSun.classList.toggle("hidden",!e),iconMoon.classList.toggle("hidden",e),iconSunMobile.classList.toggle("hidden",!e),iconMoonMobile.classList.toggle("hidden",e)}function setDarkMode(e){html.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light"),updateIcons(e)}const userPref=localStorage.getItem("theme"),systemPref=window.matchMedia("(prefers-color-scheme: dark)").matches,isDark=userPref==="dark"||!userPref&&systemPref;setDarkMode(isDark),toggleBtn?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),toggleBtnMobile?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),document.querySelectorAll("pre").forEach(e=>{const t=document.createElement("button");t.innerHTML=`
      <span>Copy</span>
    `,t.className=`
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();const n=document.createElement("div");n.className="relative",e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),t.addEventListener("click",()=>{const n=e.innerText;navigator.clipboard.writeText(n).then(()=>{t.querySelector("span").innerText="Copied!",setTimeout(()=>{t.querySelector("span").innerText="Copy"},2e3)})})});const openBtn=document.getElementById("openSearchModal"),closeBtn=document.getElementById("closeSearchModal"),modal=document.getElementById("searchModal");openBtn.addEventListener("click",()=>{console.log("Search modal opened"),modal.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtn.addEventListener("click",()=>{modal.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modal.classList.add("hidden")}),fetch("/index.json").then(e=>e.json()).then(e=>{const n=new Fuse(e,{keys:["title","content"],threshold:.3}),s=document.getElementById("searchBox"),t=document.getElementById("results");s.addEventListener("input",function(e){const o=e.target.value.trim(),s=document.getElementById("searchAdBanner");if(o.length<2){t.innerHTML="",s&&(s.classList.remove("show"),s.classList.add("hide"),setTimeout(()=>s.style.display="none",300));return}s&&(s.style.display="block",s.classList.remove("hide"),s.classList.add("show"));const i=n.search(o);if(i.length===0)t.innerHTML=`
            <li class='px-4 py-3 text-center text-gray-500 dark:text-gray-400'>
              <div class="mb-2">📄 No results found for "${o}"</div>
              <div class="text-xs">Try different keywords or browse categories below</div>
            </li>
          `;else{let e="";i.forEach((t,n)=>{e+=`
              <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                <a href="${t.item.href}" class="block font-semibold text-gray-900 dark:text-white no-underline">${t.item.title}</a>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.item.content.substring(0,100)}...</p>
              </li>
            `,(n+1)%3===0&&n<i.length-1&&(e+=`
                <li class="px-4 py-2 bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                  <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">📚 More related articles</div>
                </li>
              `)}),t.innerHTML=e}})});const openBtnMobile=document.getElementById("openSearchModalMobile"),closeBtnMobile=document.getElementById("closeSearchModal"),modalMobile=document.getElementById("searchModal");openBtnMobile.addEventListener("click",()=>{console.log("Search modal opened (mobile)"),modalMobile.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtnMobile.addEventListener("click",()=>{modalMobile.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modalMobile.classList.add("hidden")}),function(){function t(e,t){if(window.google&&window.google.translate&&window.google.translate.TranslateElement){e&&e();return}if(window.__gtReadyCallbacks=window.__gtReadyCallbacks||[],e&&window.__gtReadyCallbacks.push(e),window.__gtLoading)return;window.__gtLoading=!0,window.initGoogleTranslate=function(){try{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"id",autoDisplay:!1},"google_translate_element")}catch{}(window.__gtReadyCallbacks||[]).forEach(function(e){try{e()}catch{}}),window.__gtReadyCallbacks=[]};var s,n=document.createElement("script");n.src="https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate",n.defer=!0,s=!1,n.onerror=function(){s=!0,t&&t()},setTimeout(function(){(!window.google||!window.google.translate)&&(s=!0,t&&t())},4e3),document.head.appendChild(n)}function n(e,t){document.cookie=e+"="+t+"; path=/; expires="+new Date(Date.now()+365*24*3600*1e3).toUTCString()}function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}function s(){if(document.getElementById("translate-fallback"))return;var e=document.createElement("div");e.id="translate-fallback",e.style.cssText="position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;",e.innerHTML='<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span><button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button><button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>',document.body.appendChild(e),document.getElementById("btnCloseTf").onclick=function(){e.remove()},document.getElementById("btnTryId").onclick=function(){var t=new URL(location.href),e=location.pathname;e.startsWith("/id/")||(t.pathname="/id"+(e.startsWith("/")?e:"/"+e)),fetch(t,{method:"HEAD"}).then(function(e){e.ok?location.href=t:location.href="/id/"}).catch(function(){location.href="/id/"})}}function o(e){t(function(){var t=document.querySelector(".goog-te-combo");t?(t.value=e,t.dispatchEvent(new Event("change"))):(n("googtrans","/en/"+e),location.reload())},s)}function i(){e("googtrans"),e("GOOGTRANS")}document.querySelectorAll(".js-lang-link").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-lang"),s=e.getAttribute("data-has-trans")==="true";if(n==="en"){i();return}s||(t.preventDefault(),o(n))})})}()</script></body></html>