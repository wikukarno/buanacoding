<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  
  
  

  
  <title>Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL | Buana Coding</title>

  
  <meta name="description" content="Panduan praktik terbaik keamanan API di Laravel 12: rate limit dinamis per user/token, konfigurasi CORS yang aman, serta Signed URL (sementara) dengan contoh implementasi produksi." />

  
  
    <meta name="keywords" content="laravel 12, api security, rate limit, cors, signed url, throttle, php 8.4" />
  

  
  <link rel="canonical" href="http://localhost:1313/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html" />

  
  
  
  
  
    <link rel="alternate" hreflang="en" href="http://localhost:1313/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html" />
  
  

  
  
  <meta property="og:type" content="article" />
  
  <meta property="og:title" content="Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL | Buana Coding" />
  <meta property="og:description" content="Panduan praktik terbaik keamanan API di Laravel 12: rate limit dinamis per user/token, konfigurasi CORS yang aman, serta Signed URL (sementara) dengan contoh implementasi produksi." />
  <meta property="og:url" content="http://localhost:1313/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html" />
  <meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg" />

  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL | Buana Coding" />
  <meta name="twitter:description" content="Panduan praktik terbaik keamanan API di Laravel 12: rate limit dinamis per user/token, konfigurasi CORS yang aman, serta Signed URL (sementara) dengan contoh implementasi produksi." />
  <meta name="twitter:image" content="https://www.buanacoding.com/images/og-image.jpg" />

  
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL | Buana Coding",
    "description": "Panduan praktik terbaik keamanan API di Laravel 12: rate limit dinamis per user\/token, konfigurasi CORS yang aman, serta Signed URL (sementara) dengan contoh implementasi produksi.",
    "inLanguage": "en",
    "datePublished": "2025-08-23T10:00:00\u002b07:00",
    "dateModified": "2025-08-23T10:00:00\u002b07:00",
    "author": {
      "@type": "Person",
      "name": "Wiku Karno"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/2025\/08\/laravel-12-api-security-rate-limit-cors-signed-url.html"
    },
    "image": "https:\/\/www.buanacoding.com\/images\/og-image.jpg",
    "publisher": {
      "@type": "Organization",
      "name": "Buana Coding"
    }
  }
  </script>
  

  
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css?v=1755931477" />
  <link rel="stylesheet" href="/css/overrides.css?v=1755931477" />
  <link rel="stylesheet" href="/css/syntax.css?v=1755931477" />

  
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', {
      'ad_storage': 'granted',
      'ad_user_data': 'granted',
      'ad_personalization': 'granted',
      'analytics_storage': 'granted'
    });
  </script>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0EN9J73FXF');
</script>




</head>

  <body
    class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"
  >
    
    <header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-extrabold tracking-wide">
      <a href="/" class="hover:opacity-90">BUANACODING</a>
    </h1>

    
    <nav
      class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"
    >
      
      
      
        
          
          
            <a
              href="/tags/go"
              class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
            >
              Go
            </a>
          
        
          
          
            <a
              href="/tags/laravel"
              class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
            >
              Laravel
            </a>
          
        
          
          
            <a
              href="/tags/linux"
              class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
            >
              Linux
            </a>
          
        
          
          
            <a
              href="/tags/python"
              class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
            >
              Python
            </a>
          
        
          
          
            <a
              href="/tags/security"
              class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
            >
              Security
            </a>
          
        
      

      
      <div class="hidden md:flex items-center">
        
        
        <div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium">
          
            
            
            
            
              
              
            
            
            <a href="/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html"
               data-lang="en" data-has-trans="true"
               class="js-lang-link px-2 py-1 bg-white/20 text-white">
              EN
            </a>
          
            
            
            
            
            
              
              
                
              
            
            <a href="/id/"
               data-lang="id" data-has-trans="false"
               class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">
              ID
            </a>
          
        </div>
      </div>

      
      <button
        id="openSearchModal"
        class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300"
        aria-label="Search"
      >
        <i data-feather="search" class="w-5 h-5"></i>
      </button>

      
      <button
        id="theme-toggle"
        class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer"
        aria-label="Toggle Dark Mode"
      >
        
        <i id="icon-sun" data-feather="sun" class="w-5 h-5 hidden"></i>
        <i id="icon-moon" data-feather="moon" class="w-5 h-5"></i>
      </button>
    </nav>

    
    <button id="menu-toggle" class="md:hidden text-2xl focus:outline-none">
      â˜°
    </button>
  </div>

  
  <div id="mobile-menu" class="hidden md:hidden px-4 pb-4 space-y-2">
    
    
      
        
        
        <a
          href="/tags/go"
          class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
        >
          Go
        </a>
        
      
        
        
        <a
          href="/tags/laravel"
          class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
        >
          Laravel
        </a>
        
      
        
        
        <a
          href="/tags/linux"
          class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
        >
          Linux
        </a>
        
      
        
        
        <a
          href="/tags/python"
          class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
        >
          Python
        </a>
        
      
        
        
        <a
          href="/tags/security"
          class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
        >
          Security
        </a>
        
      
    

    <div class="flex flex-col items-start gap-4 mt-2">
      
      <div class="flex items-center gap-3">
        <span class="text-xs opacity-80">English</span>
        
          
            <a href="/" class="text-white hover:text-[#0f7ea9] text-sm">English</a>
          
            <a href="/id/" class="text-white hover:text-[#0f7ea9] text-sm">Indonesia</a>
          
        
      </div>

      
      <button
        id="openSearchModalMobile"
        class="text-white hover:text-[#0f7ea9] transition duration-300"
        aria-label="Search"
      >
        <i data-feather="search" class="w-5 h-5"></i>
      </button>

      
      <div class="flex items-center">
        
        
        <div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium">
          
            
            
            
            
              
              
            
            
            <a href="/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html"
               data-lang="en" data-has-trans="true"
               class="js-lang-link px-2 py-1 bg-white/20 text-white">
              EN
            </a>
          
            
            
            
            
            
              
              
                
              
            
            <a href="/id/"
               data-lang="id" data-has-trans="false"
               class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">
              ID
            </a>
          
        </div>
      </div>

      
      <button
        id="theme-toggle-mobile"
        class="text-white hover:text-[#0f7ea9] transition duration-300"
        aria-label="Toggle Dark Mode"
      >
        <i id="icon-sun-mobile" data-feather="sun" class="w-5 h-5 hidden"></i>
        <i id="icon-moon-mobile" data-feather="moon" class="w-5 h-5"></i>
      </button>
    </div>
  </div>
</header>


<div
  id="searchModal"
  class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"
>
  <div
    class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"
  >
    
    <button
      id="closeSearchModal"
      class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110"
    >
      <i
        data-feather="x"
        class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"
      ></i>
    </button>

    
    <input
      type="text"
      id="searchBox"
      placeholder="Search articles..."
      class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"
    />

    
    <ul
      id="results"
      class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"
    ></ul>
  </div>
</div>


    
    <main class="flex-1 w-full">
      <div class="max-w-7xl mx-auto py-8 px-4">
        
<div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8">
  
  <article class="prose prose-blue dark:prose-invert lg:col-span-2">
    <nav class="text-sm text-gray-500 dark:text-gray-400 mb-4">
      <a href="/" class="hover:text-[#0f7ea9] font-medium">Home</a>
      <span class="mx-2">/</span>
      
        
        
          <a href="/tags/laravel" class="hover:text-[#0f7ea9] font-medium">#Laravel</a>
        
      
    </nav>


    <h1>Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL</h1>

    
    

    
    



<div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700">
  <span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
  
  
  <a href="https://twitter.com/intent/tweet?text=Keamanan&#43;API&#43;Laravel&#43;12%3A&#43;Rate&#43;Limit&#43;Dinamis%2C&#43;CORS%2C&#43;dan&#43;Signed&#43;URL&url=http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html&via=buanacoding" 
     target="_blank" rel="noopener"
     class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200"
     title="Share on Twitter">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
      <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
    </svg>
  </a>

  
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html" 
     target="_blank" rel="noopener"
     class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200"
     title="Share on Facebook">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
    </svg>
  </a>

  
  <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html" 
     target="_blank" rel="noopener"
     class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200"
     title="Share on LinkedIn">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
      <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
    </svg>
  </a>

  
  <a href="https://wa.me/?text=Keamanan&#43;API&#43;Laravel&#43;12%3A&#43;Rate&#43;Limit&#43;Dinamis%2C&#43;CORS%2C&#43;dan&#43;Signed&#43;URL%20http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html" 
     target="_blank" rel="noopener"
     class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200"
     title="Share on WhatsApp">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.484 3.488"/>
    </svg>
  </a>

  
  <button onclick="copyLinkHeader('http:\/\/localhost:1313\/2025\/08\/laravel-12-api-security-rate-limit-cors-signed-url.html')" 
          class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200"
          title="Copy Link">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
    </svg>
  </button>

  
  <span id="copy-header-success" class="hidden text-xs text-green-600 dark:text-green-400 font-medium">
    Copied!
  </span>
</div>

<script>
function copyLinkHeader(url) {
  navigator.clipboard.writeText(url).then(function() {
    showHeaderSuccess();
  }).catch(function(err) {
    
    const textArea = document.createElement('textarea');
    textArea.value = url;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    showHeaderSuccess();
  });
}

function showHeaderSuccess() {
  const successMsg = document.getElementById('copy-header-success');
  successMsg.classList.remove('hidden');
  
  
  setTimeout(function() {
    successMsg.classList.add('hidden');
  }, 2000);
}
</script>

    
    
    
    
    
    
    

    
    
      <p>Artikel ini membahas tiga pilar keamanan API di Laravel 12 yang paling sering dibutuhkan di produksi: rate limiting dinamis, CORS yang aman, dan Signed URL yang kedaluwarsa otomatis. Seluruh contoh mengikuti struktur Laravel 12 dan dapat diterapkan pada API publik maupun private.</p>
    
      
<p>Apa yang akan Anda pelajari</p>
    
      
<ul>
<li>Rate limit dinamis per user/token/role (tiering: free vs pro)</li>
<li>Konfigurasi CORS aman berdasarkan environment/domain</li>
<li>Signed URL sementara untuk endpoint sensitif (download, oneâ€‘time link)</li>
<li>Contoh uji (Pest) untuk memastikan perilaku keamanan</li>
</ul>
<p>Prasyarat</p>
    
    
    
    
      
<div class="my-8 flex justify-center">
  <div class="w-full max-w-2xl">
    
    
    <div class="border border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-center text-xs py-4 px-6 rounded-lg text-gray-500 dark:text-gray-400">
      ðŸ“¢ Ad placeholder: Inâ€‘Article (native style)
    </div>
    
  </div>
</div>

    
    
    
    
      
        
<ul>
<li>Laravel 12, PHP 8.3/8.4, Redis (opsional untuk queue/cache)</li>
<li>Autentikasi API (Sanctum/Passport/JWT) untuk identitas user/token</li>
</ul>
<ol>
<li>Rate Limiting Dinamis (per user/token/role)
Laravel menyediakan <code>RateLimiter::for()</code> untuk mendefinisikan limiter kustom. Di skeleton Laravel 12 Anda bisa meletakkan konfigurasi di <code>routes/api.php</code> atau file konfigurasi terpisah yang dipanggil dalam bootstrap.</li>
</ol>
<p>Contoh: limiter dasar per menit, dibedakan per user ID atau IP fallback</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// routes/api.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\RateLimiter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Cache\RateLimiting\Limit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">RateLimiter</span><span class="o">::</span><span class="na">for</span><span class="p">(</span><span class="s1">&#39;api&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$key</span> <span class="o">=</span> <span class="nx">optional</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">id</span>
</span></span><span class="line"><span class="cl">        <span class="o">??</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">bearerToken</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">??</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ip</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Limit</span><span class="o">::</span><span class="na">perMinute</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">by</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">-&gt;</span><span class="na">response</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Too Many Requests&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;retry_after&#39;</span> <span class="o">=&gt;</span> <span class="mi">60</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span> <span class="mi">429</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Contoh: tiering dinamis (FREE vs PRO) via closure</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">RateLimiter</span><span class="o">::</span><span class="na">for</span><span class="p">(</span><span class="s1">&#39;api-tiered&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">plan</span> <span class="o">??</span> <span class="s1">&#39;FREE&#39;</span><span class="p">;</span> <span class="c1">// misal kolom plan di users
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$key</span>  <span class="o">=</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">id</span> <span class="o">??</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ip</span><span class="p">())</span><span class="o">.</span><span class="s2">&#34;:</span><span class="si">{</span><span class="nv">$plan</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$limit</span> <span class="o">=</span> <span class="nx">match</span> <span class="p">(</span><span class="nv">$plan</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PRO&#39;</span> <span class="o">=&gt;</span> <span class="mi">600</span><span class="p">,</span>   <span class="c1">// 600 req/menit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s1">&#39;TEAM&#39;</span> <span class="o">=&gt;</span> <span class="mi">300</span><span class="p">,</span>  <span class="c1">// 300 req/menit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">default</span> <span class="o">=&gt;</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1">// FREE
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Window 60 detik (per menit) â€” gunakan perMinute atau perSeconds
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Opsi A (sederhana):
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">Limit</span><span class="o">::</span><span class="na">perMinute</span><span class="p">(</span><span class="nv">$limit</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">by</span><span class="p">(</span><span class="nv">$key</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Opsi B (setel window eksplisit):
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// Limit::perSeconds($limit, 60)-&gt;by($key),
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Mengikat limiter ke route</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// routes/api.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">middleware</span><span class="p">([</span><span class="s1">&#39;throttle:api-tiered&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Contoh dengan controller (pastikan method/namespace benar)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/profile&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProfileController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/orders&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">OrderController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;store&#39;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Satu endpoint dengan limiter berbeda
</span></span></span><span class="line"><span class="cl"><span class="c1">// Opsi A (aman untuk testing): pakai closure
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/search&#39;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span><span class="s1">&#39;ok&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;throttle:api&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Opsi B (controller): pastikan pakai signature yang valid
</span></span></span><span class="line"><span class="cl"><span class="c1">// use App\Http\Controllers\SearchController;
</span></span></span><span class="line"><span class="cl"><span class="c1">// Route::get(&#39;/search&#39;, [SearchController::class, &#39;index&#39;])
</span></span></span><span class="line"><span class="cl"><span class="c1">//     -&gt;middleware(&#39;throttle:api&#39;);
</span></span></span></code></pre></div><p>Jika ingin Opsi B (controller), buat controller dengan method <code>index</code> atau gunakan controller invokable:</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">php artisan make:controller SearchController --invokable
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// app/Http/Controllers/SearchController.php (invokable)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SearchController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="fm">__invoke</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;q&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Atau versi nonâ€‘invokable:</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// app/Http/Controllers/SearchController.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SearchController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;q&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Tips Produksi</p>
      
        
<ul>
<li>Gunakan kunci <code>by()</code> yang stabil: user ID jika login; bearer token untuk API token; IP sebagai fallback.</li>
<li>Untuk public API heavy traffic, pertimbangkan Redis sebagai backend rate limiter (default queue/cache Laravel).</li>
<li>Log dan observasi 429 untuk mendeteksi penyalahgunaan dan menyesuaikan limit.</li>
</ul>
<ol start="2">
<li>CORS yang Aman (config/cors.php)
Sejak Laravel 7+, CORS terintegrasi lewat middleware <code>HandleCors</code>. Atur di <code>config/cors.php</code> dan kontrol asal (origin) via <code>.env</code>.</li>
</ol>
<p>Contoh konfigurasi CORS berbasis environment (trim spasi agar bersih)</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// config/cors.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">return</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;paths&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;api/*&#39;</span><span class="p">,</span> <span class="s1">&#39;sanctum/csrf-cookie&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;allowed_methods&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Gunakan ENV agar mudah diatur per lingkungan
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;allowed_origins&#39;</span> <span class="o">=&gt;</span> <span class="nx">array_values</span><span class="p">(</span><span class="nx">array_filter</span><span class="p">(</span><span class="nx">array_map</span><span class="p">(</span><span class="s1">&#39;trim&#39;</span><span class="p">,</span> <span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;CORS_ALLOWED_ORIGINS&#39;</span><span class="p">,</span> <span class="s1">&#39;https://app.example.com&#39;</span><span class="p">))))),</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;allowed_origins_patterns&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;allowed_headers&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;exposed_headers&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;max_age&#39;</span> <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;supports_credentials&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;CORS_CREDENTIALS&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></div><p>Contoh <code>.env</code></p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-env" data-lang="env"><span class="line"><span class="cl"><span class="nv">CORS_ALLOWED_ORIGINS</span><span class="o">=</span>https://app.example.com,https://admin.example.com
</span></span><span class="line"><span class="cl"><span class="nv">CORS_CREDENTIALS</span><span class="o">=</span><span class="nb">false</span>
</span></span></code></pre></div><p>Tips Produksi CORS</p>
      
        
<ul>
<li>Batasi <code>allowed_origins</code> pada domain tepercaya (hindari <code>*</code> untuk aplikasi berautentikasi).</li>
<li>Jika perlu cookies/credential, aktifkan <code>supports_credentials</code> dan pastikan origin spesifik (bukan wildcard).</li>
<li>Pastikan reverse proxy (Nginx) tidak menimpa header CORS dari aplikasi.</li>
</ul>
<ol start="3">
<li>Signed URL (sementara, antiâ€‘tampering)
Signed URL menambahkan signature + kedaluwarsa; cocok untuk link sensitif seperti download invoice atau verifikasi.</li>
</ol>
<p>Definisi rute dengan middleware <code>signed</code></p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// routes/web.php (atau api.php jika relevan)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/invoices/{invoice}/download&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">InvoiceController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;download&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;invoices.download&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;signed&#39;</span><span class="p">);</span>
</span></span></code></pre></div><p>Alternatif cepat (tanpa controller, cocok untuk uji lokal)</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/invoices/{invoice}/download&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$invoice</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Validasi akses bila perlu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">noContent</span><span class="p">();</span> <span class="c1">// 204
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;invoices.download&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;signed&#39;</span><span class="p">);</span>
</span></span></code></pre></div><p>Membuat tautan bertanda tangan (sementara)</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\URL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$url</span> <span class="o">=</span> <span class="nx">URL</span><span class="o">::</span><span class="na">temporarySignedRoute</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;invoices.download&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="s1">&#39;invoice&#39;</span> <span class="o">=&gt;</span> <span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Kirim via email/notifikasi
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">notify</span><span class="p">(</span><span class="k">new</span> <span class="nx">InvoiceDownloadLink</span><span class="p">(</span><span class="nv">$url</span><span class="p">));</span>
</span></span></code></pre></div><p>Contoh controller sederhana</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// app/Http/Controllers/InvoiceController.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">InvoiceController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">download</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$invoice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Validasi hak akses user terhadap invoice di sini
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// return abort(404) jika tidak berhak
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Lanjutkan dengan stream/download file
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">download</span><span class="p">(</span><span class="nx">storage_path</span><span class="p">(</span><span class="s2">&#34;app/invoices/</span><span class="si">{</span><span class="nv">$invoice</span><span class="si">}</span><span class="s2">.pdf&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Catatan</p>
      
        
<ul>
<li>Jika signature tidak valid atau expired, middleware <code>signed</code> akan melempar 403.</li>
<li>Tambahkan validasi otorisasi selain signature (misal, hanya pemilik invoice yang boleh akses).</li>
</ul>
<p>Registrasi Middleware Kustom (Laravel 12)
Untuk middleware tambahan seperti <code>SecurityHeaders</code>, daftarkan alias dan, bila perlu, tambahkan ke grup (<code>web</code>/<code>api</code>) di <code>bootstrap/app.php</code>.</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// bootstrap/app.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">App\Http\Middleware\SecurityHeaders</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Foundation\Configuration\Middleware</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">Application</span><span class="o">::</span><span class="na">configure</span><span class="p">(</span><span class="nx">basePath</span><span class="o">:</span> <span class="nx">dirname</span><span class="p">(</span><span class="no">__DIR__</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">withMiddleware</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Middleware</span> <span class="nv">$middleware</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Alias agar bisa dipakai: -&gt;middleware(&#39;security.headers&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nv">$middleware</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;security.headers&#39;</span> <span class="o">=&gt;</span> <span class="nx">SecurityHeaders</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// (Opsional) tambahkan ke grup API secara global
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nv">$middleware</span><span class="o">-&gt;</span><span class="na">appendToGroup</span><span class="p">(</span><span class="s1">&#39;api&#39;</span><span class="p">,</span> <span class="nx">SecurityHeaders</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">withRouting</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>
</span></span></code></pre></div><ol start="4">
<li>Header Keamanan Tambahan (opsional)
Anda dapat menambahkan middleware ringan untuk header penting di semua respons.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// app/Http/Middleware/SecurityHeaders.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SecurityHeaders</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;X-Content-Type-Options&#39;</span><span class="p">,</span> <span class="s1">&#39;nosniff&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;X-Frame-Options&#39;</span><span class="p">,</span> <span class="s1">&#39;SAMEORIGIN&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Referrer-Policy&#39;</span><span class="p">,</span> <span class="s1">&#39;strict-origin-when-cross-origin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Tambahkan CSP sesuai kebutuhan aplikasi Anda
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// $response-&gt;headers-&gt;set(&#39;Content-Security-Policy&#39;, &#34;default-src &#39;self&#39;&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Daftarkan middleware pada bootstrap konfigurasi HTTP (atau kernel) sesuai skeleton Laravel 12 Anda.</p>
      
        
<p>4.5) Route Uji Throttle (untuk memverifikasi limiter)
Tambahkan route â€œprobeâ€ sederhana yang memakai limiter agar uji berjalan.</p>
      
        
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// routes/api.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/_probe&#39;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span><span class="s1">&#39;ok&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;throttle:api&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/_probe-tiered&#39;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span><span class="s1">&#39;ok&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">    <span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;throttle:api-tiered&#39;</span><span class="p">);</span>
</span></span></code></pre></div><ol start="5">
<li>Uji (Pest) untuk Keamanan
Contoh uji rate limit dan signed URL. Gunakan helper global <code>getJson()</code>/<code>get()</code> ala Pest.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// tests/Feature/ApiSecurityTest.php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\URL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Testing\Fluent\AssertableJson</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Pastikan rute bernama tersedia saat test berjalan (setelah aplikasi boot)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">beforeEach</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/invoices/{invoice}/download&#39;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">noContent</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;invoices.download&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;signed&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;enforces rate limit&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Panggil endpoint lebih dari limit dan pastikan 429
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">foreach</span> <span class="p">(</span><span class="nx">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">65</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$response</span> <span class="o">=</span> <span class="nx">getJson</span><span class="p">(</span><span class="s1">&#39;/api/_probe&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="mi">429</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;rejects invalid signed url&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$response</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/invoices/INV-1/download&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;accepts valid temporary signed url&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$url</span> <span class="o">=</span> <span class="nx">URL</span><span class="o">::</span><span class="na">temporarySignedRoute</span><span class="p">(</span><span class="s1">&#39;invoices.download&#39;</span><span class="p">,</span> <span class="nx">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addMinutes</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;invoice&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;INV-1&#39;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$response</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Catatan VS Code Extension (Laravel routes)</p>
      
        
<ul>
<li>Pesan â€œRoute [invoices.download] not foundâ€ di editor muncul jika ekstensi belum memproses perubahan atau rute belum dideklarasikan.</li>
<li>Simpan file rute dan jalankan <code>php artisan route:list</code> untuk memverifikasi. Setelah itu ekstensi biasanya hilang warningâ€‘nya.</li>
<li>Pada proyek Laravel standar, file <code>tests/Pest.php</code> sudah memuat <code>uses(Tests\\TestCase::class)-&gt;in('Feature', 'Unit');</code> sehingga helper seperti <code>getJson()</code> tersedia. Pastikan baris ini ada.</li>
</ul>
<p>Checklist Produksi Singkat</p>
      
        
<ul>
<li>Rate limiter tiered aktif dan dipantau (429 metrics/logs)</li>
<li>CORS dibatasi pada origin tepercaya, hindari wildcard untuk kredensial</li>
<li>Endpoint sensitif memakai <code>signed</code> + otorisasi tambahan</li>
<li>Header keamanan dasar terpasang; pertimbangkan CSP bertahap</li>
</ul>
<p>FAQ</p>
      
        
<ul>
<li>Beda <code>perMinute()</code> vs <code>by()</code>? <code>perMinute()</code> menetapkan jumlah request per menit, <code>by()</code> menentukan kunci unik (user/token/IP) agar limit dihitung per entitas, bukan global.</li>
<li>Bolehkah memakai wildcard <code>*</code> di <code>allowed_origins</code>? Untuk aplikasi berautentikasiâ€”tidak disarankan. Gunakan domain spesifik dan sesuaikan di <code>.env</code>.</li>
<li>Signed URL aman untuk data rahasia? Aman sepanjang kedaluwarsa singkat, signature tidak bocor, dan tetap ada otorisasi resourceâ€‘level.</li>
</ul>
<p>Itu dia. Dengan tiga pilar iniâ€”rate limit dinamis, CORS yang tepat, dan Signed URLâ€”API Laravel 12 Anda akan jauh lebih aman dan siap produksi.</p>
      
        
</p>
      
    

    
    <div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded">
      <h2 class="text-lg font-semibold mb-2">ðŸ“Œ Read Also</h2>
      
      
      
      
        
      
      
      <ul class="list-disc list-inside">
        
        <li>
          <a href="/2024/04/belajar-membuat-aplikasi-pertama-anda-dengan-laravel.html" class="text-blue-600 dark:text-blue-400 hover:underline">Belajar Membuat Aplikasi Pertama Anda dengan Laravel</a>
        </li>
        
        <li>
          <a href="/2024/04/5-laravel-extensions-that-you-must-install-on-your-visual-studio-code.html" class="text-blue-600 dark:text-blue-400 hover:underline">5 Laravel extensions that you must install on your Visual Studio Code</a>
        </li>
        
        <li>
          <a href="/2023/08/how-to-install-and-configure-yajra.html" class="text-blue-600 dark:text-blue-400 hover:underline">how to install and configure yajra datatable in Laravel </a>
        </li>
        
      </ul>
    </div>

    
    <div class="hidden lg:block">
      
<div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700">
  <div class="max-w-4xl mx-auto">
    
    
    <div class="border border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-center text-xs py-8 px-6 rounded-lg text-gray-500 dark:text-gray-400">
      ðŸ“± Ad placeholder: Responsive Banner (adapts to screen size)
    </div>
    
  </div>
</div>

    </div>

    
    
<div class="block lg:hidden my-8 px-2 mb-10">
  
  
  <div class="border border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-center text-xs py-4 px-6 rounded-lg text-gray-500 dark:text-gray-400">
    ðŸ“± Ad placeholder: Mobile Banner (320Ã—100)
  </div>
  
</div>

  </article>

  
  <aside class="space-y-10">
    
    <div>
      <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3>
      <ul
        class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"
      >
        
        <li>
          <a href="/2025/08/laravel-12-api-security-rate-limit-cors-signed-url.html" class="hover:text-[#0f7ea9] transition"
            >Keamanan API Laravel 12: Rate Limit Dinamis, CORS, dan Signed URL</a
          >
        </li>
        
        <li>
          <a href="/2025/08/what-are-passkeys-how-to-enable-google-apple-password-managers.html" class="hover:text-[#0f7ea9] transition"
            >What Are Passkeys? How to Enable Them on Google, Apple, and Password Managers (2025 Guide)</a
          >
        </li>
        
        <li>
          <a href="/2025/08/phishing-signs-fake-email-examples-how-to-avoid.html" class="hover:text-[#0f7ea9] transition"
            >Phishing: Signs, Fake Email Examples, and How to Avoid Them (2025 Guide)</a
          >
        </li>
        
        <li>
          <a href="/2025/08/fastapi-jwt-auth-oauth2-password-flow-pydantic-v2-sqlalchemy-2.html" class="hover:text-[#0f7ea9] transition"
            >FastAPI JWT Auth with OAuth2 Password Flow (Pydantic v2 &#43; SQLAlchemy 2.0)</a
          >
        </li>
        
        <li>
          <a href="/2025/08/install-ollama-openwebui-ubuntu-24-04.html" class="hover:text-[#0f7ea9] transition"
            >Install Ollama and Open WebUI on Ubuntu 24.04: Local AI (CPU/GPU)</a
          >
        </li>
        
      </ul>
    </div>

    
    <div class="hidden lg:block mt-8">
      
<div class="sticky top-8">
  
  
  <div class="border border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-center text-xs w-[300px] h-[250px] flex flex-col items-center justify-center rounded-lg mx-auto text-gray-500 dark:text-gray-400">
    <div class="text-lg mb-2">ðŸŽ¯</div>
    <div>Ad placeholder</div>
    <div class="text-xs opacity-70">300Ã—250 (sidebar)</div>
  </div>
  
</div>

    </div>
  </aside>
</div>


<section id="comments" class="mt-12">
  <script
    src="https://giscus.app/client.js"
    data-repo="wikukarno/buanacoding"
    data-repo-id="R_kgD0Oj4jAw"
    data-category="General"
    data-category-id="DIC_kwD0Oj4jA84Cr_fx"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async
  ></script>
</section>








<div class="fixed bottom-6 right-6 z-50 lg:hidden">
  
  <button id="share-toggle" 
          class="bg-[#0f7ea9] text-white p-3 rounded-full shadow-lg hover:bg-[#094d66] transition-all duration-300">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
    </svg>
  </button>

  
  <div id="share-options" class="hidden absolute bottom-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 min-w-[200px] border border-gray-200 dark:border-gray-700">
    <div class="space-y-2">
      
      <a href="https://twitter.com/intent/tweet?text=Keamanan&#43;API&#43;Laravel&#43;12%3A&#43;Rate&#43;Limit&#43;Dinamis%2C&#43;CORS%2C&#43;dan&#43;Signed&#43;URL&url=http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html&via=buanacoding" 
         target="_blank" rel="noopener"
         class="flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors">
        <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
        Twitter
      </a>

      
      <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html" 
         target="_blank" rel="noopener"
         class="flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors">
        <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
        </svg>
        Facebook
      </a>

      
      <a href="https://wa.me/?text=Keamanan&#43;API&#43;Laravel&#43;12%3A&#43;Rate&#43;Limit&#43;Dinamis%2C&#43;CORS%2C&#43;dan&#43;Signed&#43;URL%20http%3A%2F%2Flocalhost%3A1313%2F2025%2F08%2Flaravel-12-api-security-rate-limit-cors-signed-url.html" 
         target="_blank" rel="noopener"
         class="flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors">
        <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.484 3.488"/>
        </svg>
        WhatsApp
      </a>

      
      <button onclick="copyToClipboard('http:\/\/localhost:1313\/2025\/08\/laravel-12-api-security-rate-limit-cors-signed-url.html')" 
              class="flex items-center w-full p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors">
        <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
        </svg>
        Copy Link
      </button>
    </div>
  </div>

  
  <div id="copy-toast" class="hidden absolute bottom-16 right-0 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg text-sm">
    Link copied!
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const shareToggle = document.getElementById('share-toggle');
  const shareOptions = document.getElementById('share-options');
  
  shareToggle.addEventListener('click', function() {
    shareOptions.classList.toggle('hidden');
  });

  
  document.addEventListener('click', function(event) {
    if (!shareToggle.contains(event.target) && !shareOptions.contains(event.target)) {
      shareOptions.classList.add('hidden');
    }
  });
});

function copyToClipboard(url) {
  navigator.clipboard.writeText(url).then(function() {
    showToast();
  }).catch(function(err) {
    
    const textArea = document.createElement('textarea');
    textArea.value = url;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    showToast();
  });
}

function showToast() {
  const toast = document.getElementById('copy-toast');
  const shareOptions = document.getElementById('share-options');
  
  
  shareOptions.classList.add('hidden');
  
  
  toast.classList.remove('hidden');
  
  
  setTimeout(function() {
    toast.classList.add('hidden');
  }, 2000);
}
</script>


      </div>
    </main>

    
<div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300">
  <div class="text-center space-x-4 text-sm font-medium">
    <a href="/about" class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
    <span>-</span>
    <a href="/contact" class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
    <span>-</span>
    <a href="/privacy-policy" class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
    <span>-</span>
    <a href="/disclaimer" class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a>
  </div>
</div>


<footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">
  &copy; 2025 buanacoding.com &mdash; Crafted with â¤ï¸ by <a href="https://www.wikukarno.com" class="text-gray-500 dark:text-gray-400 hover:text-cyan-500 dark:hover:text-cyan-400" target="_blank">
    Wiku Karno
  </a>
</footer>



    
<button
  id="scrollToTop"
  class="fixed bottom-6 right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300"
  aria-label="Scroll to top"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    class="w-4 h-4"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 15l7-7 7 7"
    />
  </svg>
</button>


    <div id="google_translate_element" style="display:none"></div>
<script src="https://unpkg.com/feather-icons"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>

<script>
  feather.replace();
  const btn = document.getElementById("scrollToTop");
  const html = document.documentElement;
  const toggleBtn = document.getElementById("theme-toggle");
  const toggleBtnMobile = document.getElementById("theme-toggle-mobile");
  const iconSun = document.getElementById("icon-sun");
  const iconMoon = document.getElementById("icon-moon");
  const iconSunMobile = document.getElementById("icon-sun-mobile");
  const iconMoonMobile = document.getElementById("icon-moon-mobile");

  document.getElementById("menu-toggle")?.addEventListener("click", () => {
    document.getElementById("mobile-menu")?.classList.toggle("hidden");
  });

  btn.style.display = "none";

  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      btn.style.display = "flex";
    } else {
      btn.style.display = "none";
    }
  });

  btn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  function updateIcons(isDark) {
    iconSun.classList.toggle("hidden", !isDark);
    iconMoon.classList.toggle("hidden", isDark);
    iconSunMobile.classList.toggle("hidden", !isDark);
    iconMoonMobile.classList.toggle("hidden", isDark);
  }

  function setDarkMode(isDark) {
    html.setAttribute("data-theme", isDark ? "dark" : "light");
    localStorage.setItem("theme", isDark ? "dark" : "light");
    updateIcons(isDark);
  }

  const userPref = localStorage.getItem("theme");
  const systemPref = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const isDark = userPref === "dark" || (!userPref && systemPref);
  setDarkMode(isDark);

  toggleBtn?.addEventListener("click", () => {
    const currentlyDark = html.getAttribute("data-theme") === "dark";
    setDarkMode(!currentlyDark);
  });
  toggleBtnMobile?.addEventListener("click", () => {
    const currentlyDark = html.getAttribute("data-theme") === "dark";
    setDarkMode(!currentlyDark);
  });

  document.querySelectorAll("pre").forEach((pre) => {
    const button = document.createElement("button");
    button.innerHTML = `
      <span>Copy</span>
    `;
    button.className = `
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();

    const wrapper = document.createElement("div");
    wrapper.className = "relative";
    pre.parentNode.insertBefore(wrapper, pre);
    wrapper.appendChild(pre);
    wrapper.appendChild(button);

    button.addEventListener("click", () => {
      const code = pre.innerText;
      navigator.clipboard.writeText(code).then(() => {
        button.querySelector("span").innerText = "Copied!";
        setTimeout(() => {
          button.querySelector("span").innerText = "Copy";
        }, 2000);
      });
    });
  });

  const openBtn = document.getElementById("openSearchModal");
  const closeBtn = document.getElementById("closeSearchModal");
  const modal = document.getElementById("searchModal");

  openBtn.addEventListener("click", () => {
    console.log("Search modal opened");
    modal.classList.remove("hidden");
    document.getElementById("searchBox").focus();
  });

  closeBtn.addEventListener("click", () => {
    modal.classList.add("hidden");
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") modal.classList.add("hidden");
  });

  fetch("/index.json")
    .then((res) => res.json())
    .then((data) => {
      const fuse = new Fuse(data, {
        keys: ["title", "content"],
        threshold: 0.3,
      });

      const searchBox = document.getElementById("searchBox");
      const resultBox = document.getElementById("results");

      searchBox.addEventListener("input", function (e) {
        const query = e.target.value.trim();
        if (query.length < 2) {
          resultBox.innerHTML = "";
          return;
        }

        const results = fuse.search(query);
        if (results.length === 0) {
          resultBox.innerHTML = "<li class='px-4 py-2'>No results found.</li>";
        } else {
          resultBox.innerHTML = results
            .map(
              (r) => `
                    <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                    <a href="${r.item.href}" class="block font-semibold text-gray-900 dark:text-white">${r.item.title}</a>
                  </li>
                  `,
            )
            .join("");
        }
      });
    });

    const openBtnMobile = document.getElementById("openSearchModalMobile");
    const closeBtnMobile = document.getElementById("closeSearchModal");
    const modalMobile = document.getElementById("searchModal");

    openBtnMobile.addEventListener("click", () => {
      console.log("Search modal opened (mobile)");
      modalMobile.classList.remove("hidden");
      document.getElementById("searchBox").focus();
    });
    closeBtnMobile.addEventListener("click", () => {
      modalMobile.classList.add("hidden");
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") modalMobile.classList.add("hidden");
    });

  
  (function () {
    function loadGoogleTranslate(cb, onfail) {
      if (window.google && window.google.translate && window.google.translate.TranslateElement) {
        cb && cb();
        return;
      }
      window.__gtReadyCallbacks = window.__gtReadyCallbacks || [];
      if (cb) window.__gtReadyCallbacks.push(cb);
      if (window.__gtLoading) return;
      window.__gtLoading = true;
      window.initGoogleTranslate = function () {
        try {
          new window.google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'id',
            autoDisplay: false,
          }, 'google_translate_element');
        } catch (e) {}
        (window.__gtReadyCallbacks || []).forEach(function (fn) { try { fn(); } catch (e) {} });
        window.__gtReadyCallbacks = [];
      };
      var s = document.createElement('script');
      s.src = 'https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate';
      s.defer = true;
      var failed = false;
      s.onerror = function(){ failed = true; onfail && onfail(); };
      setTimeout(function(){ if(!window.google || !window.google.translate){ failed = true; onfail && onfail(); } }, 4000);
      document.head.appendChild(s);
    }

    function setCookie(name, value) {
      document.cookie = name + '=' + value + '; path=/; expires=' + new Date(Date.now() + 365*24*3600*1000).toUTCString();
    }
    function deleteCookie(name) {
      document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';
    }

    function showTranslateFallback() {
      if (document.getElementById('translate-fallback')) return;
      var bar = document.createElement('div');
      bar.id = 'translate-fallback';
      bar.style.cssText = 'position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;';
      bar.innerHTML = '<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span>' +
        '<button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button>' +
        '<button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>';
      document.body.appendChild(bar);
      document.getElementById('btnCloseTf').onclick = function(){ bar.remove(); };
      document.getElementById('btnTryId').onclick = function(){
        var idUrl = new URL(location.href);
        var p = location.pathname;
        if (!p.startsWith('/id/')) {
          idUrl.pathname = '/id' + (p.startsWith('/') ? p : '/' + p);
        }
        fetch(idUrl, { method: 'HEAD' }).then(function(r){
          if (r.ok) location.href = idUrl; else location.href = '/id/';
        }).catch(function(){ location.href = '/id/'; });
      };
    }

    function translateTo(lang) {
      loadGoogleTranslate(function () {
        var combo = document.querySelector('.goog-te-combo');
        if (combo) {
          combo.value = lang;
          combo.dispatchEvent(new Event('change'));
        } else {
          
          setCookie('googtrans', '/en/' + lang);
          location.reload();
        }
      }, showTranslateFallback);
    }

    function resetTranslate() {
      deleteCookie('googtrans');
      deleteCookie('GOOGTRANS');
    }

    document.querySelectorAll('.js-lang-link').forEach(function (a) {
      a.addEventListener('click', function (e) {
        var lang = a.getAttribute('data-lang');
        var has = a.getAttribute('data-has-trans') === 'true';
        if (lang === 'en') {
          resetTranslate();
          return; 
        }
        if (!has) {
          e.preventDefault();
          translateTo(lang);
        }
      });
    });
  })();
</script>


    
  </body>
</html>
