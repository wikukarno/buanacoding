<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  
  
  

  
  <title>Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once | Buana Coding</title>

  
  <meta name="description" content="When you write concurrent programs in Go, multiple goroutines may try to access and modify the same data at the same time. Without proper synchronization, this leads to race conditions, bugs, or crashes. Go provides tools like sync.Mutex, sync.RWMutex, and sync.Once to safely share data across goroutines.
In this article, you’ll learn:
What race conditions are and how to avoid them How to use sync.Mutex to protect data Using sync.RWMutex for read-write access How sync.Once ensures code runs only once Real-world examples and best practices What Is a Race Condition? A race condition happens when two or more goroutines access the same variable at the same time, and at least one of them is modifying it. This can cause unexpected behavior or corrupted data.
" />

  
  
    <meta name="keywords" content="coding, programming, web development, app development, tutorial, developer tips" />
  

  
  <link rel="canonical" href="http://localhost:1313/2025/04/synchronizing-goroutines-in-go-using.html" />

  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once | Buana Coding" />
  <meta property="og:description" content="When you write concurrent programs in Go, multiple goroutines may try to access and modify the same data at the same time. Without proper synchronization, this leads to race conditions, bugs, or crashes. Go provides tools like sync.Mutex, sync.RWMutex, and sync.Once to safely share data across goroutines.
In this article, you’ll learn:
What race conditions are and how to avoid them How to use sync.Mutex to protect data Using sync.RWMutex for read-write access How sync.Once ensures code runs only once Real-world examples and best practices What Is a Race Condition? A race condition happens when two or more goroutines access the same variable at the same time, and at least one of them is modifying it. This can cause unexpected behavior or corrupted data.
" />
  <meta property="og:url" content="http://localhost:1313/2025/04/synchronizing-goroutines-in-go-using.html" />
  <meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg" />

  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once | Buana Coding" />
  <meta name="twitter:description" content="When you write concurrent programs in Go, multiple goroutines may try to access and modify the same data at the same time. Without proper synchronization, this leads to race conditions, bugs, or crashes. Go provides tools like sync.Mutex, sync.RWMutex, and sync.Once to safely share data across goroutines.
In this article, you’ll learn:
What race conditions are and how to avoid them How to use sync.Mutex to protect data Using sync.RWMutex for read-write access How sync.Once ensures code runs only once Real-world examples and best practices What Is a Race Condition? A race condition happens when two or more goroutines access the same variable at the same time, and at least one of them is modifying it. This can cause unexpected behavior or corrupted data.
" />
  <meta name="twitter:image" content="https://www.buanacoding.com/images/og-image.jpg" />

  
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/dracula.min.css">
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="/css/syntax.css" />
</head>
  <body
    class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"
  >
    
    <header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-extrabold tracking-wide">
      <a href="/" class="hover:opacity-90">BUANACODING</a>
    </h1>

    
    <nav
      class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"
    >
      
      <a
        href="/tags/go"
        class="no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
      >
        go
      </a>
      
      <a
        href="/tags/laravel"
        class="no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
      >
        laravel
      </a>
      
      <a
        href="/tags/linux"
        class="no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
      >
        linux
      </a>
      

      
      <button
        id="theme-toggle"
        class="ml-4 text-white hover:text-yellow-400 transition duration-300"
      >
        
        <svg
          id="icon-sun"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 hidden"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m8.485-8.485l-.707.707M4.222 4.222l.707.707M21 12h-1M4 12H3m16.263-7.263l-.707.707M4.222 19.778l.707-.707M12 8a4 4 0 100 8 4 4 0 000-8z"
          />
        </svg>
        
        <svg
          id="icon-moon"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M21 12.79A9 9 0 0112.21 3a7 7 0 100 14 9 9 0 008.79-4.21z" />
        </svg>
      </button>
    </nav>

    <button id="menu-toggle" class="md:hidden text-2xl focus:outline-none">
      ☰
    </button>
  </div>

  <div id="mobile-menu" class="hidden md:hidden px-4 pb-4 space-y-2">
    
    <a
      href="/tags/go"
      class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
    >
      go
    </a>
    
    <a
      href="/tags/laravel"
      class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
    >
      laravel
    </a>
    
    <a
      href="/tags/linux"
      class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize"
    >
      linux
    </a>
    
    <div class="flex items-center gap-4 mt-2">
      
      <button
        id="theme-toggle-mobile"
        class="text-white hover:text-yellow-400 transition duration-300"
      >
        
        <svg
          id="icon-sun-mobile"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 hidden"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m8.485-8.485l-.707.707M4.222 4.222l.707.707M21 12h-1M4 12H3m16.263-7.263l-.707.707M4.222 19.778l.707-.707M12 8a4 4 0 100 8 4 4 0 000-8z"
          />
        </svg>
        
        <svg
          id="icon-moon-mobile"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M21 12.79A9 9 0 0112.21 3a7 7 0 100 14 9 9 0 008.79-4.21z" />
        </svg>
      </button>
    </div>
  </div>
</header>


    
    <main class="flex-1 w-full">
      <div class="max-w-7xl mx-auto py-8 px-4">
        
<div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8">
  
  <article class="prose prose-blue dark:prose-invert lg:col-span-2">
    <nav class="text-sm text-gray-500 dark:text-gray-400 mb-4">
      <a href="/" class="hover:text-[#0f7ea9] font-medium">Home</a>
      <span class="mx-2">/</span>
      
      
        <a href="/tags/go" class="hover:text-[#0f7ea9] font-medium">#Go</a>
      
    </nav>


    <h1>Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once</h1>

    
      <p>When you write concurrent programs in Go, multiple goroutines may try to access and modify the same data at the same time. Without proper synchronization, this leads to race conditions, bugs, or crashes. Go provides tools like <code>sync.Mutex</code>, <code>sync.RWMutex</code>, and <code>sync.Once</code> to safely share data across goroutines.</p>
<p>In this article, you’ll learn:</p>
<ul>
<li>What race conditions are and how to avoid them</li>
<li>How to use <code>sync.Mutex</code> to protect data</li>
<li>Using <code>sync.RWMutex</code> for read-write access</li>
<li>How <code>sync.Once</code> ensures code runs only once</li>
<li>Real-world examples and best practices</li>
</ul>
<h2 id="what-is-a-race-condition">What Is a Race Condition?</h2>
<p>A race condition happens when two or more goroutines access the same variable at the same time, and at least one of them is modifying it. This can cause unexpected behavior or corrupted data.</p>
<p>You can detect race conditions using:</p>
<pre tabindex="0"><code>go run -race main.go
</code></pre><h2 id="using-syncmutex">Using sync.Mutex</h2>
<p><code>sync.Mutex</code> is a mutual exclusion lock. Only one goroutine can hold the lock at a time. Use <code>Lock()</code> before accessing shared data, and <code>Unlock()</code> after.</p>
<pre tabindex="0"><code>type Counter struct {
    mu    sync.Mutex
    value int
}

func (c *Counter) Increment() {
    c.mu.Lock()
    defer c.mu.Unlock()
    c.value++
}

func (c *Counter) Value() int {
    c.mu.Lock()
    defer c.mu.Unlock()
    return c.value
} 
</code></pre><h2 id="using-syncrwmutex">Using sync.RWMutex</h2>
<p><code>sync.RWMutex</code> allows multiple readers or one writer. It&rsquo;s useful when reads are frequent but writes are rare.</p>
<pre tabindex="0"><code>type SafeMap struct {
    mu  sync.RWMutex
    m   map[string]string
}

func (s *SafeMap) Get(key string) string {
    s.mu.RLock()
    defer s.mu.RUnlock()
    return s.m[key]
}

func (s *SafeMap) Set(key, value string) {
    s.mu.Lock()
    defer s.mu.Unlock()
    s.m[key] = value
} 
</code></pre><h2 id="using-synconce">Using sync.Once</h2>
<p><code>sync.Once</code> guarantees that a piece of code is only executed once, even if called from multiple goroutines. This is commonly used to initialize shared resources.</p>
<pre tabindex="0"><code>var once sync.Once

func initialize() {
    fmt.Println(&#34;Initialization done&#34;)
}

func main() {
    for i := 0; i &lt; 5; i++ {
        go func() {
            once.Do(initialize)
        }()
    }
    time.Sleep(time.Second)
} 
</code></pre><h2 id="real-world-example-safe-counter">Real-World Example: Safe Counter</h2>
<pre tabindex="0"><code>type SafeCounter struct {
    mu sync.Mutex
    val int
}

func (sc *SafeCounter) Add() {
    sc.mu.Lock()
    sc.val++
    sc.mu.Unlock()
}

func main() {
    var sc SafeCounter
    var wg sync.WaitGroup

    for i := 0; i &lt; 1000; i++ {
        wg.Add(1)
        go func() {
            sc.Add()
            wg.Done()
        }()
    }

    wg.Wait()
    fmt.Println(&#34;Final count:&#34;, sc.val)
} 
</code></pre><h2 id="best-practices">Best Practices</h2>
<ul>
<li>Always use <code>defer Unlock()</code> right after <code>Lock()</code></li>
<li>Keep the locked section as short as possible</li>
<li>Use <code>RWMutex</code> when many goroutines only need to read</li>
<li>Use <code>sync.Once</code> to initialize global/shared data</li>
<li>Test with <code>go run -race</code> to catch race conditions</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Synchronization is key to building correct concurrent programs. By using <code>sync.Mutex</code>, <code>sync.RWMutex</code>, and <code>sync.Once</code>, you can ensure that your goroutines work together safely without corrupting shared data.</p>
<p>Happy coding!</p>


    
    <div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded">
      <h2 class="text-lg font-semibold mb-2">📌 Baca Juga</h2>
      <ul class="list-disc list-inside">
        
        <li>
          <a
            href="/2025/04/working-with-json-in-go-encode-decode.html"
            class="text-blue-600 dark:text-blue-400 hover:underline"
            >Working with JSON in Go: Encode, Decode, and Tag Structs</a
          >
        </li>
        
        <li>
          <a
            href="/2025/04/file-handling-in-go-read-write-and.html"
            class="text-blue-600 dark:text-blue-400 hover:underline"
            >File Handling in Go: Read, Write, and Manage Files</a
          >
        </li>
        
        <li>
          <a
            href="/2025/04/synchronizing-goroutines-in-go-using.html"
            class="text-blue-600 dark:text-blue-400 hover:underline"
            >Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once</a
          >
        </li>
        
      </ul>
    </div>

    
    
  </article>

  
  <aside class="space-y-10">
    
    <div>
      <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">
        Popular Post
      </h3>
      <ul
        class="space-y-3 list-disc list-inside text-sm text-gray-800 dark:text-gray-200"
      >
        
        <li>
          <a href="/2025/04/working-with-json-in-go-encode-decode.html" class="hover:text-[#0f7ea9] transition"
            >Working with JSON in Go: Encode, Decode, and Tag Structs</a
          >
        </li>
        
        <li>
          <a href="/2025/04/file-handling-in-go-read-write-and.html" class="hover:text-[#0f7ea9] transition"
            >File Handling in Go: Read, Write, and Manage Files</a
          >
        </li>
        
        <li>
          <a href="/2025/04/synchronizing-goroutines-in-go-using.html" class="hover:text-[#0f7ea9] transition"
            >Synchronizing Goroutines in Go: Using sync.Mutex and sync.Once</a
          >
        </li>
        
        <li>
          <a href="/2025/04/using-context-in-go-cancellation.html" class="hover:text-[#0f7ea9] transition"
            >Using Context in Go: Cancellation, Timeout, and Deadlines Explained</a
          >
        </li>
        
        <li>
          <a href="/2025/04/concurrency-in-go-goroutines-and.html" class="hover:text-[#0f7ea9] transition"
            >Concurrency in Go: Goroutines and Channels Explained</a
          >
        </li>
        
      </ul>
    </div>

    
    <div
      class="bg-white dark:bg-gray-800 border border-dashed border-gray-300 dark:border-gray-600 p-6 rounded text-center text-gray-400"
    >
      <span class="block text-sm font-medium mb-2 dark:text-gray-300"
        >🔖 Iklan</span
      >
      <p class="text-xs dark:text-gray-400">Space untuk banner 300x250</p>
    </div>
  </aside>
</div>

      </div>
    </main>

    
<div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300">
  <div class="text-center space-x-4 text-sm font-medium">
    <a href="/about" class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
    <span>-</span>
    <a href="/contact" class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
    <span>-</span>
    <a href="/privacy-policy" class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
    <span>-</span>
    <a href="/disclaimer" class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a>
  </div>
</div>


<footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">
  &copy; 2025 Buanacoding. All rights reserved.
</footer>


    
<button
  id="scrollToTop"
  class="fixed bottom-6 right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300"
  aria-label="Scroll to top"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    class="w-4 h-4"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 15l7-7 7 7"
    />
  </svg>
</button>


    <script>
  const btn = document.getElementById("scrollToTop");
  const html = document.documentElement;
  const toggleBtn = document.getElementById("theme-toggle");
  const toggleBtnMobile = document.getElementById("theme-toggle-mobile");
  const iconSun = document.getElementById("icon-sun");
  const iconMoon = document.getElementById("icon-moon");
  const iconSunMobile = document.getElementById("icon-sun-mobile");
  const iconMoonMobile = document.getElementById("icon-moon-mobile");

  
  btn.style.display = "none";

  
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      btn.style.display = "flex"; 
    } else {
      btn.style.display = "none";
    }
  });

  
  btn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  function updateIcons(isDark) {
    iconSun.classList.toggle("hidden", !isDark);
    iconMoon.classList.toggle("hidden", isDark);
    iconSunMobile.classList.toggle("hidden", !isDark);
    iconMoonMobile.classList.toggle("hidden", isDark);
  }

  function setDarkMode(isDark) {
    html.setAttribute("data-theme", isDark ? "dark" : "light");
    localStorage.setItem("theme", isDark ? "dark" : "light");
    updateIcons(isDark);
  }

  const userPref = localStorage.getItem("theme");
  const systemPref = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const isDark = userPref === "dark" || (!userPref && systemPref);
  setDarkMode(isDark);

  toggleBtn?.addEventListener("click", () => {
    const currentlyDark = html.getAttribute("data-theme") === "dark";
    setDarkMode(!currentlyDark);
  });
  toggleBtnMobile?.addEventListener("click", () => {
    const currentlyDark = html.getAttribute("data-theme") === "dark";
    setDarkMode(!currentlyDark);
  });

  document.getElementById("menu-toggle")?.addEventListener("click", () => {
    document.getElementById("mobile-menu")?.classList.toggle("hidden");
  });

  
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('pre').forEach((pre) => {
      const button = document.createElement('button');
      button.innerHTML = `
        <span>Copy</span>
      `;
      button.className = `
      copy-btn absolute top-2 right-2
      text-xs px-2 py-1 rounded flex items-center gap-1
      transition-colors duration-200
      bg-gray-200 text-gray-800 hover:bg-gray-300
      dark:bg-white/10 dark:text-white dark:hover:bg-white/20
    `.trim();

      const wrapper = document.createElement('div');
      wrapper.className = 'relative';
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);
      wrapper.appendChild(button);

      button.addEventListener('click', () => {
        const code = pre.innerText;
        navigator.clipboard.writeText(code).then(() => {
          button.querySelector('span').innerText = 'Copied!';
          setTimeout(() => {
            button.querySelector('span').innerText = 'Copy';
          }, 2000);
        });
      });
    });
  });
</script>

  </body>
</html>
