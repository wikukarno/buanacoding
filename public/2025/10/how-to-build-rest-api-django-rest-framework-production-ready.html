<!doctype html><html lang=en data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>How to Build a REST API with Django REST Framework (Production Ready) | Buana Coding</title><meta name=description content="Learn how to build production-ready REST APIs with Django REST Framework. Master models, serializers, viewsets, authentication (JWT/Token), permissions, pagination, filtering, testing, and deployment. Complete guide with real project examples."><meta name=keywords content="django rest framework tutorial,build rest api django,django drf authentication,django rest framework jwt,django api development,python rest api django,django rest framework viewsets,django api best practices,django rest framework serializers,django vs fastapi"><link rel=canonical href=https://www.buanacoding.com/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html><link rel=alternate hreflang=en href=https://www.buanacoding.com/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html><meta property="og:type" content="article"><meta property="og:title" content="How to Build a REST API with Django REST Framework (Production Ready) | Buana Coding"><meta property="og:description" content="Learn how to build production-ready REST APIs with Django REST Framework. Master models, serializers, viewsets, authentication (JWT/Token), permissions, pagination, filtering, testing, and deployment. Complete guide with real project examples."><meta property="og:url" content="https://www.buanacoding.com/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html"><meta property="og:image" content="https://www.buanacoding.com/images/og-image.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to Build a REST API with Django REST Framework (Production Ready) | Buana Coding"><meta name=twitter:description content="Learn how to build production-ready REST APIs with Django REST Framework. Master models, serializers, viewsets, authentication (JWT/Token), permissions, pagination, filtering, testing, and deployment. Complete guide with real project examples."><meta name=twitter:image content="https://www.buanacoding.com/images/og-image.jpg"><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "How to Build a REST API with Django REST Framework (Production Ready) | Buana Coding",
    "description": "Learn how to build production-ready REST APIs with Django REST Framework. Master models, serializers, viewsets, authentication (JWT\/Token), permissions, pagination, filtering, testing, and deployment. Complete guide with real project examples.",
    "inLanguage": "en",
    "datePublished": "2025-10-29T08:00:00\u002b07:00",
    "dateModified": "2025-10-29T08:00:00\u002b07:00",
    "author": {
      "@type": "Person",
      "name": "Wiku Karno"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/www.buanacoding.com\/2025\/10\/how-to-build-rest-api-django-rest-framework-production-ready.html"
    },
    "image": "https:\/\/www.buanacoding.com\/images\/og-image.jpg",
    "publisher": {
      "@type": "Organization",
      "name": "Buana Coding"
    }
  }
  </script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel=stylesheet><link rel=stylesheet href="/style.css?v=1761830570"><link rel=stylesheet href="/css/overrides.css?v=1761830570"><link rel=stylesheet href="/css/syntax.css?v=1761830570"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EN9J73FXF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0EN9J73FXF")</script><script async src="https://fundingchoicesmessages.google.com/i/pub-3149036684216973?ers=1"></script><script>(function(){function e(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(e,0)}e()})()</script><script>(function(){"use strict";function at(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}Z=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)};function Ge(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t,n=0;n<e.length;++n)if(t=e[n],t&&t.Math==Math)return t;throw Error("Cannot find global object")}Pe=Ge(this);function c(e,t){if(t)a:{var n,o,s=Pe;e=e.split(".");for(n=0;n<e.length-1;n++){if(o=e[n],!(o in s))break a;s=s[o]}e=e[e.length-1],n=s[e],t=t(n),t!=n&&t!=null&&Z(s,e,{configurable:!0,writable:!0,value:t})}}function G(e){return e.raw=e}function b(e){var t=typeof Symbol!="undefined"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:at(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function Xe(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}if(Se=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},typeof Object.setPrototypeOf=="function")R=Object.setPrototypeOf;else{a:{we={a:!0},V={};try{V.__proto__=we,P=V.a;break a}catch{}P=!1}R=P?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}W=R;function K(e,t){if(e.prototype=Se(t.prototype),e.prototype.constructor=e,W)W(e,t);else for(n in t)if(n!="prototype")if(Object.defineProperties){var n,s=Object.getOwnPropertyDescriptor(t,n);s&&Object.defineProperty(e,n,s)}else e[n]=t[n];e.A=t.prototype}function Q(){for(var t=Number(this),n=[],e=t;e<arguments.length;e++)n[e-t]=arguments[e];return n}c("Object.is",function(e){return e||function(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}}),c("Array.prototype.includes",function(e){return e||function(e,t){var s,o,n=this;n instanceof String&&(n=String(n)),s=n.length,t=t||0;for(t<0&&(t=Math.max(t+s,0));t<s;t++)if(o=n[t],o===e||Object.is(o,e))return!0;return!1}}),c("String.prototype.includes",function(e){return e||function(e,t){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,t||0)!==-1}}),c("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),c("Number.isFinite",function(e){return e||function(e){return typeof e=="number"&&!isNaN(e)&&e!==1/0&&e!==-(1/0)}}),c("Number.isInteger",function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}}),c("Number.isSafeInteger",function(e){return e||function(e){return Number.isInteger(e)&&(e<0?-e:e)<=Number.MAX_SAFE_INTEGER}}),c("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-(1/0)||e===0)return e;var t=Math.floor(e<0?-e:e);return e<0?-t:t}}),e=this||self;function _(t,n){a:{for(var s=["CLOSURE_FLAGS"],o=e,i=0;i<s.length;i++)if(o=o[s[i]],o==null){s=null;break a}s=o}return t=s&&s[t],t??n}function q(e){return e}function ct(t){e.setTimeout(function(){throw t},0)}var ae=_(610401301,!1),ot=_(188588736,!0),et=_(645172343,_(1,!0)),Oe=e.navigator,O=Oe?Oe.userAgentData||null:null;function L(e){return!!ae&&!!O&&O.brands.some(function(t){return(t=t.brand)&&t.indexOf(e)!=-1})}function s(t){var n;a:{if((n=e.navigator)&&(n=n.userAgent))break a;n=""}return n.indexOf(t)!=-1}function r(){return!!ae&&!!O&&O.brands.length>0}function F(){return r()?L("Chromium"):(s("Chrome")||s("CriOS"))&&!(r()?0:s("Edge"))||s("Silk")}be=!r()&&(s("Trident")||s("MSIE")),!s("Android")||F(),F(),s("Safari")&&(F()||(r()?0:s("Coast"))||(r()?0:s("Opera"))||(r()?0:s("Edge"))||(r()?L("Microsoft Edge"):s("Edg/"))||r()&&L("Opera")),M={},v=null,T=typeof Uint8Array!="undefined",He=!be&&typeof btoa=="function";function N(){return typeof BigInt=="function"}g=typeof Symbol=="function"&&typeof Symbol()=="symbol";function xe(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Z,Pe,Se,t,R,P,we,e,n,O,V,W,be,v,M,T,He,Te,m,g,X,oe,C,E,Ae,j,Fe,le,re,ie,x=xe(),H=xe("2ex"),ye=g?function(e,t){e[x]|=t}:function(e,t){e.g!==0[0]?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})},h=g?function(e){return e[x]|0}:function(e){return e.g|0},d=g?function(e){return e[x]}:function(e){return e.g},l=g?function(e,t){e[x]=t}:function(e,t){e.g!==0[0]?e.g=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function it(e,t){l(t,(e|0)&-14591)}function U(e,t){l(t,(e|34)&-14557)}m={},X={};function Ie(e){return!(!e||typeof e!="object"||e.g!==X)}function S(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function y(e,t,n){if(!Array.isArray(e)||e.length)return!1;var s=h(e);return!!(s&1)||!!(t&&(Array.isArray(t)?t.includes(n):t.has(n)))&&(l(e,s|1),!0)}t=0,n=0;function J(e){var s=e>>>0;t=s,n=(e-s)/4294967296>>>0}function ee(e){if(e<0){J(-e);var s=b(A(t,n));e=s.next().value,s=s.next().value,t=e>>>0,n=s>>>0}else J(e)}function te(e,t){if(t>>>=0,e>>>=0,t<=2097151)var n=""+(4294967296*t+e);else N()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(n=(e>>>24|t<<8)&16777215,t=t>>16&65535,e=(e&16777215)+n*6777216+t*6710656,n+=t*8147497,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+ne(n)+ne(e));return n}function ne(e){return e=String(e),"0000000".slice(e.length)+e}function A(e,t){return t=~t,e?e=~e+1:t+=1,[e,t]}oe=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function $(e,t){return E=t,e=new e(t),E=0[0],e}function k(e,t,n){if(e==null&&(e=E),E=0[0],e==null){var o,i,s=96;n?(e=[n],s|=512):e=[],t&&(s=s&-16760833|(t&1023)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(s=h(e),s&2048)throw Error("farr");if(s&64)return e;if(s|=64,n&&(s|=512,n!==e[0]))throw Error("mid");a:{if(n=e,o=n.length,o&&(i=o-1,S(n[i]))){if(s|=256,t=i-(+!!(s&512)-1),t>=1024)throw Error("pvtlmt");s=s&-16760833|(t&1023)<<14;break a}if(t){if(t=Math.max(t,o-(+!!(s&512)-1)),t>1024)throw Error("spvt");s=s&-16760833|(t&1023)<<14}}}return l(e,s),e}function st(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(y(e,0[0],0))return}else if(T&&e!=null&&e instanceof Uint8Array){if(He){for(var n,o,i,a,c,l,t="",s=0,r=e.length-10240;s<r;)t+=String.fromCharCode.apply(null,e.subarray(s,s+=10240));t+=String.fromCharCode.apply(null,s?e.subarray(s):e),e=btoa(t)}else{if(t===0[0]&&(t=0),!v){v={},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"];for(a=0;a<5;a++){n=s.concat(r[a].split("")),M[a]=n;for(o=0;o<n.length;o++)i=n[o],v[i]===0[0]&&(v[i]=o)}}t=M[t],s=Array(Math.floor(e.length/3)),r=t[64]||"";for(a=n=0;n<e.length-2;n+=3)c=e[n],l=e[n+1],i=e[n+2],o=t[c>>2],c=t[(c&3)<<4|l>>4],l=t[(l&15)<<2|i>>6],i=t[i&63],s[a++]=o+c+l+i;switch(o=0,i=r,e.length-n){case 2:o=e[n+1],i=t[(o&15)<<2]||r;case 1:e=e[n],s[a]=t[e>>2]+t[(e&3)<<4|o>>4]+i+r}e=s.join("")}return e}}return e}function nt(e,t,n){e=Array.prototype.slice.call(e);var i,o=e.length,s=t&256?e[o-1]:0[0];o+=s?-1:0;for(t=t&512?1:0;t<o;t++)e[t]=n(e[t]);if(s){t=e[t]={};for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=n(s[i]))}return e}function de(e,t,n,s,o){if(e!=null){if(Array.isArray(e))e=y(e,0[0],0)?0[0]:o&&h(e)&2?e:B(e,t,n,s!==0[0],o);else if(S(e)){var i,a={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=de(e[i],t,n,s,o));e=a}else e=t(e,s);return e}}function B(e,t,n,s,o){var i,a=s||n?h(e):0;s=s?!!(a&32):0[0],e=Array.prototype.slice.call(e);for(i=0;i<e.length;i++)e[i]=de(e[i],t,n,s,o);return n&&n(a,e),e}function We(e){return e.s===m?e.toJSON():st(e)}function me(e,t,n){if(n=n===0[0]?U:n,e!=null){if(T&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var s=h(e);return s&2?e:(t&&(t=s===0||!!(s&32)&&!(s&64||!(s&16))),t?(l(e,(s|34)&-12293),e):B(e,me,s&4?U:n,!0,!0))}return e.s===m&&(n=e.h,s=d(n),e=s&2?e:$(e.constructor,fe(n,s,!0))),e}}function fe(e,t,n){var s=n||t&2?U:it,o=!!(t&32);return e=nt(e,t,function(e){return me(e,o,s)}),ye(e,32|(n?2:0)),e}function pe(e,t){return e=e.h,ve(e,d(e),t)}function ge(e,t,n,s){if(t=s+(+!!(t&512)-1),!(t<0||t>=e.length||t>=n))return e[t]}function ve(e,t,n,s){if(n===-1)return null;var o,a,i=t>>14&1023||536870912;if(n>=i){if(t&256)return e[e.length-1][n]}else return a=e.length,s&&t&256&&(s=e[a-1][n],s!=null)?(ge(e,t,i,n)&&H!=null&&(e=(o=Te)!=null?o:Te={},o=e[H]||0,o>=4||(e[H]=o+1,o=Error(),o.__closure__error__context__984382||(o.__closure__error__context__984382={}),o.__closure__error__context__984382.severity="incident",ct(o))),s):ge(e,t,i,n)}function Y(e,t,n,s,o){var i,a=t>>14&1023||536870912;if(n>=a||o&&!et){if(i=t,t&256)o=e[e.length-1];else{if(s==null)return;o=e[a+(+!!(t&512)-1)]={},i|=256}o[n]=s,n<a&&(e[n+(+!!(t&512)-1)]=0[0]),i!==t&&l(e,i)}else e[n+(+!!(t&512)-1)]=s,t&256&&(e=e[e.length-1],n in e&&delete e[n])}function je(e,t){var a,r,s=he,c=c!==0[0]&&c,o=e.h,i=d(o),n=ve(o,i,t,c);return n!=null&&typeof n=="object"&&n.s===m?s=n:Array.isArray(n)?(a=h(n),r=a,r===0&&(r|=i&32),r|=i&2,r!==a&&l(n,r),s=new s(n)):s=0[0],s!==n&&s!=null&&Y(o,i,t,s,c),o=s,o==null?o:(e=e.h,i=d(e),i&2||(n=o,s=n.h,a=d(s),n=a&2?$(n.constructor,fe(s,a,!1)):n,n!==o&&(o=n,Y(e,i,t,o,c))),o)}function I(e,t){return e=pe(e,t),e==null||typeof e=="string"?e:0[0]}function _e(e,s){if(i=i===0[0]?0:i,e=pe(e,s),e!=null)if(s=typeof e,s==="number"?Number.isFinite(e):s!=="string"?0:oe.test(e)){if(typeof e=="number")e=e|0,!Number.isSafeInteger(e)&&(ee(e),s=t,o=n,(e=o&2147483648)&&(s=~s+1>>>0,o=~o>>>0,s==0&&(o=o+1>>>0)),s=o*4294967296+(s>>>0),e=e?-s:s);else if(s=Number(e)|0,Number.isSafeInteger(s))e=String(s);else if(s=e.indexOf("."),s!==-1&&(e=e.substring(0,s)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337)){if(e.length<16)ee(Number(e));else if(N())e=BigInt(e),t=Number(e&BigInt(4294967295))>>>0,n=Number(e>>BigInt(32)&BigInt(4294967295));else{s=+(e[0]==="-"),n=t=0,o=e.length;for(var o,i,a=s,r=(o-s)%6+s;r<=o;a=r,r+=6)a=Number(e.slice(a,r)),n*=1e6,t=t*1e6+a,t>=4294967296&&(n+=t/4294967296|0,n>>>=0,t>>>=0);s&&(s=b(A(t,n)),e=s.next().value,s=s.next().value,t=e,n=s)}e=t,s=n,s&2147483648?N()?e=""+(BigInt(s|0)<<BigInt(32)|BigInt(e>>>0)):(s=b(A(e,s)),e=s.next().value,s=s.next().value,e="-"+te(e,s)):e=te(e,s)}}else e=0[0];return e??i}function a(e,t){var n=n===0[0]?"":n;return e=I(e,t),e??n}function u(e,t,n){this.h=k(e,t,n)}u.prototype.toJSON=function(){return Ce(this)},u.prototype.s=m,u.prototype.toString=function(){try{return C=!0,Ce(this).toString()}finally{C=!1}};function Ce(e){if(a=C?e.h:B(e.h,We,0[0],0[0],!1),m=!C,h=ot?0[0]:e.constructor.v,l=d(m?e.h:a),e=a.length){var t,n,s,o,i,a,l,u,h,m,f,c=a[e-1],r=S(c);if(r?e--:c=0[0],l=+!!(l&512)-1,i=a,r){b:{if(s=c,n={},r=!1,s)for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(isNaN(+t)?n[t]=s[t]:(o=s[t],Array.isArray(o)&&(y(o,h,+t)||Ie(o)&&o.size===0)&&(o=null),o==null&&(r=!0),o!=null&&(n[t]=o)));if(r){for(u in n)break b;n=null}else n=s}s=n==null?c!=null:n!==c}for(;e>0;e--){if(u=e-1,t=i[u],u-=l,!(t==null||y(t,h,u)||Ie(t)&&t.size===0))break;f=!0}(i!==a||s||f)&&(m?(f||s||n)&&(i.length=e):i=Array.prototype.slice.call(i,0,e),n&&i.push(n)),a=i}return a}function Ee(e){return function(t){if(t==null||t=="")t=new e;else{if(t=JSON.parse(t),!Array.isArray(t))throw Error("dnarr");ye(t,32),t=$(e,t)}return t}}function ke(e){this.h=k(e)}K(ke,u),Ae=Ee(ke);function w(e){this.g=e}w.prototype.toString=function(){return this.g+""},Fe={};function D(t){if(j===0[0]){var n=null,s=e.trustedTypes;if(s&&s.createPolicy){try{n=s.createPolicy("goog#html",{createHTML:q,createScript:q,createScriptURL:q})}catch(t){e.console&&e.console.error(t.message)}j=n}else j=n}return t=(n=j)?n.createScriptURL(t):t,new w(t,Fe)}function ze(e){if(t=Q.apply(1,arguments),t.length===0)return D(e[0]);for(var t,s=e[0],n=0;n<t.length;n++)s+=encodeURIComponent(t[n])+e[n+1];return D(s)}function Ye(e,t){e.src=t instanceof w&&t.constructor===w?t.g:"type_error:TrustedResourceUrl";var n,s;(n=(t=(s=(n=(e.ownerDocument&&e.ownerDocument.defaultView||window).document).querySelector)==null?0[0]:s.call(n,"script[nonce]"))?t.nonce||t.getAttribute("nonce")||"":"")&&e.setAttribute("nonce",n)}function Ne(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)}function Le(e,t){return t=String(t),e.contentType==="application/xhtml+xml"&&(t=t.toLowerCase()),e.createElement(t)}function Re(t){this.g=t||e.document||document}function qe(e){return e=e===0[0]?document:e,e.createElement("script")}function z(e,t,n,s,o,i){try{var r=e.g,a=qe(r);a.async=!0,Ye(a,t),r.head.appendChild(a),a.addEventListener("load",function(){o(),s&&r.head.removeChild(a)}),a.addEventListener("error",function(){n>0?z(e,t,n-1,s,o,i):(s&&r.head.removeChild(a),i())})}catch{i()}}var Ke=e.atob("aHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vaW1hZ2VzL2ljb25zL21hdGVyaWFsL3N5c3RlbS8xeC93YXJuaW5nX2FtYmVyXzI0ZHAucG5n"),Ue=e.atob("WW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIGJlY2F1c2UgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlIGlzIGludGVyZmVyaW5nIHdpdGggdGhpcyBwYWdlLg=="),Je=e.atob("RGlzYWJsZSBhbnkgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlLCB0aGVuIHJlbG9hZCB0aGlzIHBhZ2Uu");function tt(e,t,n){this.i=e,this.u=t,this.o=n,this.g=null,this.j=[],this.m=!1,this.l=new Re(this.i)}function Ve(t){if(t.i.body&&!t.m){var n=function(){Be(t),e.setTimeout(function(){Me(t,3)},50)};z(t.l,t.u,2,!0,function(){e[t.o]||n()},n),t.m=!0}}function Be(e){for(var s,a,r,c,t=o(1,5),n=0;n<t;n++)s=i(e),e.i.body.appendChild(s),e.j.push(s);t=i(e),t.style.bottom="0",t.style.left="0",t.style.position="fixed",t.style.width=o(100,110).toString()+"%",t.style.zIndex=o(2147483544,2147483644).toString(),t.style.backgroundColor=De(249,259,242,252,219,229),t.style.boxShadow="0 0 12px #888",t.style.color=De(0,10,0,10,0,10),t.style.display="flex",t.style.justifyContent="center",t.style.fontFamily="Roboto, Arial",n=i(e),n.style.width=o(80,85).toString()+"%",n.style.maxWidth=o(750,775).toString()+"px",n.style.margin="24px",n.style.display="flex",n.style.alignItems="flex-start",n.style.justifyContent="center",s=Le(e.l.g,"IMG"),s.className=Ne(),s.src=Ke,s.alt="Warning icon",s.style.height="24px",s.style.width="24px",s.style.paddingRight="16px",a=i(e),r=i(e),r.style.fontWeight="bold",r.textContent=Ue,c=i(e),c.textContent=Je,p(e,a,r),p(e,a,c),p(e,n,s),p(e,n,a),p(e,t,n),e.g=t,e.i.body.appendChild(e.g),t=o(1,5);for(n=0;n<t;n++)s=i(e),e.i.body.appendChild(s),e.j.push(s)}function p(e,t,n){for(var r,s=o(1,5),a=0;a<s;a++)r=i(e),t.appendChild(r);t.appendChild(n),n=o(1,5);for(s=0;s<n;s++)a=i(e),t.appendChild(a)}function o(e,t){return Math.floor(e+Math.random()*(t-e))}function De(e,t,n,s,i,a){return"rgb("+o(Math.max(e,0),Math.min(t,255)).toString()+","+o(Math.max(n,0),Math.min(s,255)).toString()+","+o(Math.max(i,0),Math.min(a,255)).toString()+")"}function i(e){return e=Le(e.l.g,"DIV"),e.className=Ne(),e}function Me(t,n){n<=0||t.g!=null&&t.g.offsetHeight!==0&&t.g.offsetWidth!==0||(Qe(t),Be(t),e.setTimeout(function(){Me(t,n-1)},50))}function Qe(e){for(var n=b(e.j),t=n.next();!t.done;t=n.next())(t=t.value)&&t.parentNode&&t.parentNode.removeChild(t);e.j=[],(n=e.g)&&n.parentNode&&n.parentNode.removeChild(n),e.g=null}function Ze(t,n,s,o,i){function r(t){document.body?c(document.body):t>0?e.setTimeout(function(){r(t-1)},i):n()}function c(s){s.appendChild(a),e.setTimeout(function(){a?(a.offsetHeight!==0&&a.offsetWidth!==0?n():t(),a.parentNode&&a.parentNode.removeChild(a)):t()},o)}var a=$e(s);r(3)}function $e(e){var t=document.createElement("div");return t.className=e,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.zIndex="-10000",t}function he(e){this.h=k(e)}K(he,u);function ue(e){this.h=k(e)}K(ue,u),le=Ee(ue);function ce(e){if(!e)return null;e=I(e,4);var t;return e==null?t=null:t=D(e),t}re=G([""]),ie=G([""]);function se(e,t){this.m=e,this.o=new Re(e.document),this.g=t,this.j=a(this.g,1),this.u=ce(je(this.g,2))||ze(re),this.i=!1,t=ce(je(this.g,13))||ze(ie),this.l=new tt(e.document,t,a(this.g,12))}se.prototype.start=function(){rt(this)};function rt(t){lt(t),z(t.o,t.u,3,!1,function(){a:{var o,n=t.j,s=e.btoa(n);if(s=e[s]){try{o=Ae(e.atob(s))}catch{n=!1;break a}n=n===I(o,1)}else n=!1}n?f(t,a(t.g,14)):(f(t,a(t.g,8)),Ve(t.l))},function(){Ze(function(){f(t,a(t.g,7)),Ve(t.l)},function(){return f(t,a(t.g,6))},a(t.g,9),_e(t.g,10),_e(t.g,11))})}function f(e,t){e.i||(e.i=!0,e=new e.m.XMLHttpRequest,e.open("GET",t,!0),e.send())}function lt(t){var n=e.btoa(t.j);t.m[n]&&f(t,a(t.g,5))}(function(t,n){e[t]=function(){var s=Q.apply(0,arguments);e[t]=function(){},n.call.apply(n,[null].concat(s instanceof Array?s:Xe(b(s))))}})("__h82AlnkH6D91__",function(e){typeof window.atob=="function"&&new se(window,le(window.atob(e))).start()})}).call(this),window.__h82AlnkH6D91__("WyJwdWItMzE0OTAzNjY4NDIxNjk3MyIsW251bGwsbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9iL3B1Yi0zMTQ5MDM2Njg0MjE2OTczIl0sbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9lbC9BR1NLV3hXRW1tb2ZrZGEwZHlSNkcxMkdNSnNEZDF5UFF4a3FSYS11R2NVem9LZHh6NGFxNndzZm5DN3VPekxfWmljWUZvSW5iYnNKRGtFUUU1a1RUNFFGb25MMF9nXHUwMDNkXHUwMDNkP3RlXHUwMDNkVE9LRU5fRVhQT1NFRCIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFZVeXNCQ3NSc2llS3ExOENZVDNibVVqbFREbTVKM01FR1BSdUVoRjFsV3c3UjVNdGRwWnhNM2hJQm1tMnZhbjNmVWxZcVNLSnoycE5xMWNSTUJZYUxfLXdcdTAwM2RcdTAwM2Q/YWJcdTAwM2QxXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFVvQ2JlQlRkS2gzZmU0NnB1VERhek9PdHN0b0p3NjhKUU5SOGQ1OFgwWm9QRlV0LUZPUm1HU1ZJajM2WXQwQjU3c0t1bUFmcjFNWU5JV3U3U3JXNi1EQkFcdTAwM2RcdTAwM2Q/YWJcdTAwM2QyXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFdORXhuRXA0STJueGlBNXdiejVRMDZzT0Njek53bFltRXo4cWhOY0sxZzd2N1UwR2ZVZ0hJOFlPeWk1Qms2NGljWTNzU3BMRE9IZ3pSNTg0VlA5ak5sZmdcdTAwM2RcdTAwM2Q/c2JmXHUwMDNkMiIsImRpdi1ncHQtYWQiLDIwLDEwMCwiY0hWaUxUTXhORGt3TXpZMk9EUXlNVFk1TnpNXHUwMDNkIixbbnVsbCxudWxsLG51bGwsImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLzBlbW4vZi9wL3B1Yi0zMTQ5MDM2Njg0MjE2OTczLmpzP3VzcXBcdTAwM2RDQWMiXSwiaHR0cHM6Ly9mdW5kaW5nY2hvaWNlc21lc3NhZ2VzLmdvb2dsZS5jb20vZWwvQUdTS1d4VmpzRmdxZHhwME1yZFNEMjF6Q2l2TkR3cjZvM0FfNEQyYVlaRUJJZXZNSmN1eUVvNmRmX29XMUNiZFVRdVR1WW52cGZUdWhteS1NTXZfcGlqVlB0NUQxZ1x1MDAzZFx1MDAzZCJd")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3149036684216973" crossorigin=anonymous></script></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col"><header class="bg-[#0f7ea9] dark:bg-[#094d66] text-white shadow"><div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"><h1 class="text-2xl font-extrabold tracking-wide"><a href=/ class=hover:opacity-90>BUANACODING</a></h1><nav class="hidden md:flex items-center space-x-6 font-semibold uppercase tracking-wide"><a href=/tags/general class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="no-underline hover:text-cyan-300 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="hidden md:flex items-center"><div class="flex border border-white/30 rounded overflow-hidden text-xs font-medium"><a href=/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html data-lang=en data-has-trans=true class="js-lang-link px-2 py-1 bg-white/20 text-white">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-2 py-1 bg-transparent hover:bg-white/10 text-white/80">ID</a></div></div><button id=openSearchModal class="text-white transition duration-300 cursor-pointer focus:outline-none dark:hover:text-[#0f7ea9] hover:text-cyan-300" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
</button>
<button id=theme-toggle class="ml-2 text-white hover:text-yellow-300 transition duration-300 focus:outline-none cursor-pointer" aria-label="Toggle Dark Mode">
<i id=icon-sun data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon data-feather=moon class="w-5 h-5"></i></button></nav><button id=menu-toggle class="md:hidden text-2xl focus:outline-none">
☰</button></div><div id=mobile-menu class="hidden md:hidden px-4 pb-4 space-y-2"><a href=/tags/general class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">General
</a><a href=/tags/go class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Go
</a><a href=/tags/laravel class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Laravel
</a><a href=/tags/linux class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Linux
</a><a href=/tags/python class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Python
</a><a href=/tags/security class="block no-underline hover:text-cyan-500 dark:hover:text-[#0f7ea9] transition font-medium text-sm capitalize">Security</a><div class="mt-8 space-y-6"><button id=openSearchModalMobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label=Search>
<i data-feather=search class="w-5 h-5"></i>
<span class="text-sm font-medium">Search</span></button><div class="flex items-center justify-between py-2"><div class="flex items-center gap-4"><i data-feather=globe class="w-5 h-5 text-white/80"></i>
<span class="text-sm font-medium text-white">Language</span></div><div class="flex text-xs"><a href=/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html data-lang=en data-has-trans=true class="js-lang-link px-3 py-1.5 text-white font-medium">EN
</a><a href=/id/ data-lang=id data-has-trans=false class="js-lang-link px-3 py-1.5 text-white/60 hover:text-white">ID</a></div></div><button id=theme-toggle-mobile class="w-full text-left text-white hover:text-cyan-300 transition duration-300 flex items-center gap-4 py-2" aria-label="Toggle Dark Mode">
<i id=icon-sun-mobile data-feather=sun class="w-5 h-5 hidden"></i>
<i id=icon-moon-mobile data-feather=moon class="w-5 h-5"></i>
<span class="text-sm font-medium">Theme</span></button></div></div></header><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2"><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3149036684216973 data-ad-slot=9616560861 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div id=searchModal class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black/30 dark:bg-black/60 backdrop-blur-md p-4"><div class="bg-white dark:bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-xl p-6 relative"><button id=closeSearchModal class="absolute -top-4 -right-4 bg-white dark:bg-[#374151] rounded-full p-1 shadow hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200 ease-in-out transform hover:scale-110">
<i data-feather=x class="w-5 h-5 text-gray-600 dark:text-white hover:text-red-500"></i>
</button>
<input type=text id=searchBox placeholder="Search articles..." class="w-full px-4 py-3 mb-4 border border-cyan-400 text-gray-800 dark:text-white dark:bg-[#374151] placeholder-gray-400 dark:placeholder-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"><div id=searchAdBanner class="mt-4 mb-8 hidden"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class="adsbygoogle search-results-ad" style=display:block;min-height:100px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><style>#searchAdBanner{transition:opacity .3s ease-in-out,transform .3s ease-in-out}#searchAdBanner.show{display:block!important;opacity:1;transform:translateY(0)}#searchAdBanner.hide{opacity:0;transform:translateY(-10px)}.search-results-ad{max-height:100px;overflow:hidden}</style><ul id=results class="bg-white dark:bg-[#1f2937] rounded-lg shadow max-h-60 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-600"></ul></div></div><main class="flex-1 w-full"><div class="max-w-7xl mx-auto py-8 px-4"><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 py-8"><article class="prose prose-blue dark:prose-invert lg:col-span-2"><nav class="text-sm text-gray-600 dark:text-gray-300 mb-4"><a href=/ class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">Home</a>
<span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
<a href=/tags/python class="text-gray-600 dark:text-gray-300 hover:text-[#0f7ea9] no-underline">#Python</a></nav><h1>How to Build a REST API with Django REST Framework (Production Ready)</h1><div class="flex items-center gap-4 my-4 py-3 border-b border-gray-200 dark:border-gray-700"><span class="text-sm text-gray-500 dark:text-gray-400 font-medium mr-2">Share:</span>
<a href="https://twitter.com/intent/tweet?text=How+to+Build+a+REST+API+with+Django+REST+Framework+%28Production+Ready%29&url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F10%2Fhow-to-build-rest-api-django-rest-framework-production-ready.html&via=buanacoding" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-black hover:bg-gray-100 dark:hover:text-white dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Share on Twitter"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F10%2Fhow-to-build-rest-api-django-rest-framework-production-ready.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on Facebook"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.buanacoding.com%2F2025%2F10%2Fhow-to-build-rest-api-django-rest-framework-production-ready.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-blue-700 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all duration-200" title="Share on LinkedIn"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://wa.me/?text=How+to+Build+a+REST+API+with+Django+REST+Framework+%28Production+Ready%29%20https%3A%2F%2Fwww.buanacoding.com%2F2025%2F10%2Fhow-to-build-rest-api-django-rest-framework-production-ready.html" target=_blank rel=noopener class="p-2 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20 rounded-full transition-all duration-200" title="Share on WhatsApp"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.484 3.488"/></svg>
</a><button onclick='copyLinkHeader("https://www.buanacoding.com/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html")' class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 hover:bg-gray-100 dark:hover:text-gray-200 dark:hover:bg-gray-700 rounded-full transition-all duration-200" title="Copy Link">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</button>
<span id=copy-header-success class="hidden text-xs text-green-600 dark:text-green-400 font-medium">Copied!</span></div><script>function copyLinkHeader(e){navigator.clipboard.writeText(e).then(function(){showHeaderSuccess()}).catch(function(){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),showHeaderSuccess()})}function showHeaderSuccess(){const e=document.getElementById("copy-header-success");e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden")},2e3)}</script><p>I still remember the first time I built an API for a client&rsquo;s e-commerce platform. I chose FastAPI because everyone on Twitter was hyping it up&ndash;&ldquo;blazing fast,&rdquo; &ldquo;modern Python,&rdquo; &ldquo;async everything.&rdquo; The initial setup was smooth, and I built endpoints quickly.</p><p>Then reality hit.</p><p>The client needed a complex admin panel to manage products, orders, and users. They wanted role-based permissions with granular controls. They needed integration with their existing Django authentication system. And oh, they wanted detailed audit logs for every database change.</p><div class="my-8 flex justify-center"><div class="w-full max-w-2xl"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-3149036684216973 data-ad-slot=2492895769></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><p>I spent three weeks building features that would have been three clicks in Django admin. I wrote hundreds of lines of permission logic that Django has built-in. I implemented audit trails manually while Django has well-tested libraries for this.</p><p>That&rsquo;s when I learned a crucial lesson: <strong>framework hype doesn&rsquo;t pay your bills. Shipping features does.</strong></p><p>Don&rsquo;t get me wrong&ndash;FastAPI is excellent for certain use cases (I still use it for microservices). But Django REST Framework has won hundreds of my projects because it gets complex applications to production faster with less code, fewer bugs, and better maintainability.</p><p>If you&rsquo;re building a REST API that needs authentication, permissions, admin panels, complex database relationships, and third-party integrations&ndash;Django REST Framework will save you weeks of work.</p><p>This guide will show you how to build production-ready REST APIs with Django REST Framework from scratch. No toy examples. No &ldquo;hello world&rdquo; nonsense. Just real code that handles authentication, permissions, pagination, filtering, testing, and deployment.</p><p>By the end, you&rsquo;ll understand why companies like Instagram, Mozilla, Red Hat, and Eventbrite chose Django for their APIs.</p><p>Let&rsquo;s build something real.</p><h2 id=django-rest-framework-vs-fastapi-honest-comparison>Django REST Framework vs FastAPI: Honest Comparison</h2><p>Before we start, let&rsquo;s address the elephant in the room. Everyone asks: &ldquo;Should I use Django REST Framework or FastAPI?&rdquo;</p><p>Here&rsquo;s my honest take after building 50+ production APIs with both:</p><h3 id=when-to-choose-django-rest-framework>When to Choose Django REST Framework</h3><p><strong>Complex business applications:</strong></p><ul><li>E-commerce platforms with products, orders, inventory, shipping</li><li>CMS with content management, versioning, workflows</li><li>SaaS applications with multi-tenancy, billing, subscriptions</li><li>Enterprise apps with complex permissions and user hierarchies</li></ul><p><strong>Need Django&rsquo;s ecosystem:</strong></p><ul><li>Django Admin panel (saves weeks of development)</li><li>Django Auth (users, groups, permissions out of the box)</li><li>Django ORM (best Python ORM, period)</li><li>Thousands of Django packages (payments, notifications, storage, etc.)</li></ul><p><strong>Database-heavy operations:</strong></p><ul><li>Complex queries with joins, aggregations, subqueries</li><li>Transaction management</li><li>Multiple database connections</li><li>Advanced ORM features (select_related, prefetch_related)</li></ul><p><strong>Built-in batteries:</strong></p><ul><li>Authentication (session, token, JWT)</li><li>Permissions system (object-level, model-level)</li><li>Throttling and rate limiting</li><li>Pagination (cursor, page number, limit-offset)</li><li>Filtering and search</li><li>Browsable API interface (test APIs in browser)</li><li>Content negotiation (JSON, XML, YAML)</li></ul><p><strong>Team considerations:</strong></p><ul><li>Team already knows Django</li><li>Need strict patterns and conventions</li><li>Long-term maintenance (Django has 15+ years of stability)</li></ul><h3 id=when-to-choose-fastapi>When to Choose FastAPI</h3><p><strong>Performance-critical applications:</strong></p><ul><li>Microservices handling 10,000+ req/sec</li><li>Real-time applications (WebSockets, SSE)</li><li>ML model serving with low latency requirements</li></ul><p><strong>Async-first architecture:</strong></p><ul><li>Lots of I/O-bound operations (external APIs, file uploads)</li><li>Need async database drivers (asyncpg, motor)</li><li>WebSocket-heavy applications</li></ul><p><strong>Modern Python features:</strong></p><ul><li>Type hints everywhere (automatic validation)</li><li>Async/await native support</li><li>Python 3.10+ features</li></ul><p><strong>Lightweight APIs:</strong></p><ul><li>Simple CRUD without complex business logic</li><li>Stateless microservices</li><li>API gateway/proxy</li><li>Don&rsquo;t need admin panel</li></ul><p><strong>Greenfield projects:</strong></p><ul><li>No existing Django code</li><li>Small team comfortable with minimal structure</li><li>Can handle building authentication/permissions from scratch</li></ul><h3 id=performance-reality-check>Performance Reality Check</h3><p>Yes, FastAPI is faster&ndash;about 2-3x on raw benchmarks. But here&rsquo;s the truth: <strong>for 95% of applications, this doesn&rsquo;t matter.</strong></p><p>If your API spends 50ms querying the database and 5ms in framework overhead, making the framework 3x faster saves you 3ms. Your users won&rsquo;t notice 47ms vs 50ms response time.</p><p>Optimize database queries, add caching, and use CDN before worrying about framework speed.</p><h3 id=my-recommendation>My Recommendation</h3><p><strong>Choose Django REST Framework if:</strong></p><ul><li>Building a monolithic application or traditional web app</li><li>Need admin panel, complex auth, or Django ecosystem</li><li>Database is primary data source</li><li>Team knows Django or wants opinionated framework</li><li>Building MVP and want to ship fast</li></ul><p><strong>Choose FastAPI if:</strong></p><ul><li>Building microservices or serverless functions</li><li>Need extreme performance (10k+ req/sec per instance)</li><li>Heavy async/await usage</li><li>Small, focused APIs without complex business logic</li><li>Want full control over architecture</li></ul><p><strong>For this tutorial, we&rsquo;re using Django REST Framework</strong> because it teaches you how to build complete, production-ready APIs with all the bells and whistles&ndash;authentication, permissions, admin, testing, deployment.</p><p>If you want to collect data from external sources to populate your API, check out my <a href=/2025/10/how-to-build-web-scraper-python-beautifulsoup-requests.html>web scraping guide
</a>to learn how to gather data automatically.</p><p>Now let&rsquo;s build.</p><h2 id=installing-django-and-django-rest-framework>Installing Django and Django REST Framework</h2><p>Let&rsquo;s set up your development environment.</p><p><strong>Prerequisites:</strong></p><ul><li>Python 3.8 or newer</li><li>Basic understanding of Python, HTTP, and REST APIs</li><li>Basic Django knowledge (models, migrations, URLs) helps but not required</li></ul><p><strong>Create project directory:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir bookstore-api
</span></span><span class=line><span class=cl><span class=nb>cd</span> bookstore-api
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create virtual environment</span>
</span></span><span class=line><span class=cl>python -m venv venv
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Activate virtual environment</span>
</span></span><span class=line><span class=cl><span class=c1># On Linux/Mac:</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> venv/bin/activate
</span></span><span class=line><span class=cl><span class=c1># On Windows:</span>
</span></span><span class=line><span class=cl><span class=c1># venv\Scripts\activate</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upgrade pip</span>
</span></span><span class=line><span class=cl>pip install --upgrade pip
</span></span></code></pre></div><p><strong>Install Django and DRF:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install django djangorestframework
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Optional but recommended packages</span>
</span></span><span class=line><span class=cl>pip install django-filter        <span class=c1># Filtering</span>
</span></span><span class=line><span class=cl>pip install djangorestframework-simplejwt  <span class=c1># JWT authentication</span>
</span></span><span class=line><span class=cl>pip install drf-spectacular      <span class=c1># OpenAPI/Swagger documentation</span>
</span></span><span class=line><span class=cl>pip install django-cors-headers  <span class=c1># CORS support</span>
</span></span><span class=line><span class=cl>pip install psycopg2-binary     <span class=c1># PostgreSQL (we&#39;ll use SQLite for dev)</span>
</span></span><span class=line><span class=cl>pip install python-decouple     <span class=c1># Environment variables</span>
</span></span><span class=line><span class=cl>pip install gunicorn            <span class=c1># Production WSGI server</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Save dependencies</span>
</span></span><span class=line><span class=cl>pip freeze &gt; requirements.txt
</span></span></code></pre></div><p><strong>Create Django project:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create project</span>
</span></span><span class=line><span class=cl>django-admin startproject bookstore .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create API app</span>
</span></span><span class=line><span class=cl>python manage.py startapp books
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create another app for authentication</span>
</span></span><span class=line><span class=cl>python manage.py startapp accounts
</span></span></code></pre></div><p>Your project structure:</p><pre tabindex=0><code>bookstore-api/
├── venv/
├── bookstore/          # Project settings
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   ├── asgi.py
│   └── wsgi.py
├── books/             # Books app
│   ├── migrations/
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── models.py
│   ├── serializers.py  # We&#39;ll create this
│   ├── views.py
│   └── urls.py         # We&#39;ll create this
├── accounts/          # Custom auth
│   └── ...
├── manage.py
└── requirements.txt
</code></pre><p><strong>Configure settings.py:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># bookstore/settings.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Third party</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;rest_framework&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;rest_framework_simplejwt&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django_filters&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;drf_spectacular&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;corsheaders&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Local apps</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;books&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;accounts&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>MIDDLEWARE</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;corsheaders.middleware.CorsMiddleware&#39;</span><span class=p>,</span>  <span class=c1># CORS</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.middleware.common.CommonMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.contrib.messages.middleware.MessageMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.middleware.clickjacking.XFrameOptionsMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Rest Framework settings</span>
</span></span><span class=line><span class=cl><span class=n>REST_FRAMEWORK</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class=p>:</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework_simplejwt.authentication.JWTAuthentication&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.permissions.IsAuthenticatedOrReadOnly&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class=p>:</span> <span class=s1>&#39;rest_framework.pagination.PageNumberPagination&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;PAGE_SIZE&#39;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_FILTER_BACKENDS&#39;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;django_filters.rest_framework.DjangoFilterBackend&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.filters.SearchFilter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.filters.OrderingFilter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_SCHEMA_CLASS&#39;</span><span class=p>:</span> <span class=s1>&#39;drf_spectacular.openapi.AutoSchema&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CORS settings (for frontend)</span>
</span></span><span class=line><span class=cl><span class=n>CORS_ALLOWED_ORIGINS</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://localhost:3000&#34;</span><span class=p>,</span>  <span class=c1># React</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://localhost:5173&#34;</span><span class=p>,</span>  <span class=c1># Vite</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Spectacular settings (API documentation)</span>
</span></span><span class=line><span class=cl><span class=n>SPECTACULAR_SETTINGS</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;TITLE&#39;</span><span class=p>:</span> <span class=s1>&#39;Bookstore API&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DESCRIPTION&#39;</span><span class=p>:</span> <span class=s1>&#39;REST API for online bookstore&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;VERSION&#39;</span><span class=p>:</span> <span class=s1>&#39;1.0.0&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;SERVE_INCLUDE_SCHEMA&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># JWT settings</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>timedelta</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SIMPLE_JWT</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;ACCESS_TOKEN_LIFETIME&#39;</span><span class=p>:</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>minutes</span><span class=o>=</span><span class=mi>60</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;REFRESH_TOKEN_LIFETIME&#39;</span><span class=p>:</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;ROTATE_REFRESH_TOKENS&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;BLACKLIST_AFTER_ROTATION&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Run initial migrations:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py migrate
</span></span></code></pre></div><p><strong>Create superuser:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py createsuperuser
</span></span><span class=line><span class=cl><span class=c1># Enter username, email, password</span>
</span></span></code></pre></div><p><strong>Test server:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py runserver
</span></span></code></pre></div><p>Visit <code>http://localhost:8000/admin/</code> and login with your superuser credentials. If you see Django admin, you&rsquo;re good to go!</p><h2 id=creating-models>Creating Models</h2><p>Let&rsquo;s build a bookstore API with books, authors, categories, and reviews.</p><p><strong>Create models (books/models.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.core.validators</span> <span class=kn>import</span> <span class=n>MinValueValidator</span><span class=p>,</span> <span class=n>MaxValueValidator</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Author</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>bio</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>(</span><span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>birth_date</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>(</span><span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>website</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>URLField</span><span class=p>(</span><span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>updated_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Category</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>slug</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>SlugField</span><span class=p>(</span><span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>(</span><span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=s1>&#39;Categories&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Book</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>slug</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>SlugField</span><span class=p>(</span><span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>isbn</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>13</span><span class=p>,</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>authors</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>Author</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s1>&#39;books&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>categories</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>Category</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s1>&#39;books&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>publisher</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>publication_date</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>pages</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PositiveIntegerField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>price</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DecimalField</span><span class=p>(</span><span class=n>max_digits</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>decimal_places</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>stock</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PositiveIntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cover_image</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>URLField</span><span class=p>(</span><span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>updated_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;-created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>title</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>average_rating</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>reviews</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>reviews</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>reviews</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nb>sum</span><span class=p>([</span><span class=n>review</span><span class=o>.</span><span class=n>rating</span> <span class=k>for</span> <span class=n>review</span> <span class=ow>in</span> <span class=n>reviews</span><span class=p>])</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>reviews</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_available</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>stock</span> <span class=o>&gt;</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Review</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>book</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Book</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s1>&#39;reviews&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>User</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s1>&#39;reviews&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>rating</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PositiveSmallIntegerField</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>validators</span><span class=o>=</span><span class=p>[</span><span class=n>MinValueValidator</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>MaxValueValidator</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>comment</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>updated_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;-created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>unique_together</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;book&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>]</span>  <span class=c1># One review per user per book</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>username</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>rating</span><span class=si>}</span><span class=s2>/5)&#34;</span>
</span></span></code></pre></div><p><strong>Create and run migrations:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py makemigrations
</span></span><span class=line><span class=cl>python manage.py migrate
</span></span></code></pre></div><p><strong>Register models in admin (books/admin.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Author</span><span class=p>,</span> <span class=n>Category</span><span class=p>,</span> <span class=n>Book</span><span class=p>,</span> <span class=n>Review</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@admin.register</span><span class=p>(</span><span class=n>Author</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AuthorAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>list_display</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;birth_date&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;bio&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>prepopulated_fields</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;slug&#39;</span><span class=p>:</span> <span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,)}</span>  <span class=c1># If you add slug field</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@admin.register</span><span class=p>(</span><span class=n>Category</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CategoryAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>list_display</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;slug&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>prepopulated_fields</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;slug&#39;</span><span class=p>:</span> <span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,)}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@admin.register</span><span class=p>(</span><span class=n>Book</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>list_display</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;stock&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>,</span> <span class=s1>&#39;is_available&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>list_filter</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;publication_date&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=s1>&#39;authors&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filter_horizontal</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>prepopulated_fields</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;slug&#39;</span><span class=p>:</span> <span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>,)}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@admin.register</span><span class=p>(</span><span class=n>Review</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReviewAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>list_display</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;book&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>list_filter</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;book__title&#39;</span><span class=p>,</span> <span class=s1>&#39;user__username&#39;</span><span class=p>,</span> <span class=s1>&#39;comment&#39;</span><span class=p>]</span>
</span></span></code></pre></div><p>Now you can add books via Django admin at <code>http://localhost:8000/admin/</code>. Add a few books to test with.</p><h2 id=creating-serializers>Creating Serializers</h2><p>Serializers convert Django models to JSON (and vice versa). Think of them as translators between Python and JSON.</p><p><strong>Create serializers (books/serializers.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>serializers</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Author</span><span class=p>,</span> <span class=n>Category</span><span class=p>,</span> <span class=n>Book</span><span class=p>,</span> <span class=n>Review</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AuthorSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>books_count</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>SerializerMethodField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Author</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;bio&#39;</span><span class=p>,</span> <span class=s1>&#39;birth_date&#39;</span><span class=p>,</span> <span class=s1>&#39;website&#39;</span><span class=p>,</span> <span class=s1>&#39;books_count&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_books_count</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>books</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CategorySerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>books_count</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>SerializerMethodField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Category</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;slug&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=s1>&#39;books_count&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_books_count</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>books</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReviewSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>StringRelatedField</span><span class=p>(</span><span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Review</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;book&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;comment&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;updated_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>read_only_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;user&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate_rating</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=ow>or</span> <span class=n>value</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>(</span><span class=s2>&#34;Rating must be between 1 and 5&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Automatically set user from request</span>
</span></span><span class=line><span class=cl>        <span class=n>validated_data</span><span class=p>[</span><span class=s1>&#39;user&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>context</span><span class=p>[</span><span class=s1>&#39;request&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>user</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>validated_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookListSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Lightweight serializer for list view&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>authors</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>StringRelatedField</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>categories</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>StringRelatedField</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>average_rating</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>is_available</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Book</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;slug&#39;</span><span class=p>,</span> <span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;stock&#39;</span><span class=p>,</span> <span class=s1>&#39;average_rating&#39;</span><span class=p>,</span> <span class=s1>&#39;is_available&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cover_image&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookDetailSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Detailed serializer for single book view&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>authors</span> <span class=o>=</span> <span class=n>AuthorSerializer</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>categories</span> <span class=o>=</span> <span class=n>CategorySerializer</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>reviews</span> <span class=o>=</span> <span class=n>ReviewSerializer</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>average_rating</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>is_available</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>reviews_count</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>SerializerMethodField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Write fields (accept IDs)</span>
</span></span><span class=line><span class=cl>    <span class=n>author_ids</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>PrimaryKeyRelatedField</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>queryset</span><span class=o>=</span><span class=n>Author</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>write_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>source</span><span class=o>=</span><span class=s1>&#39;authors&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>category_ids</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>PrimaryKeyRelatedField</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>queryset</span><span class=o>=</span><span class=n>Category</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>write_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>source</span><span class=o>=</span><span class=s1>&#39;categories&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Book</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;slug&#39;</span><span class=p>,</span> <span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;author_ids&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=s1>&#39;category_ids&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;publisher&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>,</span> <span class=s1>&#39;pages&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;stock&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cover_image&#39;</span><span class=p>,</span> <span class=s1>&#39;average_rating&#39;</span><span class=p>,</span> <span class=s1>&#39;is_available&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;reviews&#39;</span><span class=p>,</span> <span class=s1>&#39;reviews_count&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;updated_at&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>read_only_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;slug&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_reviews_count</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>reviews</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate_isbn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># ISBN-13 validation</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>13</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>value</span><span class=o>.</span><span class=n>isdigit</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>(</span><span class=s2>&#34;ISBN must be 13 digits&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate_price</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>(</span><span class=s2>&#34;Price must be positive&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookCreateUpdateSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Serializer for creating/updating books&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Book</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;slug&#39;</span><span class=p>,</span> <span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=s1>&#39;publisher&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pages&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;stock&#39;</span><span class=p>,</span> <span class=s1>&#39;cover_image&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Custom validation</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;pages&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>({</span><span class=s2>&#34;pages&#34;</span><span class=p>:</span> <span class=s2>&#34;Pages must be positive&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;stock&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>({</span><span class=s2>&#34;stock&#34;</span><span class=p>:</span> <span class=s2>&#34;Stock cannot be negative&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>data</span>
</span></span></code></pre></div><p><strong>Key serializer concepts:</strong></p><ul><li><code>ModelSerializer</code> - automatically creates fields from model</li><li><code>read_only=True</code> - field appears in response but can&rsquo;t be set</li><li><code>write_only=True</code> - field accepted in request but not shown in response</li><li><code>SerializerMethodField</code> - custom calculated field (method: <code>get_&lt;field_name></code>)</li><li><code>StringRelatedField</code> - shows <code>__str__()</code> representation</li><li><code>PrimaryKeyRelatedField</code> - shows/accepts IDs</li><li><code>validate_&lt;field></code> - field-level validation</li><li><code>validate()</code> - object-level validation</li></ul><h2 id=creating-views-with-viewsets>Creating Views with ViewSets</h2><p>ViewSets combine multiple views (list, create, retrieve, update, delete) into one class.</p><p><strong>Create views (books/views.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>viewsets</span><span class=p>,</span> <span class=n>filters</span><span class=p>,</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.decorators</span> <span class=kn>import</span> <span class=n>action</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.permissions</span> <span class=kn>import</span> <span class=n>IsAuthenticated</span><span class=p>,</span> <span class=n>IsAuthenticatedOrReadOnly</span><span class=p>,</span> <span class=n>AllowAny</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django_filters.rest_framework</span> <span class=kn>import</span> <span class=n>DjangoFilterBackend</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.db.models</span> <span class=kn>import</span> <span class=n>Q</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Author</span><span class=p>,</span> <span class=n>Category</span><span class=p>,</span> <span class=n>Book</span><span class=p>,</span> <span class=n>Review</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>AuthorSerializer</span><span class=p>,</span> <span class=n>CategorySerializer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>BookListSerializer</span><span class=p>,</span> <span class=n>BookDetailSerializer</span><span class=p>,</span> <span class=n>BookCreateUpdateSerializer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>ReviewSerializer</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.permissions</span> <span class=kn>import</span> <span class=n>IsOwnerOrReadOnly</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AuthorViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    API endpoint for authors.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    list: Get all authors
</span></span></span><span class=line><span class=cl><span class=s2>    create: Create new author (admin only)
</span></span></span><span class=line><span class=cl><span class=s2>    retrieve: Get single author
</span></span></span><span class=line><span class=cl><span class=s2>    update: Update author (admin only)
</span></span></span><span class=line><span class=cl><span class=s2>    destroy: Delete author (admin only)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>Author</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>AuthorSerializer</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filter_backends</span> <span class=o>=</span> <span class=p>[</span><span class=n>filters</span><span class=o>.</span><span class=n>SearchFilter</span><span class=p>,</span> <span class=n>filters</span><span class=o>.</span><span class=n>OrderingFilter</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;bio&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@action</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;get&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>books</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Get all books by this author&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>author</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>books</span> <span class=o>=</span> <span class=n>author</span><span class=o>.</span><span class=n>books</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookListSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CategoryViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;API endpoint for categories&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>Category</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>CategorySerializer</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>lookup_field</span> <span class=o>=</span> <span class=s1>&#39;slug&#39;</span>  <span class=c1># Use slug instead of ID in URL</span>
</span></span><span class=line><span class=cl>    <span class=n>filter_backends</span> <span class=o>=</span> <span class=p>[</span><span class=n>filters</span><span class=o>.</span><span class=n>SearchFilter</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@action</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;get&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>books</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>slug</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Get all books in this category&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>category</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>books</span> <span class=o>=</span> <span class=n>category</span><span class=o>.</span><span class=n>books</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookListSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;API endpoint for books&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>prefetch_related</span><span class=p>(</span><span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=s1>&#39;reviews&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filter_backends</span> <span class=o>=</span> <span class=p>[</span><span class=n>DjangoFilterBackend</span><span class=p>,</span> <span class=n>filters</span><span class=o>.</span><span class=n>SearchFilter</span><span class=p>,</span> <span class=n>filters</span><span class=o>.</span><span class=n>OrderingFilter</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filterset_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;categories__slug&#39;</span><span class=p>,</span> <span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=s1>&#39;authors__name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;-created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>lookup_field</span> <span class=o>=</span> <span class=s1>&#39;slug&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_serializer_class</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Use different serializers for different actions&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=o>==</span> <span class=s1>&#39;list&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>BookListSerializer</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;create&#39;</span><span class=p>,</span> <span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=s1>&#39;partial_update&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>BookCreateUpdateSerializer</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>BookDetailSerializer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_queryset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Custom filtering&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>queryset</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Filter by price range</span>
</span></span><span class=line><span class=cl>        <span class=n>min_price</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;min_price&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>max_price</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;max_price&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>min_price</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>queryset</span> <span class=o>=</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>price__gte</span><span class=o>=</span><span class=n>min_price</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>max_price</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>queryset</span> <span class=o>=</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>price__lte</span><span class=o>=</span><span class=n>max_price</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Filter by availability</span>
</span></span><span class=line><span class=cl>        <span class=n>available</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;available&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>available</span> <span class=o>==</span> <span class=s1>&#39;true&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>queryset</span> <span class=o>=</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>stock__gt</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>available</span> <span class=o>==</span> <span class=s1>&#39;false&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>queryset</span> <span class=o>=</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>stock</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>queryset</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@action</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;get&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>reviews</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>slug</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Get all reviews for this book&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>book</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>reviews</span> <span class=o>=</span> <span class=n>book</span><span class=o>.</span><span class=n>reviews</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>ReviewSerializer</span><span class=p>(</span><span class=n>reviews</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@action</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;get&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>featured</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Get featured books (high rated, in stock)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>books</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>stock__gt</span><span class=o>=</span><span class=mi>0</span><span class=p>)[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookListSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@action</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;get&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>search_advanced</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Advanced search with multiple criteria&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;q&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>books</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Q</span><span class=p>(</span><span class=n>title__icontains</span><span class=o>=</span><span class=n>query</span><span class=p>)</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>            <span class=n>Q</span><span class=p>(</span><span class=n>description__icontains</span><span class=o>=</span><span class=n>query</span><span class=p>)</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>            <span class=n>Q</span><span class=p>(</span><span class=n>authors__name__icontains</span><span class=o>=</span><span class=n>query</span><span class=p>)</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>            <span class=n>Q</span><span class=p>(</span><span class=n>categories__name__icontains</span><span class=o>=</span><span class=n>query</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span><span class=o>.</span><span class=n>distinct</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookListSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReviewViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;API endpoint for reviews&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>Review</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>select_related</span><span class=p>(</span><span class=s1>&#39;book&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>ReviewSerializer</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>,</span> <span class=n>IsOwnerOrReadOnly</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filter_backends</span> <span class=o>=</span> <span class=p>[</span><span class=n>DjangoFilterBackend</span><span class=p>,</span> <span class=n>filters</span><span class=o>.</span><span class=n>OrderingFilter</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>filterset_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;book&#39;</span><span class=p>,</span> <span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;user&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering_fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>ordering</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;-created_at&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>perform_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>serializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Set user automatically when creating review&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_queryset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Users can only update/delete their own reviews&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>queryset</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=s1>&#39;partial_update&#39;</span><span class=p>,</span> <span class=s1>&#39;destroy&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>queryset</span>
</span></span></code></pre></div><p><strong>Create custom permission (books/permissions.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>permissions</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>IsOwnerOrReadOnly</span><span class=p>(</span><span class=n>permissions</span><span class=o>.</span><span class=n>BasePermission</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Custom permission: object owner can edit, others can only read.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>has_object_permission</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>view</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Read permissions allowed for any request (GET, HEAD, OPTIONS)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=ow>in</span> <span class=n>permissions</span><span class=o>.</span><span class=n>SAFE_METHODS</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Write permissions only for object owner</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>user</span> <span class=o>==</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span>
</span></span></code></pre></div><h2 id=url-routing-with-routers>URL Routing with Routers</h2><p>DRF Routers automatically generate URLs for ViewSets.</p><p><strong>Create URLs (books/urls.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span><span class=p>,</span> <span class=n>include</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.routers</span> <span class=kn>import</span> <span class=n>DefaultRouter</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.views</span> <span class=kn>import</span> <span class=n>AuthorViewSet</span><span class=p>,</span> <span class=n>CategoryViewSet</span><span class=p>,</span> <span class=n>BookViewSet</span><span class=p>,</span> <span class=n>ReviewViewSet</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>router</span> <span class=o>=</span> <span class=n>DefaultRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=n>AuthorViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;author&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=n>CategoryViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;category&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;books&#39;</span><span class=p>,</span> <span class=n>BookViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;book&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;reviews&#39;</span><span class=p>,</span> <span class=n>ReviewViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;review&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=n>router</span><span class=o>.</span><span class=n>urls</span><span class=p>)),</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p><strong>Update project URLs (bookstore/urls.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span><span class=p>,</span> <span class=n>include</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework_simplejwt.views</span> <span class=kn>import</span> <span class=n>TokenObtainPairView</span><span class=p>,</span> <span class=n>TokenRefreshView</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>drf_spectacular.views</span> <span class=kn>import</span> <span class=n>SpectacularAPIView</span><span class=p>,</span> <span class=n>SpectacularSwaggerView</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># API endpoints</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=s1>&#39;books.urls&#39;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Authentication</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/token/&#39;</span><span class=p>,</span> <span class=n>TokenObtainPairView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;token_obtain_pair&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/token/refresh/&#39;</span><span class=p>,</span> <span class=n>TokenRefreshView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;token_refresh&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># API documentation</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/schema/&#39;</span><span class=p>,</span> <span class=n>SpectacularAPIView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;schema&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/docs/&#39;</span><span class=p>,</span> <span class=n>SpectacularSwaggerView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(</span><span class=n>url_name</span><span class=o>=</span><span class=s1>&#39;schema&#39;</span><span class=p>),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;swagger-ui&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Browsable API auth</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api-auth/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=s1>&#39;rest_framework.urls&#39;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p><strong>Generated URLs:</strong></p><pre tabindex=0><code>GET    /api/books/              - List all books
POST   /api/books/              - Create book
GET    /api/books/{slug}/       - Get single book
PUT    /api/books/{slug}/       - Update book (full)
PATCH  /api/books/{slug}/       - Update book (partial)
DELETE /api/books/{slug}/       - Delete book
GET    /api/books/{slug}/reviews/ - Custom action
GET    /api/books/featured/     - Custom list action

GET    /api/authors/            - List authors
POST   /api/authors/            - Create author
GET    /api/authors/{id}/       - Get author
GET    /api/authors/{id}/books/ - Author&#39;s books

GET    /api/categories/         - List categories
GET    /api/categories/{slug}/  - Get category
GET    /api/categories/{slug}/books/ - Category&#39;s books

GET    /api/reviews/            - List reviews
POST   /api/reviews/            - Create review
GET    /api/reviews/{id}/       - Get review
PATCH  /api/reviews/{id}/       - Update review (owner only)
DELETE /api/reviews/{id}/       - Delete review (owner only)
</code></pre><p>Start server and test:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py runserver
</span></span></code></pre></div><p>Visit:</p><ul><li><code>http://localhost:8000/api/</code> - Browsable API</li><li><code>http://localhost:8000/api/books/</code> - Books list</li><li><code>http://localhost:8000/api/docs/</code> - Swagger UI documentation</li></ul><h2 id=authentication-with-jwt>Authentication with JWT</h2><p>Let&rsquo;s implement JWT (JSON Web Token) authentication.</p><p><strong>JWT is already configured</strong> in settings.py. Now let&rsquo;s test it.</p><p><strong>Get JWT token:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST http://localhost:8000/api/token/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{&#34;username&#34;: &#34;your_username&#34;, &#34;password&#34;: &#34;your_password&#34;}&#39;</span>
</span></span></code></pre></div><p>Response:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;access&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJ0eXAiOiJKV1QiLCJhbGc...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;refresh&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJ0eXAiOiJKV1QiLCJhbGc...&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Use access token:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8000/api/books/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...&#34;</span>
</span></span></code></pre></div><p><strong>Refresh token when expired:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST http://localhost:8000/api/token/refresh/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{&#34;refresh&#34;: &#34;eyJ0eXAiOiJKV1QiLCJhbGc...&#34;}&#39;</span>
</span></span></code></pre></div><p><strong>Create user registration endpoint (accounts/serializers.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>serializers</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.password_validation</span> <span class=kn>import</span> <span class=n>validate_password</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RegisterSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>password</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>write_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>validators</span><span class=o>=</span><span class=p>[</span><span class=n>validate_password</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>password2</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>write_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;username&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>,</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span> <span class=s1>&#39;password2&#39;</span><span class=p>,</span> <span class=s1>&#39;first_name&#39;</span><span class=p>,</span> <span class=s1>&#39;last_name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attrs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;password&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;password2&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ValidationError</span><span class=p>({</span><span class=s2>&#34;password&#34;</span><span class=p>:</span> <span class=s2>&#34;Password fields didn&#39;t match.&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>attrs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>validated_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s1>&#39;password2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=o>**</span><span class=n>validated_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;username&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>,</span> <span class=s1>&#39;first_name&#39;</span><span class=p>,</span> <span class=s1>&#39;last_name&#39;</span><span class=p>,</span> <span class=s1>&#39;date_joined&#39;</span><span class=p>]</span>
</span></span></code></pre></div><p><strong>Create registration view (accounts/views.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>generics</span><span class=p>,</span> <span class=n>permissions</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=n>RegisterSerializer</span><span class=p>,</span> <span class=n>UserSerializer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RegisterView</span><span class=p>(</span><span class=n>generics</span><span class=o>.</span><span class=n>CreateAPIView</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>permissions</span><span class=o>.</span><span class=n>AllowAny</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>RegisterSerializer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserProfileView</span><span class=p>(</span><span class=n>generics</span><span class=o>.</span><span class=n>RetrieveUpdateAPIView</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>UserSerializer</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>permissions</span><span class=o>.</span><span class=n>IsAuthenticated</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_object</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>user</span>
</span></span></code></pre></div><p><strong>Add URLs (accounts/urls.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.views</span> <span class=kn>import</span> <span class=n>RegisterView</span><span class=p>,</span> <span class=n>UserProfileView</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;register/&#39;</span><span class=p>,</span> <span class=n>RegisterView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;register&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;profile/&#39;</span><span class=p>,</span> <span class=n>UserProfileView</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;profile&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p><strong>Update project URLs:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># bookstore/urls.py</span>
</span></span><span class=line><span class=cl><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... existing patterns</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/accounts/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=s1>&#39;accounts.urls&#39;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p><strong>Test registration:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST http://localhost:8000/api/accounts/register/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;username&#34;: &#34;newuser&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;email&#34;: &#34;user@example.com&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;password&#34;: &#34;SecurePass123!&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;password2&#34;: &#34;SecurePass123!&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;first_name&#34;: &#34;John&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;last_name&#34;: &#34;Doe&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span>
</span></span></code></pre></div><p>Now you have complete auth: registration, login (JWT), and profile management.</p><h2 id=permissions-and-throttling>Permissions and Throttling</h2><p>Control who can access what and prevent API abuse.</p><p><strong>Built-in permissions:</strong></p><ul><li><code>AllowAny</code> - anyone (default)</li><li><code>IsAuthenticated</code> - logged in users only</li><li><code>IsAdminUser</code> - admin users only</li><li><code>IsAuthenticatedOrReadOnly</code> - read for all, write for authenticated</li></ul><p><strong>Apply permissions per view:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.permissions</span> <span class=kn>import</span> <span class=n>IsAdminUser</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_permissions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Different permissions for different actions&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;create&#39;</span><span class=p>,</span> <span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=s1>&#39;partial_update&#39;</span><span class=p>,</span> <span class=s1>&#39;destroy&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[</span><span class=n>IsAdminUser</span><span class=p>()]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>IsAuthenticatedOrReadOnly</span><span class=p>()]</span>
</span></span></code></pre></div><p><strong>Custom object-level permissions:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># books/permissions.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>IsAdminOrReadOnly</span><span class=p>(</span><span class=n>permissions</span><span class=o>.</span><span class=n>BasePermission</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Admin can edit, others read only&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>has_permission</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>view</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=ow>in</span> <span class=n>permissions</span><span class=o>.</span><span class=n>SAFE_METHODS</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span> <span class=ow>and</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>is_staff</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>IsOwnerOrAdmin</span><span class=p>(</span><span class=n>permissions</span><span class=o>.</span><span class=n>BasePermission</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Owner or admin can edit&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>has_object_permission</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>view</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=ow>in</span> <span class=n>permissions</span><span class=o>.</span><span class=n>SAFE_METHODS</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>is_staff</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>user</span> <span class=o>==</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span>
</span></span></code></pre></div><p><strong>Throttling (rate limiting):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>REST_FRAMEWORK</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... existing config</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.throttling.AnonRateThrottle&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;rest_framework.throttling.UserRateThrottle&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;anon&#39;</span><span class=p>:</span> <span class=s1>&#39;100/day&#39;</span><span class=p>,</span>      <span class=c1># Anonymous users: 100 requests per day</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;1000/day&#39;</span><span class=p>,</span>     <span class=c1># Authenticated users: 1000 per day</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Custom throttling per view:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.throttling</span> <span class=kn>import</span> <span class=n>UserRateThrottle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BurstRateThrottle</span><span class=p>(</span><span class=n>UserRateThrottle</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rate</span> <span class=o>=</span> <span class=s1>&#39;60/min&#39;</span>  <span class=c1># 60 requests per minute</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>throttle_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>BurstRateThrottle</span><span class=p>]</span>
</span></span></code></pre></div><h2 id=filtering-pagination-and-search>Filtering, Pagination, and Search</h2><p>Make your API flexible and performant. Once your API is collecting data, you can analyze usage patterns, user behavior, and performance metrics with <a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html>Pandas
</a>.</p><h3 id=filtering>Filtering</h3><p>Already configured with <code>django-filter</code>. Use query parameters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Filter by category slug</span>
</span></span><span class=line><span class=cl>GET /api/books/?categories__slug<span class=o>=</span>fiction
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter by author ID</span>
</span></span><span class=line><span class=cl>GET /api/books/?authors<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter by publication date</span>
</span></span><span class=line><span class=cl>GET /api/books/?publication_date<span class=o>=</span>2024-01-01
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Multiple filters</span>
</span></span><span class=line><span class=cl>GET /api/books/?categories__slug<span class=o>=</span>fiction<span class=p>&amp;</span><span class=nv>min_price</span><span class=o>=</span>10<span class=p>&amp;</span><span class=nv>max_price</span><span class=o>=</span><span class=m>50</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter by availability</span>
</span></span><span class=line><span class=cl>GET /api/books/?available<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><p><strong>Add custom filter backend:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># books/filters.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>django_filters</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Book</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookFilter</span><span class=p>(</span><span class=n>django_filters</span><span class=o>.</span><span class=n>FilterSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>min_price</span> <span class=o>=</span> <span class=n>django_filters</span><span class=o>.</span><span class=n>NumberFilter</span><span class=p>(</span><span class=n>field_name</span><span class=o>=</span><span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=n>lookup_expr</span><span class=o>=</span><span class=s1>&#39;gte&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>max_price</span> <span class=o>=</span> <span class=n>django_filters</span><span class=o>.</span><span class=n>NumberFilter</span><span class=p>(</span><span class=n>field_name</span><span class=o>=</span><span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=n>lookup_expr</span><span class=o>=</span><span class=s1>&#39;lte&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>django_filters</span><span class=o>.</span><span class=n>CharFilter</span><span class=p>(</span><span class=n>lookup_expr</span><span class=o>=</span><span class=s1>&#39;icontains&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>author_name</span> <span class=o>=</span> <span class=n>django_filters</span><span class=o>.</span><span class=n>CharFilter</span><span class=p>(</span><span class=n>field_name</span><span class=o>=</span><span class=s1>&#39;authors__name&#39;</span><span class=p>,</span> <span class=n>lookup_expr</span><span class=o>=</span><span class=s1>&#39;icontains&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>Book</span>
</span></span><span class=line><span class=cl>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;categories&#39;</span><span class=p>,</span> <span class=s1>&#39;authors&#39;</span><span class=p>,</span> <span class=s1>&#39;publication_date&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># In views.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.filters</span> <span class=kn>import</span> <span class=n>BookFilter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>filterset_class</span> <span class=o>=</span> <span class=n>BookFilter</span>
</span></span></code></pre></div><h3 id=search>Search</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Search in title, description, ISBN, author name</span>
</span></span><span class=line><span class=cl>GET /api/books/?search<span class=o>=</span>python
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Search authors</span>
</span></span><span class=line><span class=cl>GET /api/authors/?search<span class=o>=</span>rowling
</span></span></code></pre></div><h3 id=ordering>Ordering</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Order by price (ascending)</span>
</span></span><span class=line><span class=cl>GET /api/books/?ordering<span class=o>=</span>price
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Order by price (descending)</span>
</span></span><span class=line><span class=cl>GET /api/books/?ordering<span class=o>=</span>-price
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Multiple ordering</span>
</span></span><span class=line><span class=cl>GET /api/books/?ordering<span class=o>=</span>-publication_date,title
</span></span></code></pre></div><h3 id=pagination>Pagination</h3><p><strong>Page number pagination (default):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GET /api/books/              <span class=c1># Page 1 (default)</span>
</span></span><span class=line><span class=cl>GET /api/books/?page<span class=o>=</span><span class=m>2</span>       <span class=c1># Page 2</span>
</span></span><span class=line><span class=cl>GET /api/books/?page_size<span class=o>=</span><span class=m>20</span> <span class=c1># Custom page size</span>
</span></span></code></pre></div><p>Response:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;count&#34;</span><span class=p>:</span> <span class=mi>150</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;next&#34;</span><span class=p>:</span> <span class=s2>&#34;http://localhost:8000/api/books/?page=3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;previous&#34;</span><span class=p>:</span> <span class=s2>&#34;http://localhost:8000/api/books/?page=1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;results&#34;</span><span class=p>:</span> <span class=p>[</span><span class=err>...</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Limit-offset pagination:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py</span>
</span></span><span class=line><span class=cl><span class=n>REST_FRAMEWORK</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class=p>:</span> <span class=s1>&#39;rest_framework.pagination.LimitOffsetPagination&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;PAGE_SIZE&#39;</span><span class=p>:</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GET /api/books/?limit<span class=o>=</span>20<span class=p>&amp;</span><span class=nv>offset</span><span class=o>=</span><span class=m>40</span>  <span class=c1># Items 41-60</span>
</span></span></code></pre></div><p><strong>Cursor pagination (best for large datasets):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py</span>
</span></span><span class=line><span class=cl><span class=n>REST_FRAMEWORK</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class=p>:</span> <span class=s1>&#39;rest_framework.pagination.CursorPagination&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;PAGE_SIZE&#39;</span><span class=p>:</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>More efficient for large tables, prevents offset issues.</p><p><strong>Custom pagination:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># books/pagination.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.pagination</span> <span class=kn>import</span> <span class=n>PageNumberPagination</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StandardResultsSetPagination</span><span class=p>(</span><span class=n>PageNumberPagination</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>page_size</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=n>page_size_query_param</span> <span class=o>=</span> <span class=s1>&#39;page_size&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>max_page_size</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LargeResultsSetPagination</span><span class=p>(</span><span class=n>PageNumberPagination</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>page_size</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>    <span class=n>page_size_query_param</span> <span class=o>=</span> <span class=s1>&#39;page_size&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>max_page_size</span> <span class=o>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># In views.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookViewSet</span><span class=p>(</span><span class=n>viewsets</span><span class=o>.</span><span class=n>ModelViewSet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>pagination_class</span> <span class=o>=</span> <span class=n>StandardResultsSetPagination</span>
</span></span></code></pre></div><h2 id=testing-your-api>Testing Your API</h2><p>Writing tests ensures your API works correctly and catches regressions.</p><p><strong>Create tests (books/tests.py):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.test</span> <span class=kn>import</span> <span class=n>TestCase</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.test</span> <span class=kn>import</span> <span class=n>APITestCase</span><span class=p>,</span> <span class=n>APIClient</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>reverse</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Author</span><span class=p>,</span> <span class=n>Category</span><span class=p>,</span> <span class=n>Book</span><span class=p>,</span> <span class=n>Review</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BookAPITestCase</span><span class=p>(</span><span class=n>APITestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Set up test data&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Create users</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>admin</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create_superuser</span><span class=p>(</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span> <span class=s1>&#39;admin@test.com&#39;</span><span class=p>,</span> <span class=s1>&#39;admin123&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=s1>&#39;user@test.com&#39;</span><span class=p>,</span> <span class=s1>&#39;user123&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Create test data</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>author</span> <span class=o>=</span> <span class=n>Author</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Test Author&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>category</span> <span class=o>=</span> <span class=n>Category</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Fiction&#39;</span><span class=p>,</span> <span class=n>slug</span><span class=o>=</span><span class=s1>&#39;fiction&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>book</span> <span class=o>=</span> <span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Test Book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>slug</span><span class=o>=</span><span class=s1>&#39;test-book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>isbn</span><span class=o>=</span><span class=s1>&#39;1234567890123&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>description</span><span class=o>=</span><span class=s1>&#39;Test description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>publisher</span><span class=o>=</span><span class=s1>&#39;Test Publisher&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>publication_date</span><span class=o>=</span><span class=s1>&#39;2024-01-01&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>pages</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>price</span><span class=o>=</span><span class=mf>29.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>stock</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>authors</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>author</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>categories</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>category</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span> <span class=o>=</span> <span class=n>APIClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_list_books</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test retrieving book list&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/api/books/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;results&#39;</span><span class=p>]),</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_retrieve_book</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test retrieving single book&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/api/books/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>slug</span><span class=si>}</span><span class=s1>/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>],</span> <span class=s1>&#39;Test Book&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_create_book_unauthenticated</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test creating book without authentication fails&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;New Book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;slug&#39;</span><span class=p>:</span> <span class=s1>&#39;new-book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;isbn&#39;</span><span class=p>:</span> <span class=s1>&#39;9876543210987&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;New book description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;publisher&#39;</span><span class=p>:</span> <span class=s1>&#39;New Publisher&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;publication_date&#39;</span><span class=p>:</span> <span class=s1>&#39;2024-02-01&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pages&#39;</span><span class=p>:</span> <span class=mi>250</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=mf>19.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;stock&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;authors&#39;</span><span class=p>:</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>author</span><span class=o>.</span><span class=n>id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;categories&#39;</span><span class=p>:</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>category</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s1>&#39;/api/books/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_401_UNAUTHORIZED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_create_book_authenticated</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test creating book as authenticated admin&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>admin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;New Book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;slug&#39;</span><span class=p>:</span> <span class=s1>&#39;new-book&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;isbn&#39;</span><span class=p>:</span> <span class=s1>&#39;9876543210987&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;New book description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;publisher&#39;</span><span class=p>:</span> <span class=s1>&#39;New Publisher&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;publication_date&#39;</span><span class=p>:</span> <span class=s1>&#39;2024-02-01&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pages&#39;</span><span class=p>:</span> <span class=mi>250</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=mf>19.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;stock&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;authors&#39;</span><span class=p>:</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>author</span><span class=o>.</span><span class=n>id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;categories&#39;</span><span class=p>:</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>category</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s1>&#39;/api/books/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>count</span><span class=p>(),</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_update_book</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test updating book&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>admin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=mf>39.99</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>patch</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/api/books/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>slug</span><span class=si>}</span><span class=s1>/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>refresh_from_db</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>price</span><span class=p>),</span> <span class=mf>39.99</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_delete_book</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test deleting book&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>admin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/api/books/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>slug</span><span class=si>}</span><span class=s1>/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_204_NO_CONTENT</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>count</span><span class=p>(),</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_filter_books_by_category</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test filtering books by category&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/api/books/?categories__slug=fiction&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;results&#39;</span><span class=p>]),</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_search_books</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test searching books&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/api/books/?search=Test&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;results&#39;</span><span class=p>]),</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_create_review</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test creating review&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;book&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;rating&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;Great book!&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;comment&#39;</span><span class=p>:</span> <span class=s1>&#39;Really enjoyed this book.&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s1>&#39;/api/reviews/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>Review</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>count</span><span class=p>(),</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_update_own_review</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test user can update their own review&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>review</span> <span class=o>=</span> <span class=n>Review</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>book</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>rating</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Good&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>comment</span><span class=o>=</span><span class=s1>&#39;Nice book&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;rating&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;Excellent!&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>patch</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/api/reviews/</span><span class=si>{</span><span class=n>review</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s1>/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_200_OK</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>review</span><span class=o>.</span><span class=n>refresh_from_db</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>review</span><span class=o>.</span><span class=n>rating</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_cannot_update_others_review</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Test user cannot update another user&#39;s review&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>other_user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=s1>&#39;other&#39;</span><span class=p>,</span> <span class=s1>&#39;other@test.com&#39;</span><span class=p>,</span> <span class=s1>&#39;pass123&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>review</span> <span class=o>=</span> <span class=n>Review</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>book</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>book</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span><span class=o>=</span><span class=n>other_user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>rating</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Good&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>comment</span><span class=o>=</span><span class=s1>&#39;Nice book&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>force_authenticate</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;rating&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>patch</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/api/reviews/</span><span class=si>{</span><span class=n>review</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s1>/&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span> <span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Run tests:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Run all tests</span>
</span></span><span class=line><span class=cl>python manage.py <span class=nb>test</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run specific app tests</span>
</span></span><span class=line><span class=cl>python manage.py <span class=nb>test</span> books
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run specific test case</span>
</span></span><span class=line><span class=cl>python manage.py <span class=nb>test</span> books.tests.BookAPITestCase
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run with verbose output</span>
</span></span><span class=line><span class=cl>python manage.py <span class=nb>test</span> --verbosity<span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Keep test database for inspection</span>
</span></span><span class=line><span class=cl>python manage.py <span class=nb>test</span> --keepdb
</span></span></code></pre></div><p><strong>Test coverage:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install coverage
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run tests with coverage</span>
</span></span><span class=line><span class=cl>coverage run --source<span class=o>=</span><span class=s1>&#39;.&#39;</span> manage.py <span class=nb>test</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View coverage report</span>
</span></span><span class=line><span class=cl>coverage report
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Generate HTML report</span>
</span></span><span class=line><span class=cl>coverage html
</span></span><span class=line><span class=cl><span class=c1># Open htmlcov/index.html in browser</span>
</span></span></code></pre></div><p>Want to automate your testing workflow? Check out my <a href=/2025/10/python-automation-scripts-every-developer-should-know.html>Python automation guide
</a>to learn how to automatically run tests, generate reports, and send notifications.</p><h2 id=deploying-to-production>Deploying to Production</h2><p>Let&rsquo;s deploy your API to a VPS (DigitalOcean, AWS EC2, etc.).</p><p><strong>Production checklist:</strong></p><ol><li><strong>Environment variables</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decouple</span> <span class=kn>import</span> <span class=n>config</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SECRET_KEY</span> <span class=o>=</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;SECRET_KEY&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>DEBUG</span> <span class=o>=</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DEBUG&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>cast</span><span class=o>=</span><span class=nb>bool</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ALLOWED_HOSTS</span> <span class=o>=</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;ALLOWED_HOSTS&#39;</span><span class=p>,</span> <span class=n>cast</span><span class=o>=</span><span class=k>lambda</span> <span class=n>v</span><span class=p>:</span> <span class=p>[</span><span class=n>s</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>v</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DATABASES</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;default&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;ENGINE&#39;</span><span class=p>:</span> <span class=s1>&#39;django.db.backends.postgresql&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;NAME&#39;</span><span class=p>:</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DB_NAME&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;USER&#39;</span><span class=p>:</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DB_USER&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;PASSWORD&#39;</span><span class=p>:</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DB_PASSWORD&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;HOST&#39;</span><span class=p>:</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DB_HOST&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;PORT&#39;</span><span class=p>:</span> <span class=n>config</span><span class=p>(</span><span class=s1>&#39;DB_PORT&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;5432&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Create <code>.env</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>SECRET_KEY</span><span class=o>=</span>your-secret-key-here
</span></span><span class=line><span class=cl><span class=nv>DEBUG</span><span class=o>=</span>False
</span></span><span class=line><span class=cl><span class=nv>ALLOWED_HOSTS</span><span class=o>=</span>yourdomain.com,www.yourdomain.com
</span></span><span class=line><span class=cl><span class=nv>DB_NAME</span><span class=o>=</span>bookstore_db
</span></span><span class=line><span class=cl><span class=nv>DB_USER</span><span class=o>=</span>bookstore_user
</span></span><span class=line><span class=cl><span class=nv>DB_PASSWORD</span><span class=o>=</span>secure-password
</span></span><span class=line><span class=cl><span class=nv>DB_HOST</span><span class=o>=</span>localhost
</span></span><span class=line><span class=cl><span class=nv>DB_PORT</span><span class=o>=</span><span class=m>5432</span>
</span></span></code></pre></div><ol start=2><li><strong>Install production dependencies:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install gunicorn psycopg2-binary whitenoise
</span></span></code></pre></div><ol start=3><li><strong>Static files:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>STATIC_URL</span> <span class=o>=</span> <span class=s1>&#39;/static/&#39;</span>
</span></span><span class=line><span class=cl><span class=n>STATIC_ROOT</span> <span class=o>=</span> <span class=n>BASE_DIR</span> <span class=o>/</span> <span class=s1>&#39;staticfiles&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>MIDDLEWARE</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;whitenoise.middleware.WhiteNoiseMiddleware&#39;</span><span class=p>,</span>  <span class=c1># Add this</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... other middleware</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>STATICFILES_STORAGE</span> <span class=o>=</span> <span class=s1>&#39;whitenoise.storage.CompressedManifestStaticFilesStorage&#39;</span>
</span></span></code></pre></div><ol start=4><li><strong>Security settings:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># settings.py (production)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DEBUG</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>ALLOWED_HOSTS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;yourdomain.com&#39;</span><span class=p>,</span> <span class=s1>&#39;www.yourdomain.com&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SECURE_SSL_REDIRECT</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>SESSION_COOKIE_SECURE</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>CSRF_COOKIE_SECURE</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>SECURE_BROWSER_XSS_FILTER</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>SECURE_CONTENT_TYPE_NOSNIFF</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>X_FRAME_OPTIONS</span> <span class=o>=</span> <span class=s1>&#39;DENY&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CORS (adjust for your frontend)</span>
</span></span><span class=line><span class=cl><span class=n>CORS_ALLOWED_ORIGINS</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://yourdomain.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://www.yourdomain.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><ol start=5><li><strong>Gunicorn configuration:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># gunicorn_config.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bind</span> <span class=o>=</span> <span class=s2>&#34;0.0.0.0:8000&#34;</span>
</span></span><span class=line><span class=cl><span class=n>workers</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=n>worker_class</span> <span class=o>=</span> <span class=s2>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl><span class=n>worker_connections</span> <span class=o>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl><span class=n>timeout</span> <span class=o>=</span> <span class=mi>30</span>
</span></span><span class=line><span class=cl><span class=n>keepalive</span> <span class=o>=</span> <span class=mi>2</span>
</span></span></code></pre></div><ol start=6><li><strong>Nginx configuration:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=c1># /etc/nginx/sites-available/bookstore
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server_name</span> <span class=s>yourdomain.com</span> <span class=s>www.yourdomain.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=p>=</span> <span class=s>/favicon.ico</span> <span class=p>{</span> <span class=kn>access_log</span> <span class=no>off</span><span class=p>;</span> <span class=kn>log_not_found</span> <span class=no>off</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/static/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>alias</span> <span class=s>/home/user/bookstore-api/staticfiles/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_pass</span> <span class=s>http://127.0.0.1:8000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-Proto</span> <span class=nv>$scheme</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=7><li><strong>Systemd service:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># /etc/systemd/system/bookstore.service</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>Bookstore API</span>
</span></span><span class=line><span class=cl><span class=na>After</span><span class=o>=</span><span class=s>network.target</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>User</span><span class=o>=</span><span class=s>user</span>
</span></span><span class=line><span class=cl><span class=na>Group</span><span class=o>=</span><span class=s>www-data</span>
</span></span><span class=line><span class=cl><span class=na>WorkingDirectory</span><span class=o>=</span><span class=s>/home/user/bookstore-api</span>
</span></span><span class=line><span class=cl><span class=na>Environment</span><span class=o>=</span><span class=s>&#34;PATH=/home/user/bookstore-api/venv/bin&#34;</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>/home/user/bookstore-api/venv/bin/gunicorn \
</span></span></span><span class=line><span class=cl><span class=s>    --config gunicorn_config.py \
</span></span></span><span class=line><span class=cl><span class=s>    bookstore.wsgi:application</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target</span>
</span></span></code></pre></div><ol start=8><li><strong>Deploy commands:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On server</span>
</span></span><span class=line><span class=cl>git clone your-repo
</span></span><span class=line><span class=cl><span class=nb>cd</span> bookstore-api
</span></span><span class=line><span class=cl>python3 -m venv venv
</span></span><span class=line><span class=cl><span class=nb>source</span> venv/bin/activate
</span></span><span class=line><span class=cl>pip install -r requirements.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set up PostgreSQL</span>
</span></span><span class=line><span class=cl>sudo -u postgres psql
</span></span><span class=line><span class=cl>CREATE DATABASE bookstore_db<span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE USER bookstore_user WITH PASSWORD <span class=s1>&#39;password&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>GRANT ALL PRIVILEGES ON DATABASE bookstore_db TO bookstore_user<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=se>\q</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run migrations</span>
</span></span><span class=line><span class=cl>python manage.py migrate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Collect static files</span>
</span></span><span class=line><span class=cl>python manage.py collectstatic --noinput
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create superuser</span>
</span></span><span class=line><span class=cl>python manage.py createsuperuser
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start service</span>
</span></span><span class=line><span class=cl>sudo systemctl start bookstore
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> bookstore
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Restart Nginx</span>
</span></span><span class=line><span class=cl>sudo systemctl restart nginx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check status</span>
</span></span><span class=line><span class=cl>sudo systemctl status bookstore
</span></span></code></pre></div><ol start=9><li><strong>SSL with Let&rsquo;s Encrypt:</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install certbot python3-certbot-nginx
</span></span><span class=line><span class=cl>sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
</span></span></code></pre></div><p>For detailed SSL setup instructions, see my <a href=/2025/08/nginx-certbot-ubuntu-24-04-free-https.html>Nginx with Certbot guide
</a>.</p><p>Your API is now live at <code>https://yourdomain.com/api/</code>!</p><h2 id=next-steps>Next Steps</h2><p>You now know how to build production-ready REST APIs with Django REST Framework. Here&rsquo;s what to explore next:</p><p><strong>Advanced DRF topics:</strong></p><ul><li>Nested serializers and writable nested relationships</li><li>Custom authentication backends</li><li>WebSocket support with Django Channels</li><li>Caching strategies (Redis, Memcached)</li><li>File uploads and cloud storage (S3, Cloudinary)</li><li>API versioning</li><li>Rate limiting strategies</li><li>Background tasks with Celery</li><li>GraphQL with Graphene-Django</li></ul><p><strong>Related skills:</strong></p><ul><li><strong>Frontend integration</strong>: Connect React/Vue to your API</li><li><strong>Deployment automation</strong>: CI/CD with GitHub Actions, GitLab CI</li><li><strong>Monitoring</strong>: Sentry for errors, Prometheus for metrics</li><li><strong>Load balancing</strong>: Multiple Gunicorn instances behind Nginx</li><li><strong>Containerization</strong>: Docker and Kubernetes</li><li><strong>Database optimization</strong>: Query optimization, indexing, connection pooling</li></ul><p><strong>For faster APIs</strong>, check out my <a href=/2025/08/fastapi-tutorial-build-rest-api-from-scratch-beginner-guide.html>FastAPI tutorial
</a>to compare Django REST Framework with FastAPI&rsquo;s async approach.</p><p><strong>For automation</strong>, my <a href=/2025/10/python-automation-scripts-every-developer-should-know.html>Python automation guide
</a>shows how to automate API testing, deployment, and monitoring tasks.</p><p><strong>For data analysis on API logs</strong>, see <a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html>Pandas data analysis tutorial
</a>to analyze request patterns, user behavior, and performance metrics.</p><p>The best way to master DRF is to build real projects. Start with a simple API (todo list, blog, inventory), add authentication, deploy it, then add complexity (payments, notifications, real-time features).</p><p>Django REST Framework powers some of the world&rsquo;s largest APIs. You&rsquo;re now equipped with the same tools.</p><p>Go build something real.</p><hr><p>If you enjoyed this tutorial, you might also like learning <a href=/2025/10/how-to-build-web-scraper-python-beautifulsoup-requests.html>how to build web scrapers with Python
</a>to collect data for your APIs, or check out my guide on <a href=/2025/10/python-automation-scripts-every-developer-should-know.html>Python automation scripts
</a>to streamline your development workflow. For analyzing API usage data, see my <a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html>Pandas data analysis tutorial
</a>.</p><p><strong>Questions or feedback?</strong> Drop a comment below!</p></p><div class="bg-gray-100 dark:bg-gray-800 p-4 my-8 rounded"><h2 class="text-lg font-semibold mb-2">📌 Read Also</h2><ul class="list-disc list-outside ml-5"><li><a href=/2025/10/python-automation-scripts-every-developer-should-know.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">Python Automation Scripts Every Developer Should Know (Save Hours Weekly)</a></li><li><a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Analyze Data with Python Pandas: From Zero to Data Insights</a></li><li><a href=/2025/10/how-to-build-web-scraper-python-beautifulsoup-requests.html class="text-gray-900 dark:text-white hover:text-[#0f7ea9] no-underline">How to Build a Web Scraper in Python with BeautifulSoup and Requests</a></li></ul></div><div class="hidden lg:block"><div class="my-8 py-6 border-t border-b border-gray-200 dark:border-gray-700"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><div class="block lg:hidden my-8 px-2 mb-10"><div class="text-center mb-2"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:50px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="lg:hidden mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><div class="grid gap-3"><a href=/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Build a REST API with Django REST Framework (Production Ready)</h4><p class="text-xs text-gray-500 dark:text-gray-400">29 Oct 2025</p></a><a href=/2025/10/python-automation-scripts-every-developer-should-know.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">Python Automation Scripts Every Developer Should Know (Save Hours Weekly)</h4><p class="text-xs text-gray-500 dark:text-gray-400">28 Oct 2025</p></a><a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Analyze Data with Python Pandas: From Zero to Data Insights</h4><p class="text-xs text-gray-500 dark:text-gray-400">28 Oct 2025</p></a><a href=/2025/10/how-to-build-web-scraper-python-beautifulsoup-requests.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Build a Web Scraper in Python with BeautifulSoup and Requests</h4><p class="text-xs text-gray-500 dark:text-gray-400">27 Oct 2025</p></a><a href=/2025/10/how-to-automate-tasks-cron-jobs-shell-scripts-linux.html class="block py-2 hover:text-[#0f7ea9] transition no-underline"><h4 class="font-medium text-gray-900 dark:text-white text-sm mb-1">How to Automate Tasks with Cron Jobs and Shell Scripts on Linux</h4><p class="text-xs text-gray-500 dark:text-gray-400">26 Oct 2025</p></a></div></div><div class="my-8 py-6"><div class="max-w-4xl mx-auto"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block data-ad-format=autorelaxed data-ad-client=ca-pub-3149036684216973 data-ad-slot=7106179106></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="not-prose my-12 -mx-4 sm:-mx-6 lg:mx-0"><div class=max-w-full><div class=mb-8><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2">Frequently Asked Questions</h2><p class="text-gray-600 dark:text-gray-400">Find quick answers to common questions</p></div><ul class="faq-list space-y-0 list-none p-0 m-0"><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">What is Django REST Framework and why should I use it?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Django REST Framework (DRF) is the most mature and battle-tested Python framework for building REST APIs. It&rsquo;s built on Django, which powers Instagram, Spotify, and NASA websites. DRF provides built-in authentication, permissions, serialization, browsable API interface, and ORM integration out of the box. Choose DRF for enterprise applications, complex business logic, admin panels, and when you need Django&rsquo;s ecosystem (auth, admin, ORM). It&rsquo;s more opinionated than FastAPI but requires less code for complex apps.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">Django REST Framework vs FastAPI - which one should I choose?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>DRF is better for traditional web apps with complex business logic, admin panels, and mature ecosystem needs. It has more built-in features and Django&rsquo;s ORM is excellent for complex queries. FastAPI is better for microservices, real-time apps, and when raw speed matters&ndash;it&rsquo;s 2-3x faster than DRF. Choose DRF if you need Django&rsquo;s admin, authentication system, or are building a monolith. Choose FastAPI for new projects prioritizing performance and modern Python (async/await).</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">Do I need to know Django before learning Django REST Framework?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Yes, basic Django knowledge helps a lot. You should understand Django models, migrations, querysets, and URL routing. However, if you already know databases and web APIs, you can learn both simultaneously&ndash;DRF tutorials usually cover necessary Django concepts. Spend 2-3 days learning Django basics (official tutorial parts 1-4), then jump into DRF. The learning curve is steeper than FastAPI but Django&rsquo;s documentation is excellent.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">How do I implement JWT authentication in Django REST Framework?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Use the djangorestframework-simplejwt library. Install it, add it to INSTALLED_APPS, configure token lifetime in settings, add JWT URLs to your routes, and protect views with IsAuthenticated permission. Users POST credentials to /api/token/ to get access and refresh tokens, then include &lsquo;Authorization: Bearer <token>&rsquo; in request headers. The library handles token generation, validation, refresh, and blacklisting automatically. It&rsquo;s production-ready and widely used.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">What are ViewSets and why should I use them instead of APIView?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>ViewSets combine list, create, retrieve, update, and delete operations into one class, reducing boilerplate code dramatically. A ModelViewSet that needs 5 separate APIView classes (List, Create, Detail, Update, Delete) becomes one ViewSet with ~10 lines. Use ViewSets with Routers for standard CRUD APIs (95% of cases). Use APIView only for custom endpoints that don&rsquo;t fit REST patterns, like login, password reset, or complex business operations.</div></div></details></li><li class="faq-item border-b border-gray-200 dark:border-gray-700" itemscope itemprop=mainEntity itemtype=https://schema.org/Question><details class=faq-details><summary class="cursor-pointer list-none py-5 md:py-6 flex items-start justify-between gap-6 select-none focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150" itemprop=name><h3 class="font-semibold text-base md:text-lg text-gray-900 dark:text-white leading-[1.6] m-0 flex-1">How do I deploy Django REST Framework API to production?</h3><span class="faq-arrow flex-shrink-0 mt-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400 transition-transform duration-200 ease-in-out" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></span></summary><div class="pb-6 pt-2" itemscope itemprop=acceptedAnswer itemtype=https://schema.org/Answer><div class="text-gray-700 dark:text-gray-300 leading-[1.7] text-[15px] md:text-base prose prose-gray dark:prose-invert max-w-none prose-p:my-2.5 prose-p:leading-[1.7] prose-code:bg-gray-100 dark:prose-code:bg-gray-700 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono" itemprop=text>Use Gunicorn/uWSGI as WSGI server, Nginx as reverse proxy, PostgreSQL as database, and Redis for caching. Set DEBUG=False, configure ALLOWED_HOSTS, use environment variables for secrets, enable HTTPS, set up CORS properly, and use WhiteNoise for static files. Deploy on VPS (DigitalOcean, AWS EC2), PaaS (Heroku, Railway), or containers (Docker + Kubernetes). Always use migrations, set up monitoring (Sentry), and implement rate limiting. Never use SQLite in production.</div></div></details></li></ul></div></div><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    
    
    {
      "@type": "Question",
      "name": "\"What is Django REST Framework and why should I use it?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Django REST Framework (DRF) is the most mature and battle-tested Python framework for building REST APIs. It's built on Django, which powers Instagram, Spotify, and NASA websites. DRF provides built-in authentication, permissions, serialization, browsable API interface, and ORM integration out of the box. Choose DRF for enterprise applications, complex business logic, admin panels, and when you need Django's ecosystem (auth, admin, ORM). It's more opinionated than FastAPI but requires less code for complex apps.\""
      }
    }
    
    ,
    {
      "@type": "Question",
      "name": "\"Django REST Framework vs FastAPI - which one should I choose?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"DRF is better for traditional web apps with complex business logic, admin panels, and mature ecosystem needs. It has more built-in features and Django's ORM is excellent for complex queries. FastAPI is better for microservices, real-time apps, and when raw speed matters--it's 2-3x faster than DRF. Choose DRF if you need Django's admin, authentication system, or are building a monolith. Choose FastAPI for new projects prioritizing performance and modern Python (async/await).\""
      }
    }
    
    ,
    {
      "@type": "Question",
      "name": "\"Do I need to know Django before learning Django REST Framework?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Yes, basic Django knowledge helps a lot. You should understand Django models, migrations, querysets, and URL routing. However, if you already know databases and web APIs, you can learn both simultaneously--DRF tutorials usually cover necessary Django concepts. Spend 2-3 days learning Django basics (official tutorial parts 1-4), then jump into DRF. The learning curve is steeper than FastAPI but Django's documentation is excellent.\""
      }
    }
    
    ,
    {
      "@type": "Question",
      "name": "\"How do I implement JWT authentication in Django REST Framework?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Use the djangorestframework-simplejwt library. Install it, add it to INSTALLED_APPS, configure token lifetime in settings, add JWT URLs to your routes, and protect views with IsAuthenticated permission. Users POST credentials to /api/token/ to get access and refresh tokens, then include 'Authorization: Bearer ' in request headers. The library handles token generation, validation, refresh, and blacklisting automatically. It's production-ready and widely used.\""
      }
    }
    
    ,
    {
      "@type": "Question",
      "name": "\"What are ViewSets and why should I use them instead of APIView?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"ViewSets combine list, create, retrieve, update, and delete operations into one class, reducing boilerplate code dramatically. A ModelViewSet that needs 5 separate APIView classes (List, Create, Detail, Update, Delete) becomes one ViewSet with ~10 lines. Use ViewSets with Routers for standard CRUD APIs (95% of cases). Use APIView only for custom endpoints that don't fit REST patterns, like login, password reset, or complex business operations.\""
      }
    }
    
    ,
    {
      "@type": "Question",
      "name": "\"How do I deploy Django REST Framework API to production?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Use Gunicorn/uWSGI as WSGI server, Nginx as reverse proxy, PostgreSQL as database, and Redis for caching. Set DEBUG=False, configure ALLOWED_HOSTS, use environment variables for secrets, enable HTTPS, set up CORS properly, and use WhiteNoise for static files. Deploy on VPS (DigitalOcean, AWS EC2), PaaS (Heroku, Railway), or containers (Docker + Kubernetes). Always use migrations, set up monitoring (Sentry), and implement rate limiting. Never use SQLite in production.\""
      }
    }
    
  ]
}
</script><style>details.faq-details[open] .faq-arrow svg{transform:rotate(180deg)}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".faq-item");e.forEach(function(t){t.addEventListener("toggle",function(){this.open&&e.forEach(function(e){e!==t&&e.open&&(e.open=!1)})})})})</script></article><aside class="space-y-10 hidden lg:block"><div><h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Popular Posts</h3><ul class="space-y-3 list-disc list-outside pl-5 text-sm text-gray-800 dark:text-gray-200"><li><a href=/2025/10/how-to-build-rest-api-django-rest-framework-production-ready.html class="hover:text-[#0f7ea9] transition">How to Build a REST API with Django REST Framework (Production Ready)</a></li><li><a href=/2025/10/python-automation-scripts-every-developer-should-know.html class="hover:text-[#0f7ea9] transition">Python Automation Scripts Every Developer Should Know (Save Hours Weekly)</a></li><li><a href=/2025/10/how-to-analyze-data-python-pandas-from-zero-to-insights.html class="hover:text-[#0f7ea9] transition">How to Analyze Data with Python Pandas: From Zero to Data Insights</a></li><li><a href=/2025/10/how-to-build-web-scraper-python-beautifulsoup-requests.html class="hover:text-[#0f7ea9] transition">How to Build a Web Scraper in Python with BeautifulSoup and Requests</a></li><li><a href=/2025/10/how-to-automate-tasks-cron-jobs-shell-scripts-linux.html class="hover:text-[#0f7ea9] transition">How to Automate Tasks with Cron Jobs and Shell Scripts on Linux</a></li></ul></div></aside></div><section id=comments class=mt-12><script src=https://giscus.app/client.js data-repo=wikukarno/buanacoding data-repo-id=R_kgD0Oj4jAw data-category=General data-category-id=DIC_kwD0Oj4jA84Cr_fx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></main><div class=py-6><div class="max-w-7xl mx-auto px-4"><div class="text-center mb-3"><span class="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide font-medium">Advertisement</span></div><div class="flex justify-center"><ins class=adsbygoogle style=display:block;min-height:90px;max-width:100% data-ad-client=ca-pub-3149036684216973 data-ad-slot=3879195288 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white py-4 transition-colors duration-300"><div class="text-center space-x-4 text-sm font-medium"><a href=/about class="hover:text-cyan-500 dark:hover:text-cyan-400">About</a>
<span>-</span>
<a href=/contact class="hover:text-cyan-500 dark:hover:text-cyan-400">Contact</a>
<span>-</span>
<a href=/privacy-policy class="hover:text-cyan-500 dark:hover:text-cyan-400">Privacy Policy</a>
<span>-</span>
<a href=/disclaimer class="hover:text-cyan-500 dark:hover:text-cyan-400">Disclaimer</a></div></div><footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4 border-t border-gray-200 dark:border-gray-700">&copy; 2025 buanacoding.com</footer><button id=scrollToTop class="fixed bottom-6 right-6 lg:bottom-6 lg:right-6 bg-[#0f7ea9] hover:bg-cyan-600 text-white p-3 rounded-full shadow transition duration-300 z-50" aria-label="Scroll to top">
<svg fill="none" class="w-4 h-4" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg></button><style>body.floating-ad-active #scrollToTop{bottom:100px!important}@media(min-width:1024px){body.floating-ad-active #scrollToTop{bottom:1.5rem!important}}</style><div id=google_translate_element style=display:none></div><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.4.6></script><script>feather.replace();const btn=document.getElementById("scrollToTop"),html=document.documentElement,toggleBtn=document.getElementById("theme-toggle"),toggleBtnMobile=document.getElementById("theme-toggle-mobile"),iconSun=document.getElementById("icon-sun"),iconMoon=document.getElementById("icon-moon"),iconSunMobile=document.getElementById("icon-sun-mobile"),iconMoonMobile=document.getElementById("icon-moon-mobile");document.getElementById("menu-toggle")?.addEventListener("click",()=>{document.getElementById("mobile-menu")?.classList.toggle("hidden")}),btn.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>300?btn.style.display="flex":btn.style.display="none"}),btn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});function updateIcons(e){iconSun.classList.toggle("hidden",!e),iconMoon.classList.toggle("hidden",e),iconSunMobile.classList.toggle("hidden",!e),iconMoonMobile.classList.toggle("hidden",e)}function setDarkMode(e){html.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light"),updateIcons(e)}const userPref=localStorage.getItem("theme"),systemPref=window.matchMedia("(prefers-color-scheme: dark)").matches,isDark=userPref==="dark"||!userPref&&systemPref;setDarkMode(isDark),toggleBtn?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),toggleBtnMobile?.addEventListener("click",()=>{const e=html.getAttribute("data-theme")==="dark";setDarkMode(!e)}),document.querySelectorAll("pre").forEach(e=>{const t=document.createElement("button");t.innerHTML=`
      <span>Copy</span>
    `,t.className=`
    copy-btn absolute top-2 right-2
    text-xs px-2 py-1 rounded flex items-center gap-1
    transition-colors duration-200
    bg-gray-200 text-gray-800 hover:bg-gray-300
    dark:bg-white/10 dark:text-white dark:hover:bg-white/20
  `.trim();const n=document.createElement("div");n.className="relative",e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),t.addEventListener("click",()=>{const n=e.innerText;navigator.clipboard.writeText(n).then(()=>{t.querySelector("span").innerText="Copied!",setTimeout(()=>{t.querySelector("span").innerText="Copy"},2e3)})})});const openBtn=document.getElementById("openSearchModal"),closeBtn=document.getElementById("closeSearchModal"),modal=document.getElementById("searchModal");openBtn.addEventListener("click",()=>{console.log("Search modal opened"),modal.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtn.addEventListener("click",()=>{modal.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modal.classList.add("hidden")}),fetch("/index.json").then(e=>e.json()).then(e=>{const n=new Fuse(e,{keys:["title","content"],threshold:.3}),s=document.getElementById("searchBox"),t=document.getElementById("results");s.addEventListener("input",function(e){const o=e.target.value.trim(),s=document.getElementById("searchAdBanner");if(o.length<2){t.innerHTML="",s&&(s.classList.remove("show"),s.classList.add("hide"),setTimeout(()=>s.style.display="none",300));return}s&&(s.style.display="block",s.classList.remove("hide"),s.classList.add("show"));const i=n.search(o);if(i.length===0)t.innerHTML=`
            <li class='px-4 py-3 text-center text-gray-500 dark:text-gray-400'>
              <div class="mb-2">📄 No results found for "${o}"</div>
              <div class="text-xs">Try different keywords or browse categories below</div>
            </li>
          `;else{let e="";i.forEach((t,n)=>{e+=`
              <li class="px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                <a href="${t.item.href}" class="block font-semibold text-gray-900 dark:text-white no-underline">${t.item.title}</a>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${t.item.content.substring(0,100)}...</p>
              </li>
            `,(n+1)%3===0&&n<i.length-1&&(e+=`
                <li class="px-4 py-2 bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                  <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">📚 More related articles</div>
                </li>
              `)}),t.innerHTML=e}})});const openBtnMobile=document.getElementById("openSearchModalMobile"),closeBtnMobile=document.getElementById("closeSearchModal"),modalMobile=document.getElementById("searchModal");openBtnMobile.addEventListener("click",()=>{console.log("Search modal opened (mobile)"),modalMobile.classList.remove("hidden"),document.getElementById("searchBox").focus()}),closeBtnMobile.addEventListener("click",()=>{modalMobile.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&modalMobile.classList.add("hidden")}),function(){function t(e,t){if(window.google&&window.google.translate&&window.google.translate.TranslateElement){e&&e();return}if(window.__gtReadyCallbacks=window.__gtReadyCallbacks||[],e&&window.__gtReadyCallbacks.push(e),window.__gtLoading)return;window.__gtLoading=!0,window.initGoogleTranslate=function(){try{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"id",autoDisplay:!1},"google_translate_element")}catch{}(window.__gtReadyCallbacks||[]).forEach(function(e){try{e()}catch{}}),window.__gtReadyCallbacks=[]};var s,n=document.createElement("script");n.src="https://translate.google.com/translate_a/element.js?cb=initGoogleTranslate",n.defer=!0,s=!1,n.onerror=function(){s=!0,t&&t()},setTimeout(function(){(!window.google||!window.google.translate)&&(s=!0,t&&t())},4e3),document.head.appendChild(n)}function n(e,t){document.cookie=e+"="+t+"; path=/; expires="+new Date(Date.now()+365*24*3600*1e3).toUTCString()}function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}function s(){if(document.getElementById("translate-fallback"))return;var e=document.createElement("div");e.id="translate-fallback",e.style.cssText="position:fixed;bottom:12px;left:50%;transform:translateX(-50%);z-index:9999;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;",e.innerHTML='<span style="font-size:13px">Auto-translate tidak tersedia di perangkat ini.</span><button id="btnTryId" style="background:#0ea5e9;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:12px">Coba versi Indonesia</button><button id="btnCloseTf" style="background:transparent;color:#fff;border:1px solid #fff3;padding:6px 10px;border-radius:8px;font-size:12px">Tutup</button>',document.body.appendChild(e),document.getElementById("btnCloseTf").onclick=function(){e.remove()},document.getElementById("btnTryId").onclick=function(){var t=new URL(location.href),e=location.pathname;e.startsWith("/id/")||(t.pathname="/id"+(e.startsWith("/")?e:"/"+e)),fetch(t,{method:"HEAD"}).then(function(e){e.ok?location.href=t:location.href="/id/"}).catch(function(){location.href="/id/"})}}function o(e){t(function(){var t=document.querySelector(".goog-te-combo");t?(t.value=e,t.dispatchEvent(new Event("change"))):(n("googtrans","/en/"+e),location.reload())},s)}function i(){e("googtrans"),e("GOOGTRANS")}document.querySelectorAll(".js-lang-link").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-lang"),s=e.getAttribute("data-has-trans")==="true";if(n==="en"){i();return}s||(t.preventDefault(),o(n))})})}()</script></body></html>