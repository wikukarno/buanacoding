{{ define "main" }}
<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  
  <!-- Hero Section -->
  <section class="py-16 pb-32 px-4">
    <div class="max-w-7xl mx-auto text-center">
      <h1 class="text-8xl font-bold text-gray-900 dark:text-white mb-8">404</h1>
      <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-200 mb-6">
        {{ i18n "page_not_found" | default "Page Not Found" }}
      </h2>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto mb-12">
        {{ i18n "404_message" | default "Sorry, the page you're looking for cannot be found. It may have been moved or deleted." }}
      </p>

      <!-- Search Box -->
      <div class="max-w-lg mx-auto mb-10">
        <div class="relative">
          <input 
            type="text" 
            id="search404"
            placeholder="{{ i18n "search_placeholder" | default "Search articles..." }}"
            class="w-full px-6 py-3 pr-12 text-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0f7ea9] dark:text-white"
          />
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="{{ "/" | relLangURL }}" 
           class="bg-[#0f7ea9] hover:bg-[#0a5a7a] text-white px-6 py-3 rounded text-sm font-medium transition">
          ← Back to Home
        </a>
      </div>
    </div>
  </section>

  <!-- Content Section -->
  <section class="py-16 px-4">
    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
      
    <!-- LEFT: CONTENT -->
    <div class="lg:col-span-2">
      <!-- Popular Articles -->
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Popular Articles</h3>
      <div class="grid gap-6 sm:grid-cols-2">
        {{ $popularPages := first 6 (where .Site.RegularPages "Type" "blog") }}
        {{ range $popularPages }}
        <a href="{{ .RelPermalink }}" class="bg-white dark:bg-gray-800 p-4 rounded shadow hover:bg-gray-100 dark:hover:bg-gray-700 transition">
          <h4 class="text-lg font-semibold text-[#0f7ea9] mb-1">
            {{ .Title }}
          </h4>
          <p class="text-sm text-gray-600 dark:text-gray-300">{{ .Summary | truncate 100 }}</p>
          <span class="text-xs text-gray-400 block mt-2">
            {{ .Date.Format "02 Jan 2006" }}
            {{ if .Params.tags }}
              • <span class="text-[#0f7ea9]">#{{ index .Params.tags 0 }}</span>
            {{ end }}
          </span>
        </a>
        {{ end }}
      </div>
    </div>

    <!-- RIGHT: SIDEBAR -->
    <div>
      <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Browse Topics</h3>
      <div class="space-y-3">
        {{ $navTags := .Site.Params.navTags }}
        {{ if $navTags }}
          {{ range $tag := $navTags }}
            {{ $key := lower $tag }}
            {{ with (index $.Site.Taxonomies.tags $key) }}
            <a href="{{ (printf "/tags/%s" ($key | urlize)) | relLangURL }}"
               class="flex items-center justify-between text-gray-700 dark:text-gray-300 hover:text-[#0f7ea9] transition">
              <span>#{{ $tag }}</span>
              <span class="text-sm text-gray-500">({{ len . }})</span>
            </a>
            {{ end }}
          {{ end }}
        {{ else }}
          {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
            {{ if ge (len $taxonomy) 2 }}
            <a href="{{ (printf "/tags/%s" ($name | urlize)) | relLangURL }}"
               class="flex items-center justify-between text-gray-700 dark:text-gray-300 hover:text-[#0f7ea9] transition">
              <span>#{{ $name }}</span>
              <span class="text-sm text-gray-500">({{ len $taxonomy }})</span>
            </a>
            {{ end }}
          {{ end }}
        {{ end }}
      </div>

      <!-- Advertisement -->
      <div class="mt-12">
        {{ partial "adsense-unit.html" . }}
      </div>
    </div>

    </div>
  </section>

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search404');
  if (searchInput) {
    searchInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        const query = this.value.trim();
        if (query) {
          window.location.href = '{{ "/" | relLangURL }}?search=' + encodeURIComponent(query);
        }
      }
    });
  }
});
</script>

{{ end }}